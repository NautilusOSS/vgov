/* eslint-disable */
/**
 * This file was automatically generated by @algorandfoundation/algokit-client-generator.
 * DO NOT MODIFY IT BY HAND.
 * requires: @algorandfoundation/algokit-utils: ^2
 */
import * as algokit from '@algorandfoundation/algokit-utils'
import type {
  ABIAppCallArg,
  AppCallTransactionResult,
  AppCallTransactionResultOfType,
  AppCompilationResult,
  AppReference,
  AppState,
  CoreAppCallArgs,
  RawAppCallArgs,
  TealTemplateParams,
} from '@algorandfoundation/algokit-utils/types/app'
import type {
  AppClientCallCoreParams,
  AppClientCompilationParams,
  AppClientDeployCoreParams,
  AppDetails,
  ApplicationClient,
} from '@algorandfoundation/algokit-utils/types/app-client'
import type { AppSpec } from '@algorandfoundation/algokit-utils/types/app-spec'
import type { SendTransactionResult, TransactionToSign, SendTransactionFrom, SendTransactionParams } from '@algorandfoundation/algokit-utils/types/transaction'
import type { ABIResult, TransactionWithSigner } from 'algosdk'
import { Algodv2, OnApplicationComplete, Transaction, AtomicTransactionComposer, modelsv2 } from 'algosdk'
export const APP_SPEC: AppSpec = {
  "hints": {
    "bootstrap()void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "veto_proposal(byte[32])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "execute_proposal(byte[32])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "queue_proposal(byte[32])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "finalize_proposal(byte[32])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "cancel_proposal(byte[32])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_quorum_requirement(uint256)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "update_total_voting_power(uint256)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "add_power_source(uint64,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_power_source(uint64)(uint64,uint64)": {
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "PowerSource",
          "elements": [
            [
              "power_source_id",
              "uint64"
            ],
            [
              "power_multiplier",
              "uint64"
            ]
          ]
        }
      }
    },
    "update_power_source(uint64,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "lock_power(uint64,uint256,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64)": {
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "PowerLock",
          "elements": [
            [
              "power_source_id",
              "uint64"
            ],
            [
              "power_source_amount",
              "uint256"
            ],
            [
              "power_source_unlock_timestamp",
              "uint64"
            ],
            [
              "power_source_owner",
              "address"
            ],
            [
              "power_granted",
              "uint256"
            ],
            [
              "lockup_duration",
              "uint64"
            ],
            [
              "lockup_bonus_multiplier",
              "uint64"
            ]
          ]
        }
      }
    },
    "unlock_power(uint64,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_proposal_node(byte[64],byte[512])byte[32]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256)": {
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "Proposal",
          "elements": [
            [
              "proposal_index",
              "uint64"
            ],
            [
              "proposal_status",
              "uint64"
            ],
            [
              "proposer",
              "address"
            ],
            [
              "proposal_title",
              "byte[64]"
            ],
            [
              "proposal_description",
              "byte[512]"
            ],
            [
              "proposal_node",
              "byte[32]"
            ],
            [
              "proposal_category_id",
              "uint64"
            ],
            [
              "proposal_total_votes",
              "uint64"
            ],
            [
              "proposal_yes_votes",
              "uint64"
            ],
            [
              "proposal_total_power",
              "uint256"
            ],
            [
              "proposal_activation_power",
              "uint256"
            ],
            [
              "created_at_timestamp",
              "uint64"
            ],
            [
              "voting_start_timestamp",
              "uint64"
            ],
            [
              "voting_end_timestamp",
              "uint64"
            ],
            [
              "proposal_action_hash",
              "byte[32]"
            ],
            [
              "executed_at_timestamp",
              "uint64"
            ],
            [
              "execution_txn_id",
              "uint64"
            ],
            [
              "proposal_activation_timestamp",
              "uint64"
            ],
            [
              "proposal_quorum_threshold",
              "uint64"
            ],
            [
              "proposal_quorum_met",
              "bool"
            ],
            [
              "proposal_quorum_status",
              "uint64"
            ],
            [
              "proposal_yes_power",
              "uint256"
            ]
          ]
        }
      }
    },
    "get_vote(byte[32],address)uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "propose(byte[64],byte[512],uint64,uint64)byte[32]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "activate_proposal(byte[32])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "cast_vote(byte[32],uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "reject_proposal(byte[32])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_active_proposal_count()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_total_voter_count()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_participation_rate()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_proposal_participation_rate(byte[32])uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_eligible_voter_count()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_participating_voter_count()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_finalized_proposal_count()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_average_participation_per_proposal()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_average_votes_per_proposal()uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_voter_influence_score(address)uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_voter_engagement_score(address)uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "has_voter_participated_in_proposal(address,byte[32])bool": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_voter_participation_timestamp(address,byte[32])uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_voter_proposal_count(address)uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_voter_last_proposal_node(address)byte[32]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_quorum_requirement()uint256": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_quorum_threshold()uint256": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "check_proposal_quorum(byte[32])bool": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_proposal_quorum_status(byte[32])uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_proposal_quorum_progress(byte[32])uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_proposal_quorum_threshold(byte[32])uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_lockup_bonus_multiplier(uint64)uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_lockup_tier_info(uint64)uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "calculate_potential_power_granted(uint64,uint256,uint64)uint256": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_lockup_tier_duration(uint64)uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_lockup_tier_bonus(uint64)uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_power_lock_info(uint64,uint64)uint64": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32])": {
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "Voter",
          "elements": [
            [
              "voter_address",
              "address"
            ],
            [
              "vote_power",
              "uint256"
            ],
            [
              "vote_timestamp",
              "uint64"
            ],
            [
              "proposals_participated",
              "uint64"
            ],
            [
              "last_participation_timestamp",
              "uint64"
            ],
            [
              "last_proposal_node",
              "byte[32]"
            ]
          ]
        }
      }
    },
    "check_proposal_activation(byte[32])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_election_node(byte[64],byte[512])byte[32]": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "ElectionProposal",
          "elements": [
            [
              "election_index",
              "uint64"
            ],
            [
              "election_status",
              "uint64"
            ],
            [
              "proposer",
              "address"
            ],
            [
              "election_title",
              "byte[64]"
            ],
            [
              "election_description",
              "byte[512]"
            ],
            [
              "election_node",
              "byte[32]"
            ],
            [
              "created_at_timestamp",
              "uint64"
            ],
            [
              "election_start_timestamp",
              "uint64"
            ],
            [
              "election_end_timestamp",
              "uint64"
            ],
            [
              "endorsement_count",
              "uint64"
            ],
            [
              "endorsement_votes",
              "uint256"
            ],
            [
              "endorsement_timestamp",
              "uint64"
            ]
          ]
        }
      }
    },
    "propose_election(byte[64],byte[512],uint64,uint64)byte[32]": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64)": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      },
      "structs": {
        "output": {
          "name": "Endorsement",
          "elements": [
            [
              "endorsement_node",
              "byte[32]"
            ],
            [
              "endorsement_election_node",
              "byte[32]"
            ],
            [
              "endorsement_candidate_node",
              "byte[32]"
            ],
            [
              "endorsement_count",
              "uint64"
            ],
            [
              "endorsement_votes",
              "uint256"
            ],
            [
              "endorsement_timestamp",
              "uint64"
            ]
          ]
        }
      }
    },
    "get_endorsement(byte[32],address)bool": {
      "read_only": true,
      "call_config": {
        "no_op": "CALL"
      }
    },
    "transfer(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "set_version(uint64,uint64)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "approve_update(bool)void": {
      "call_config": {
        "no_op": "CALL"
      }
    },
    "grant_upgrader(address)void": {
      "call_config": {
        "no_op": "CALL"
      }
    }
  },
  "source": {
    "approval": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpfX21haW5fXy5Qb3dHb3Zlcm5hbmNlLmFwcHJvdmFsX3Byb2dyYW06CiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYm56IG1haW5fZW50cnlwb2ludEAyCiAgICBjYWxsc3ViIF9faW5pdF9fCgptYWluX2VudHJ5cG9pbnRAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4biBOdW1BcHBBcmdzCiAgICBieiBtYWluX2JhcmVfcm91dGluZ0A2NgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWV0aG9kICJib290c3RyYXAoKXZvaWQiCiAgICBtZXRob2QgInZldG9fcHJvcG9zYWwoYnl0ZVszMl0pdm9pZCIKICAgIG1ldGhvZCAiZXhlY3V0ZV9wcm9wb3NhbChieXRlWzMyXSl2b2lkIgogICAgbWV0aG9kICJxdWV1ZV9wcm9wb3NhbChieXRlWzMyXSl2b2lkIgogICAgbWV0aG9kICJmaW5hbGl6ZV9wcm9wb3NhbChieXRlWzMyXSl2b2lkIgogICAgbWV0aG9kICJjYW5jZWxfcHJvcG9zYWwoYnl0ZVszMl0pdm9pZCIKICAgIG1ldGhvZCAic2V0X3F1b3J1bV9yZXF1aXJlbWVudCh1aW50MjU2KXZvaWQiCiAgICBtZXRob2QgInVwZGF0ZV90b3RhbF92b3RpbmdfcG93ZXIodWludDI1Nil2b2lkIgogICAgbWV0aG9kICJhZGRfcG93ZXJfc291cmNlKHVpbnQ2NCx1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAiZ2V0X3Bvd2VyX3NvdXJjZSh1aW50NjQpKHVpbnQ2NCx1aW50NjQpIgogICAgbWV0aG9kICJ1cGRhdGVfcG93ZXJfc291cmNlKHVpbnQ2NCx1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAibG9ja19wb3dlcih1aW50NjQsdWludDI1Nix1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAiZ2V0X3Bvd2VyX2xvY2sodWludDY0LHVpbnQ2NCkodWludDY0LHVpbnQyNTYsdWludDY0LGFkZHJlc3MsdWludDI1Nix1aW50NjQsdWludDY0KSIKICAgIG1ldGhvZCAidW5sb2NrX3Bvd2VyKHVpbnQ2NCx1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAiZ2V0X3Byb3Bvc2FsX25vZGUoYnl0ZVs2NF0sYnl0ZVs1MTJdKWJ5dGVbMzJdIgogICAgbWV0aG9kICJnZXRfcHJvcG9zYWwoYnl0ZVszMl0pKHVpbnQ2NCx1aW50NjQsYWRkcmVzcyxieXRlWzY0XSxieXRlWzUxMl0sYnl0ZVszMl0sdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDI1Nix1aW50MjU2LHVpbnQ2NCx1aW50NjQsdWludDY0LGJ5dGVbMzJdLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCxib29sLHVpbnQ2NCx1aW50MjU2KSIKICAgIG1ldGhvZCAiZ2V0X3ZvdGUoYnl0ZVszMl0sYWRkcmVzcyl1aW50NjQiCiAgICBtZXRob2QgInByb3Bvc2UoYnl0ZVs2NF0sYnl0ZVs1MTJdLHVpbnQ2NCx1aW50NjQpYnl0ZVszMl0iCiAgICBtZXRob2QgImFjdGl2YXRlX3Byb3Bvc2FsKGJ5dGVbMzJdKXZvaWQiCiAgICBtZXRob2QgImNhc3Rfdm90ZShieXRlWzMyXSx1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAicmVqZWN0X3Byb3Bvc2FsKGJ5dGVbMzJdKXZvaWQiCiAgICBtZXRob2QgImdldF9hY3RpdmVfcHJvcG9zYWxfY291bnQoKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X3RvdGFsX3ZvdGVyX2NvdW50KCl1aW50NjQiCiAgICBtZXRob2QgImdldF9wYXJ0aWNpcGF0aW9uX3JhdGUoKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X3Byb3Bvc2FsX3BhcnRpY2lwYXRpb25fcmF0ZShieXRlWzMyXSl1aW50NjQiCiAgICBtZXRob2QgImdldF9lbGlnaWJsZV92b3Rlcl9jb3VudCgpdWludDY0IgogICAgbWV0aG9kICJnZXRfcGFydGljaXBhdGluZ192b3Rlcl9jb3VudCgpdWludDY0IgogICAgbWV0aG9kICJnZXRfZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50KCl1aW50NjQiCiAgICBtZXRob2QgImdldF9hdmVyYWdlX3BhcnRpY2lwYXRpb25fcGVyX3Byb3Bvc2FsKCl1aW50NjQiCiAgICBtZXRob2QgImdldF9hdmVyYWdlX3ZvdGVzX3Blcl9wcm9wb3NhbCgpdWludDY0IgogICAgbWV0aG9kICJnZXRfdm90ZXJfaW5mbHVlbmNlX3Njb3JlKGFkZHJlc3MpdWludDY0IgogICAgbWV0aG9kICJnZXRfdm90ZXJfZW5nYWdlbWVudF9zY29yZShhZGRyZXNzKXVpbnQ2NCIKICAgIG1ldGhvZCAiaGFzX3ZvdGVyX3BhcnRpY2lwYXRlZF9pbl9wcm9wb3NhbChhZGRyZXNzLGJ5dGVbMzJdKWJvb2wiCiAgICBtZXRob2QgImdldF92b3Rlcl9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcChhZGRyZXNzLGJ5dGVbMzJdKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X3ZvdGVyX3Byb3Bvc2FsX2NvdW50KGFkZHJlc3MpdWludDY0IgogICAgbWV0aG9kICJnZXRfdm90ZXJfbGFzdF9wcm9wb3NhbF9ub2RlKGFkZHJlc3MpYnl0ZVszMl0iCiAgICBtZXRob2QgImdldF9xdW9ydW1fcmVxdWlyZW1lbnQoKXVpbnQyNTYiCiAgICBtZXRob2QgImdldF9xdW9ydW1fdGhyZXNob2xkKCl1aW50MjU2IgogICAgbWV0aG9kICJjaGVja19wcm9wb3NhbF9xdW9ydW0oYnl0ZVszMl0pYm9vbCIKICAgIG1ldGhvZCAiZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXMoYnl0ZVszMl0pdWludDY0IgogICAgbWV0aG9kICJnZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzKGJ5dGVbMzJdKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQoYnl0ZVszMl0pdWludDY0IgogICAgbWV0aG9kICJnZXRfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIodWludDY0KXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X2xvY2t1cF90aWVyX2luZm8odWludDY0KXVpbnQ2NCIKICAgIG1ldGhvZCAiY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkKHVpbnQ2NCx1aW50MjU2LHVpbnQ2NCl1aW50MjU2IgogICAgbWV0aG9kICJnZXRfbG9ja3VwX3RpZXJfZHVyYXRpb24odWludDY0KXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X2xvY2t1cF90aWVyX2JvbnVzKHVpbnQ2NCl1aW50NjQiCiAgICBtZXRob2QgImdldF9wb3dlcl9sb2NrX2luZm8odWludDY0LHVpbnQ2NCl1aW50NjQiCiAgICBtZXRob2QgImdldF92b3RlcihhZGRyZXNzKShhZGRyZXNzLHVpbnQyNTYsdWludDY0LHVpbnQ2NCx1aW50NjQsYnl0ZVszMl0pIgogICAgbWV0aG9kICJjaGVja19wcm9wb3NhbF9hY3RpdmF0aW9uKGJ5dGVbMzJdKXZvaWQiCiAgICBtZXRob2QgImdldF9lbGVjdGlvbl9ub2RlKGJ5dGVbNjRdLGJ5dGVbNTEyXSlieXRlWzMyXSIKICAgIG1ldGhvZCAiZ2V0X2VsZWN0aW9uKGJ5dGVbMzJdKSh1aW50NjQsdWludDY0LGFkZHJlc3MsYnl0ZVs2NF0sYnl0ZVs1MTJdLGJ5dGVbMzJdLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50MjU2LHVpbnQ2NCkiCiAgICBtZXRob2QgInByb3Bvc2VfZWxlY3Rpb24oYnl0ZVs2NF0sYnl0ZVs1MTJdLHVpbnQ2NCx1aW50NjQpYnl0ZVszMl0iCiAgICBtZXRob2QgImVuZG9yc2VfY2FuZGlkYXRlcyhieXRlWzMyXSxieXRlWzMyXSxieXRlWzMyXSxieXRlWzMyXSxieXRlWzMyXSxieXRlWzMyXSl2b2lkIgogICAgbWV0aG9kICJnZXRfY2FuZGlkYXRlX2VuZG9yc2VtZW50KGJ5dGVbMzJdLGJ5dGVbMzJdKShieXRlWzMyXSxieXRlWzMyXSxieXRlWzMyXSx1aW50NjQsdWludDI1Nix1aW50NjQpIgogICAgbWV0aG9kICJnZXRfZW5kb3JzZW1lbnQoYnl0ZVszMl0sYWRkcmVzcylib29sIgogICAgbWV0aG9kICJ0cmFuc2ZlcihhZGRyZXNzKXZvaWQiCiAgICBtZXRob2QgInNldF92ZXJzaW9uKHVpbnQ2NCx1aW50NjQpdm9pZCIKICAgIG1ldGhvZCAiYXBwcm92ZV91cGRhdGUoYm9vbCl2b2lkIgogICAgbWV0aG9kICJncmFudF91cGdyYWRlcihhZGRyZXNzKXZvaWQiCiAgICB1bmNvdmVyIDYwCiAgICBtYXRjaCBtYWluX2Jvb3RzdHJhcF9yb3V0ZUA0IG1haW5fdmV0b19wcm9wb3NhbF9yb3V0ZUA1IG1haW5fZXhlY3V0ZV9wcm9wb3NhbF9yb3V0ZUA2IG1haW5fcXVldWVfcHJvcG9zYWxfcm91dGVANyBtYWluX2ZpbmFsaXplX3Byb3Bvc2FsX3JvdXRlQDggbWFpbl9jYW5jZWxfcHJvcG9zYWxfcm91dGVAOSBtYWluX3NldF9xdW9ydW1fcmVxdWlyZW1lbnRfcm91dGVAMTAgbWFpbl91cGRhdGVfdG90YWxfdm90aW5nX3Bvd2VyX3JvdXRlQDExIG1haW5fYWRkX3Bvd2VyX3NvdXJjZV9yb3V0ZUAxMiBtYWluX2dldF9wb3dlcl9zb3VyY2Vfcm91dGVAMTMgbWFpbl91cGRhdGVfcG93ZXJfc291cmNlX3JvdXRlQDE0IG1haW5fbG9ja19wb3dlcl9yb3V0ZUAxNSBtYWluX2dldF9wb3dlcl9sb2NrX3JvdXRlQDE2IG1haW5fdW5sb2NrX3Bvd2VyX3JvdXRlQDE3IG1haW5fZ2V0X3Byb3Bvc2FsX25vZGVfcm91dGVAMTggbWFpbl9nZXRfcHJvcG9zYWxfcm91dGVAMTkgbWFpbl9nZXRfdm90ZV9yb3V0ZUAyMCBtYWluX3Byb3Bvc2Vfcm91dGVAMjEgbWFpbl9hY3RpdmF0ZV9wcm9wb3NhbF9yb3V0ZUAyMiBtYWluX2Nhc3Rfdm90ZV9yb3V0ZUAyMyBtYWluX3JlamVjdF9wcm9wb3NhbF9yb3V0ZUAyNCBtYWluX2dldF9hY3RpdmVfcHJvcG9zYWxfY291bnRfcm91dGVAMjUgbWFpbl9nZXRfdG90YWxfdm90ZXJfY291bnRfcm91dGVAMjYgbWFpbl9nZXRfcGFydGljaXBhdGlvbl9yYXRlX3JvdXRlQDI3IG1haW5fZ2V0X3Byb3Bvc2FsX3BhcnRpY2lwYXRpb25fcmF0ZV9yb3V0ZUAyOCBtYWluX2dldF9lbGlnaWJsZV92b3Rlcl9jb3VudF9yb3V0ZUAyOSBtYWluX2dldF9wYXJ0aWNpcGF0aW5nX3ZvdGVyX2NvdW50X3JvdXRlQDMwIG1haW5fZ2V0X2ZpbmFsaXplZF9wcm9wb3NhbF9jb3VudF9yb3V0ZUAzMSBtYWluX2dldF9hdmVyYWdlX3BhcnRpY2lwYXRpb25fcGVyX3Byb3Bvc2FsX3JvdXRlQDMyIG1haW5fZ2V0X2F2ZXJhZ2Vfdm90ZXNfcGVyX3Byb3Bvc2FsX3JvdXRlQDMzIG1haW5fZ2V0X3ZvdGVyX2luZmx1ZW5jZV9zY29yZV9yb3V0ZUAzNCBtYWluX2dldF92b3Rlcl9lbmdhZ2VtZW50X3Njb3JlX3JvdXRlQDM1IG1haW5faGFzX3ZvdGVyX3BhcnRpY2lwYXRlZF9pbl9wcm9wb3NhbF9yb3V0ZUAzNiBtYWluX2dldF92b3Rlcl9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcF9yb3V0ZUAzNyBtYWluX2dldF92b3Rlcl9wcm9wb3NhbF9jb3VudF9yb3V0ZUAzOCBtYWluX2dldF92b3Rlcl9sYXN0X3Byb3Bvc2FsX25vZGVfcm91dGVAMzkgbWFpbl9nZXRfcXVvcnVtX3JlcXVpcmVtZW50X3JvdXRlQDQwIG1haW5fZ2V0X3F1b3J1bV90aHJlc2hvbGRfcm91dGVANDEgbWFpbl9jaGVja19wcm9wb3NhbF9xdW9ydW1fcm91dGVANDIgbWFpbl9nZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1c19yb3V0ZUA0MyBtYWluX2dldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3Nfcm91dGVANDQgbWFpbl9nZXRfcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZF9yb3V0ZUA0NSBtYWluX2dldF9sb2NrdXBfYm9udXNfbXVsdGlwbGllcl9yb3V0ZUA0NiBtYWluX2dldF9sb2NrdXBfdGllcl9pbmZvX3JvdXRlQDQ3IG1haW5fY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkX3JvdXRlQDQ4IG1haW5fZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uX3JvdXRlQDQ5IG1haW5fZ2V0X2xvY2t1cF90aWVyX2JvbnVzX3JvdXRlQDUwIG1haW5fZ2V0X3Bvd2VyX2xvY2tfaW5mb19yb3V0ZUA1MSBtYWluX2dldF92b3Rlcl9yb3V0ZUA1MiBtYWluX2NoZWNrX3Byb3Bvc2FsX2FjdGl2YXRpb25fcm91dGVANTMgbWFpbl9nZXRfZWxlY3Rpb25fbm9kZV9yb3V0ZUA1NCBtYWluX2dldF9lbGVjdGlvbl9yb3V0ZUA1NSBtYWluX3Byb3Bvc2VfZWxlY3Rpb25fcm91dGVANTYgbWFpbl9lbmRvcnNlX2NhbmRpZGF0ZXNfcm91dGVANTcgbWFpbl9nZXRfY2FuZGlkYXRlX2VuZG9yc2VtZW50X3JvdXRlQDU4IG1haW5fZ2V0X2VuZG9yc2VtZW50X3JvdXRlQDU5IG1haW5fdHJhbnNmZXJfcm91dGVANjAgbWFpbl9zZXRfdmVyc2lvbl9yb3V0ZUA2MSBtYWluX2FwcHJvdmVfdXBkYXRlX3JvdXRlQDYyIG1haW5fZ3JhbnRfdXBncmFkZXJfcm91dGVANjMKICAgIGIgbWFpbl9zd2l0Y2hfY2FzZV9kZWZhdWx0QDY0CgptYWluX2Jvb3RzdHJhcF9yb3V0ZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU4NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgYm9vdHN0cmFwCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3ZldG9fcHJvcG9zYWxfcm91dGVANToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1ODgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTg4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgdmV0b19wcm9wb3NhbAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9leGVjdXRlX3Byb3Bvc2FsX3JvdXRlQDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTk0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU5NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGV4ZWN1dGVfcHJvcG9zYWwKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fcXVldWVfcHJvcG9zYWxfcm91dGVANzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MDAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNjAwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgcXVldWVfcHJvcG9zYWwKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZmluYWxpemVfcHJvcG9zYWxfcm91dGVAODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MDYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNjA2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZmluYWxpemVfcHJvcG9zYWwKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fY2FuY2VsX3Byb3Bvc2FsX3JvdXRlQDk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNjEyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTYxMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGNhbmNlbF9wcm9wb3NhbAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9zZXRfcXVvcnVtX3JlcXVpcmVtZW50X3JvdXRlQDEwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTYxOAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MTgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBzZXRfcXVvcnVtX3JlcXVpcmVtZW50CiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3VwZGF0ZV90b3RhbF92b3RpbmdfcG93ZXJfcm91dGVAMTE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNjI0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTYyNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHVwZGF0ZV90b3RhbF92b3RpbmdfcG93ZXIKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYWRkX3Bvd2VyX3NvdXJjZV9yb3V0ZUAxMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGFkZF9wb3dlcl9zb3VyY2UKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3Bvd2VyX3NvdXJjZV9yb3V0ZUAxMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYzMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYzMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF9wb3dlcl9zb3VyY2UKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl91cGRhdGVfcG93ZXJfc291cmNlX3JvdXRlQDE0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjcwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjcwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgdXBkYXRlX3Bvd2VyX3NvdXJjZQogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9sb2NrX3Bvd2VyX3JvdXRlQDE1OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Njg1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Njg1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHVuY292ZXIgMgogICAgdW5jb3ZlciAyCiAgICB1bmNvdmVyIDIKICAgIGNhbGxzdWIgbG9ja19wb3dlcgogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcG93ZXJfbG9ja19yb3V0ZUAxNjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc1MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc1MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF9wb3dlcl9sb2NrCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fdW5sb2NrX3Bvd2VyX3JvdXRlQDE3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Nzc3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Nzc3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgdW5sb2NrX3Bvd2VyCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9wcm9wb3NhbF9ub2RlX3JvdXRlQDE4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODIwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODIwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ2V0X3Byb3Bvc2FsX25vZGUKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcHJvcG9zYWxfcm91dGVAMTk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBnZXRfcHJvcG9zYWwKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfdm90ZV9yb3V0ZUAyMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg2MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg2MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF92b3RlCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fcHJvcG9zZV9yb3V0ZUAyMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg3NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg3NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB1bmNvdmVyIDMKICAgIHVuY292ZXIgMwogICAgdW5jb3ZlciAzCiAgICB1bmNvdmVyIDMKICAgIGNhbGxzdWIgcHJvcG9zZQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2FjdGl2YXRlX3Byb3Bvc2FsX3JvdXRlQDIyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTI2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTI2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgYWN0aXZhdGVfcHJvcG9zYWwKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fY2FzdF92b3RlX3JvdXRlQDIzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTY1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTY1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgY2FzdF92b3RlCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3JlamVjdF9wcm9wb3NhbF9yb3V0ZUAyNDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMjMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDIzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgcmVqZWN0X3Byb3Bvc2FsCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9hY3RpdmVfcHJvcG9zYWxfY291bnRfcm91dGVAMjU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTgzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfYWN0aXZlX3Byb3Bvc2FsX2NvdW50CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3RvdGFsX3ZvdGVyX2NvdW50X3JvdXRlQDI2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE4NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X3RvdGFsX3ZvdGVyX2NvdW50CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3BhcnRpY2lwYXRpb25fcmF0ZV9yb3V0ZUAyNzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExOTEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9wYXJ0aWNpcGF0aW9uX3JhdGUKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcHJvcG9zYWxfcGFydGljaXBhdGlvbl9yYXRlX3JvdXRlQDI4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIwMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBnZXRfcHJvcG9zYWxfcGFydGljaXBhdGlvbl9yYXRlCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2VsaWdpYmxlX3ZvdGVyX2NvdW50X3JvdXRlQDI5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIxNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X2VsaWdpYmxlX3ZvdGVyX2NvdW50CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3BhcnRpY2lwYXRpbmdfdm90ZXJfY291bnRfcm91dGVAMzA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjE4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfcGFydGljaXBhdGluZ192b3Rlcl9jb3VudAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9maW5hbGl6ZWRfcHJvcG9zYWxfY291bnRfcm91dGVAMzE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjIyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2F2ZXJhZ2VfcGFydGljaXBhdGlvbl9wZXJfcHJvcG9zYWxfcm91dGVAMzI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjI2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfYXZlcmFnZV9wYXJ0aWNpcGF0aW9uX3Blcl9wcm9wb3NhbAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9hdmVyYWdlX3ZvdGVzX3Blcl9wcm9wb3NhbF9yb3V0ZUAzMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMzUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9hdmVyYWdlX3ZvdGVzX3Blcl9wcm9wb3NhbAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF92b3Rlcl9pbmZsdWVuY2Vfc2NvcmVfcm91dGVAMzQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjQyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI0MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF92b3Rlcl9pbmZsdWVuY2Vfc2NvcmUKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfdm90ZXJfZW5nYWdlbWVudF9zY29yZV9yb3V0ZUAzNToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjU0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ2V0X3ZvdGVyX2VuZ2FnZW1lbnRfc2NvcmUKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9oYXNfdm90ZXJfcGFydGljaXBhdGVkX2luX3Byb3Bvc2FsX3JvdXRlQDM2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI3NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBoYXNfdm90ZXJfcGFydGljaXBhdGVkX2luX3Byb3Bvc2FsCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3ZvdGVyX3BhcnRpY2lwYXRpb25fdGltZXN0YW1wX3JvdXRlQDM3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI4NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyODQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBnZXRfdm90ZXJfcGFydGljaXBhdGlvbl90aW1lc3RhbXAKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfdm90ZXJfcHJvcG9zYWxfY291bnRfcm91dGVAMzg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjkxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI5MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF92b3Rlcl9wcm9wb3NhbF9jb3VudAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF92b3Rlcl9sYXN0X3Byb3Bvc2FsX25vZGVfcm91dGVAMzk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjk2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI5NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF92b3Rlcl9sYXN0X3Byb3Bvc2FsX25vZGUKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcXVvcnVtX3JlcXVpcmVtZW50X3JvdXRlQDQwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMwMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X3F1b3J1bV9yZXF1aXJlbWVudAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9xdW9ydW1fdGhyZXNob2xkX3JvdXRlQDQxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMxNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X3F1b3J1bV90aHJlc2hvbGQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9jaGVja19wcm9wb3NhbF9xdW9ydW1fcm91dGVANDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzIzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMyMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGNoZWNrX3Byb3Bvc2FsX3F1b3J1bQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9wcm9wb3NhbF9xdW9ydW1fc3RhdHVzX3JvdXRlQDQzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMyNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzMjcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBnZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1cwogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3Nfcm91dGVANDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzU4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM1OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3MKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZF9yb3V0ZUA0NToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNjIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzYyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfbG9ja3VwX2JvbnVzX211bHRpcGxpZXJfcm91dGVANDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzgxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM4MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF9sb2NrdXBfYm9udXNfbXVsdGlwbGllcgogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9sb2NrdXBfdGllcl9pbmZvX3JvdXRlQDQ3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM4OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzODkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBnZXRfbG9ja3VwX3RpZXJfaW5mbwogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2NhbGN1bGF0ZV9wb3RlbnRpYWxfcG93ZXJfZ3JhbnRlZF9yb3V0ZUA0ODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzOTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzk0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHVuY292ZXIgMgogICAgdW5jb3ZlciAyCiAgICB1bmNvdmVyIDIKICAgIGNhbGxzdWIgY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uX3JvdXRlQDQ5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQyNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0MjcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBnZXRfbG9ja3VwX3RpZXJfZHVyYXRpb24KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfbG9ja3VwX3RpZXJfYm9udXNfcm91dGVANTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDQ2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ0NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF9sb2NrdXBfdGllcl9ib251cwogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9wb3dlcl9sb2NrX2luZm9fcm91dGVANTE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDY1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ2NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF9wb3dlcl9sb2NrX2luZm8KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfdm90ZXJfcm91dGVANTI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTIwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUyMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdldF92b3RlcgogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2NoZWNrX3Byb3Bvc2FsX2FjdGl2YXRpb25fcm91dGVANTM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxOTgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxOTgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBjaGVja19wcm9wb3NhbF9hY3RpdmF0aW9uCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9lbGVjdGlvbl9ub2RlX3JvdXRlQDU0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MzU4CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MzU4CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgZ2V0X2VsZWN0aW9uX25vZGUKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfZWxlY3Rpb25fcm91dGVANTU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNzIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNzIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgY2FsbHN1YiBnZXRfZWxlY3Rpb24KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9wcm9wb3NlX2VsZWN0aW9uX3JvdXRlQDU2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDAwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDAwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHVuY292ZXIgMwogICAgdW5jb3ZlciAzCiAgICB1bmNvdmVyIDMKICAgIHVuY292ZXIgMwogICAgY2FsbHN1YiBwcm9wb3NlX2VsZWN0aW9uCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZW5kb3JzZV9jYW5kaWRhdGVzX3JvdXRlQDU3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDQzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNAogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDQzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHVuY292ZXIgNQogICAgdW5jb3ZlciA1CiAgICB1bmNvdmVyIDUKICAgIHVuY292ZXIgNQogICAgdW5jb3ZlciA1CiAgICB1bmNvdmVyIDUKICAgIGNhbGxzdWIgZW5kb3JzZV9jYW5kaWRhdGVzCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9jYW5kaWRhdGVfZW5kb3JzZW1lbnRfcm91dGVANTg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NTIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NTIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgY2FsbHN1YiBnZXRfY2FuZGlkYXRlX2VuZG9yc2VtZW50CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2VuZG9yc2VtZW50X3JvdXRlQDU5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTczCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTczCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgZ2V0X2VuZG9yc2VtZW50CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fdHJhbnNmZXJfcm91dGVANjA6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnQgTm9PcAogICAgPT0KICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgdHJhbnNmZXIKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc2V0X3ZlcnNpb25fcm91dGVANjE6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBzZXRfdmVyc2lvbgogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9hcHByb3ZlX3VwZGF0ZV9yb3V0ZUA2MjoKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50IE5vT3AKICAgID09CiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgYXBwcm92ZV91cGRhdGUKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ3JhbnRfdXBncmFkZXJfcm91dGVANjM6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCBOb09wCiAgICA9PQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGdyYW50X3VwZ3JhZGVyCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3N3aXRjaF9jYXNlX2RlZmF1bHRANjQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICBlcnIgLy8gcmVqZWN0IHRyYW5zYWN0aW9uCgptYWluX2JhcmVfcm91dGluZ0A2NjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludCAwCiAgICBpbnQgNAogICAgdW5jb3ZlciAyCiAgICBtYXRjaCBtYWluX2NyZWF0ZUA2NyBtYWluX29uX3VwZGF0ZUA2OAogICAgYiBtYWluX3JlamVjdF9iYXJlX29uX2NvbXBsZXRpb25ANjkKCm1haW5fY3JlYXRlQDY3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NQogICAgLy8gY2xhc3MgUG93R292ZXJuYW5jZShHb3Zlcm5hbmNlLCBFbGVjdGlvbiwgT3duYWJsZSwgVXBncmFkZWFibGUpOgogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgICEKICAgIGFzc2VydCAvLyBpcyBjcmVhdGluZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9vbl91cGRhdGVANjg6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTIKICAgIC8vIEBhcmM0LmJhcmVtZXRob2QoYWxsb3dfYWN0aW9ucz1bIlVwZGF0ZUFwcGxpY2F0aW9uIl0pCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjkyLTkzCiAgICAvLyBAYXJjNC5iYXJlbWV0aG9kKGFsbG93X2FjdGlvbnM9WyJVcGRhdGVBcHBsaWNhdGlvbiJdKQogICAgLy8gZGVmIG9uX3VwZGF0ZShzZWxmKSAtPiBOb25lOgogICAgY2FsbHN1YiBvbl91cGRhdGUKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fcmVqZWN0X2JhcmVfb25fY29tcGxldGlvbkA2OToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDUKICAgIC8vIGNsYXNzIFBvd0dvdmVybmFuY2UoR292ZXJuYW5jZSwgRWxlY3Rpb24sIE93bmFibGUsIFVwZ3JhZGVhYmxlKToKICAgIGVyciAvLyByZWplY3QgdHJhbnNhY3Rpb24KCgovLyBfX21haW5fXy5Qb3dHb3Zlcm5hbmNlLmJvb3RzdHJhcCgpIC0+IHZvaWQ6CmJvb3RzdHJhcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1ODQtMTU4NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLlBvd0dvdmVybmFuY2UudmV0b19wcm9wb3NhbChwcm9wb3NhbF9ub2RlOiBieXRlcykgLT4gdm9pZDoKdmV0b19wcm9wb3NhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1ODgtMTU4OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdmV0b19wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTkxCiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1OTIKICAgIC8vIHNlbGYuX3ZldG9fcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfdmV0b19wcm9wb3NhbAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uUG93R292ZXJuYW5jZS5fb25seV9vd25lcigpIC0+IHZvaWQ6Cl9vbmx5X293bmVyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU4MS0xNTgyCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vbmx5X293bmVyKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1ODMKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYub3duZXIsICJPbmx5IG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24iCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjAKICAgIC8vIHNlbGYub3duZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgIm93bmVyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU4MwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIk9ubHkgb3duZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbiIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5vd25lciBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl92ZXRvX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiB2b2lkOgpfdmV0b19wcm9wb3NhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExNjgtMTE2OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdmV0b19wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE3MAogICAgLy8gX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAtMTE3MQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzID0gQm94TWFwKEJ5dGVzMzIsIFByb3Bvc2FsLCBrZXlfcHJlZml4PWIicF8iKQogICAgLy8gICAgIHNlbGYudm90ZXMgPSBCb3hNYXAoQnl0ZXM2NCwgVUludDY0LCBrZXlfcHJlZml4PWIiIikKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiQ2Fubm90IGxvY2sgcG93ZXIgaW4gdGhlIHBhc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBtdXN0IGJlIGF0IGxlYXN0IDEgd2VlayIKICAgIC8vIAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbiA9IHBvd2VyX3VubG9ja190aW1lc3RhbXAgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb24KICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldID0gUG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICAvLyAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIG5ld192b3RlX3Bvd2VyID0gdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKyBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgdm90ZXIudm90ZXJfYWRkcmVzcyA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBpcyBub3QgeWV0IHVubG9ja2VkIgogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfb3duZXIgPSBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lci5uYXRpdmUKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3RlciA9IHNlbGYuX2dldF92b3Rlcihwb3dlcl9vd25lcikKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gcG93ZXJfbG9jay5wb3dlcl9ncmFudGVkLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZCA8PSBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICksICJOb3QgZW5vdWdoIHZvdGluZyBwb3dlciIKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAtIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi52b3RlcnNbcG93ZXJfb3duZXJdID0gcG93ZXJfb3duZXJfdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfYW1vdW50LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgZGVsIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUuYnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1Nihwcm9wb3NhbF90aXRsZSArIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLnByb3Bvc2Fscy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGUoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgYWNjb3VudC5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBhY2NvdW50OiBBY2NvdW50LAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBhY2NvdW50LmJ5dGVzKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fcHJvcG9zZSgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlID0gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBwcm9wb3NhbF9ub2RlIG5vdCBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXggPSBzZWxmLnByb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2luZGV4ID0gYXJjNC5VSW50NjQocHJvcG9zYWxfaW5kZXgpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zZXIgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90aXRsZSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF90aXRsZSkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9kZXNjcmlwdGlvbiA9IEJ5dGVzNTEyLmZyb21fYnl0ZXMocHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2NhdGVnb3J5X2lkID0gYXJjNC5VSW50NjQocHJvcG9zYWxfY2F0ZWdvcnlfaWQpCiAgICAvLyAgICAgcHJvcG9zYWwuY3JlYXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZCA9IGFyYzQuVUludDY0KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2FsX2NvdW50ID0gcHJvcG9zYWxfaW5kZXgKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFByb3Bvc2FsQ3JlYXRlZCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9cHJvcG9zYWxfbm9kZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FjdGl2YXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3Qgc3RhcnRlZCB5ZXQiCiAgICAvLyAKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSA+IDAsICJZb3UgaGF2ZSBubyB2b3RpbmcgcG93ZXIiCiAgICAvLyAKICAgIC8vICAgICBuZXdfYWN0aXZhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld19hY3RpdmF0aW9uX3Bvd2VyKQogICAgLy8gCiAgICAvLyAgICAgaWYgbmV3X2FjdGl2YXRpb25fcG93ZXIgPj0gc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgICAgIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0FDVElWRSkKICAgIC8vIAogICAgLy8gICAgICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gICAgIHN1cHBvcnQ6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2Nhc3Rfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBzdXBwb3J0Lm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Nhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIHN1cHBvcnQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIHZvdGVfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBUeG4uc2VuZGVyLmJ5dGVzKQogICAgLy8gICAgIGFzc2VydCB2b3RlX2tleSBub3QgaW4gc2VsZi52b3RlcywgIllvdSBoYXZlIGFscmVhZHkgdm90ZWQiCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCBzdXBwb3J0IDwgMiwgIkludmFsaWQgdm90ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0ucHJvcG9zYWxfc3RhdHVzID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IGFjdGl2ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0udm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgICAgID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBoYXMgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnZvdGVzW3ZvdGVfa2V5XSA9IHN1cHBvcnQKICAgIC8vIAogICAgLy8gICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci52b3RlX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKF9wcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSArIDEKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgKyBzdXBwb3J0CiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgIGlmIHN1cHBvcnQgPT0gMToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlX2NvdW50ID0gc2VsZi52b3RlX2NvdW50ICsgMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcmVqZWN0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSBwZW5kaW5nIHByb3Bvc2FsIHNob3VsZCBiZSByZWplY3RlZCBkdWUgdG8gaW5zdWZmaWNpZW50IGFjdGl2YXRpb24gdm90ZXMiIiIKICAgIC8vICAgICBzZWxmLl9yZWplY3RfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlICE9IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HOgogICAgLy8gICAgICAgICByZXR1cm4KICAgIC8vIAogICAgLy8gICAgIGlmIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wOgogICAgLy8gCiAgICAvLyAgICAgICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlIDwgc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICAgICAgICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fY2FuY2VsX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYW5jZWxfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHBlbmRpbmciCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0NBTkNFTEVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJGaW5hbGl6ZSBhIHByb3Bvc2FsIGFmdGVyIHZvdGluZyBwZXJpb2QgZW5kcyIiIgogICAgLy8gCiAgICAvLyAgICAgcGFzcwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcC5uYXRpdmUgPCBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3QgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50IC0gMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPSBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciArIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPiAwOgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICAgICAgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMgPSBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUKICAgIC8vICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyA9ICgKICAgIC8vICAgICAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKyBlc3RpbWF0ZWRfdW5pcXVlX3ZvdGVycwogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBtZWV0c19xdW9ydW0gPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICA+PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9tZXQgPSBhcmM0LkJvb2wobWVldHNfcXVvcnVtKQogICAgLy8gICAgIGlmICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgIDwgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19OT1RfTUVUKQogICAgLy8gICAgIGVsaWYgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgPT0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19NRVQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfRVhDRUVERUQpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPT0gMDoKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfRVhQSVJFRCkKICAgIC8vICAgICBlbGlmIG5vdCBtZWV0c19xdW9ydW06CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgLy8gICAgIGVsaWYgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZSA+ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlIC0gcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZQogICAgLy8gICAgICk6CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRCkKICAgIC8vICAgICBlbHNlOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHF1ZXVlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiUXVldWUgYSBzdWNjZWVkZWQgcHJvcG9zYWwgZm9yIGV4ZWN1dGlvbiIiIgogICAgLy8gICAgIHNlbGYuX3F1ZXVlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9xdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHN1Y2NlZWRlZCIKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfUVVFVUVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZXhlY3V0ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIkV4ZWN1dGUgYSBxdWV1ZWQgcHJvcG9zYWwiIiIKICAgIC8vICAgICBzZWxmLl9leGVjdXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9leGVjdXRlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1FVRVVFRAogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcXVldWVkIgogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19FWEVDVVRFRCkKICAgIC8vICAgICBwcm9wb3NhbC5leGVjdXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHZldG9fcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJWZXRvIGEgcXVldWVkIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgc2VsZi5fdmV0b19wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdmV0b19wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgZGlnIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTcxCiAgICAvLyBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIGFzc2VydCAvLyBQcm9wb3NhbCBkb2VzIG5vdCBleGlzdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE3MgogICAgLy8gcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3Byb3Bvc2FsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTc1CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19RVUVVRUQKICAgIGR1cAogICAgaW50IDgKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCA1CiAgICA9PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE3NC0xMTc2CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1FVRVVFRAogICAgLy8gKSwgIlByb3Bvc2FsIGlzIG5vdCBxdWV1ZWQiCiAgICBhc3NlcnQgLy8gUHJvcG9zYWwgaXMgbm90IHF1ZXVlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE4MQogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0NBTkNFTEVEKQogICAgaW50IDgKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTgyCiAgICAvLyBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIHVuY292ZXIgMgogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlOiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfcHJvcG9zYWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzMtODM0CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFByb3Bvc2FsOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NDAKICAgIC8vIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NDEKICAgIC8vIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgaW50IDY0CiAgICBiemVybwogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODQyCiAgICAvLyBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgaW50IDUxMgogICAgYnplcm8KICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg1MwogICAgLy8gcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBjb3ZlciAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NTkKICAgIC8vIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIGJ5dGUgMHgwMAogICAgaW50IDAKICAgIGludCAwCiAgICBzZXRiaXQKICAgIGNvdmVyIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgzNy04NjEKICAgIC8vIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMob3AuYnplcm8oNTEyKSksCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgZXhlY3V0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGJ5dGUgMHgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgzOAogICAgLy8gcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODM3LTg2MQogICAgLy8gZGVmYXVsdD1Qcm9wb3NhbCgKICAgIC8vICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKCksCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3RpbmdfZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZXhlY3V0aW9uX3R4bl9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX21ldD1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzkKICAgIC8vIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzctODYxCiAgICAvLyBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NDQKICAgIC8vIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgzNy04NjEKICAgIC8vIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMob3AuYnplcm8oNTEyKSksCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgZXhlY3V0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODQ1CiAgICAvLyBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzctODYxCiAgICAvLyBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg0NgogICAgLy8gcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgzNy04NjEKICAgIC8vIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMob3AuYnplcm8oNTEyKSksCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgZXhlY3V0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODQ3CiAgICAvLyBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODM3LTg2MQogICAgLy8gZGVmYXVsdD1Qcm9wb3NhbCgKICAgIC8vICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKCksCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3RpbmdfZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZXhlY3V0aW9uX3R4bl9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX21ldD1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NDkKICAgIC8vIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgzNy04NjEKICAgIC8vIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMob3AuYnplcm8oNTEyKSksCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgZXhlY3V0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODUwCiAgICAvLyBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzctODYxCiAgICAvLyBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg1MQogICAgLy8gdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzctODYxCiAgICAvLyBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg1MgogICAgLy8gdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODM3LTg2MQogICAgLy8gZGVmYXVsdD1Qcm9wb3NhbCgKICAgIC8vICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKCksCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3RpbmdfZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZXhlY3V0aW9uX3R4bl9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX21ldD1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODU0CiAgICAvLyBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODM3LTg2MQogICAgLy8gZGVmYXVsdD1Qcm9wb3NhbCgKICAgIC8vICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKCksCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3RpbmdfZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZXhlY3V0aW9uX3R4bl9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX21ldD1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NTUKICAgIC8vIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODM3LTg2MQogICAgLy8gZGVmYXVsdD1Qcm9wb3NhbCgKICAgIC8vICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKCksCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3RpbmdfZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZXhlY3V0aW9uX3R4bl9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX21ldD1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NTYKICAgIC8vIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgzNy04NjEKICAgIC8vIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMob3AuYnplcm8oNTEyKSksCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgZXhlY3V0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODU4CiAgICAvLyBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgzNy04NjEKICAgIC8vIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMob3AuYnplcm8oNTEyKSksCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfdG90YWxfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF95ZXNfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgZXhlY3V0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg2MAogICAgLy8gcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzctODYxCiAgICAvLyBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg0OAogICAgLy8gcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzctODYxCiAgICAvLyBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODM1LTg2MgogICAgLy8gcmV0dXJuIHNlbGYucHJvcG9zYWxzLmdldCgKICAgIC8vICAgICBrZXk9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICApLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIGJveF9nZXQKICAgIGNvdmVyIDEKICAgIHVuY292ZXIgMgogICAgdW5jb3ZlciAxCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uUG93R292ZXJuYW5jZS5leGVjdXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiB2b2lkOgpleGVjdXRlX3Byb3Bvc2FsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU5NC0xNTk1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBleGVjdXRlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1OTcKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU5OAogICAgLy8gc2VsZi5fZXhlY3V0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9leGVjdXRlX3Byb3Bvc2FsCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9leGVjdXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiB2b2lkOgpfZXhlY3V0ZV9wcm9wb3NhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExNDYtMTE0NwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZXhlY3V0ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE0OAogICAgLy8gX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAtMTE0OQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzID0gQm94TWFwKEJ5dGVzMzIsIFByb3Bvc2FsLCBrZXlfcHJlZml4PWIicF8iKQogICAgLy8gICAgIHNlbGYudm90ZXMgPSBCb3hNYXAoQnl0ZXM2NCwgVUludDY0LCBrZXlfcHJlZml4PWIiIikKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiQ2Fubm90IGxvY2sgcG93ZXIgaW4gdGhlIHBhc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBtdXN0IGJlIGF0IGxlYXN0IDEgd2VlayIKICAgIC8vIAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbiA9IHBvd2VyX3VubG9ja190aW1lc3RhbXAgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb24KICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldID0gUG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICAvLyAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIG5ld192b3RlX3Bvd2VyID0gdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKyBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgdm90ZXIudm90ZXJfYWRkcmVzcyA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBpcyBub3QgeWV0IHVubG9ja2VkIgogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfb3duZXIgPSBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lci5uYXRpdmUKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3RlciA9IHNlbGYuX2dldF92b3Rlcihwb3dlcl9vd25lcikKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gcG93ZXJfbG9jay5wb3dlcl9ncmFudGVkLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZCA8PSBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICksICJOb3QgZW5vdWdoIHZvdGluZyBwb3dlciIKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAtIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi52b3RlcnNbcG93ZXJfb3duZXJdID0gcG93ZXJfb3duZXJfdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfYW1vdW50LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgZGVsIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUuYnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1Nihwcm9wb3NhbF90aXRsZSArIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLnByb3Bvc2Fscy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGUoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgYWNjb3VudC5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBhY2NvdW50OiBBY2NvdW50LAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBhY2NvdW50LmJ5dGVzKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fcHJvcG9zZSgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlID0gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBwcm9wb3NhbF9ub2RlIG5vdCBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXggPSBzZWxmLnByb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2luZGV4ID0gYXJjNC5VSW50NjQocHJvcG9zYWxfaW5kZXgpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zZXIgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90aXRsZSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF90aXRsZSkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9kZXNjcmlwdGlvbiA9IEJ5dGVzNTEyLmZyb21fYnl0ZXMocHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2NhdGVnb3J5X2lkID0gYXJjNC5VSW50NjQocHJvcG9zYWxfY2F0ZWdvcnlfaWQpCiAgICAvLyAgICAgcHJvcG9zYWwuY3JlYXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZCA9IGFyYzQuVUludDY0KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2FsX2NvdW50ID0gcHJvcG9zYWxfaW5kZXgKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFByb3Bvc2FsQ3JlYXRlZCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9cHJvcG9zYWxfbm9kZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FjdGl2YXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3Qgc3RhcnRlZCB5ZXQiCiAgICAvLyAKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSA+IDAsICJZb3UgaGF2ZSBubyB2b3RpbmcgcG93ZXIiCiAgICAvLyAKICAgIC8vICAgICBuZXdfYWN0aXZhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld19hY3RpdmF0aW9uX3Bvd2VyKQogICAgLy8gCiAgICAvLyAgICAgaWYgbmV3X2FjdGl2YXRpb25fcG93ZXIgPj0gc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgICAgIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0FDVElWRSkKICAgIC8vIAogICAgLy8gICAgICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gICAgIHN1cHBvcnQ6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2Nhc3Rfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBzdXBwb3J0Lm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Nhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIHN1cHBvcnQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIHZvdGVfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBUeG4uc2VuZGVyLmJ5dGVzKQogICAgLy8gICAgIGFzc2VydCB2b3RlX2tleSBub3QgaW4gc2VsZi52b3RlcywgIllvdSBoYXZlIGFscmVhZHkgdm90ZWQiCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCBzdXBwb3J0IDwgMiwgIkludmFsaWQgdm90ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0ucHJvcG9zYWxfc3RhdHVzID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IGFjdGl2ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0udm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgICAgID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBoYXMgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnZvdGVzW3ZvdGVfa2V5XSA9IHN1cHBvcnQKICAgIC8vIAogICAgLy8gICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci52b3RlX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKF9wcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSArIDEKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgKyBzdXBwb3J0CiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgIGlmIHN1cHBvcnQgPT0gMToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlX2NvdW50ID0gc2VsZi52b3RlX2NvdW50ICsgMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcmVqZWN0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSBwZW5kaW5nIHByb3Bvc2FsIHNob3VsZCBiZSByZWplY3RlZCBkdWUgdG8gaW5zdWZmaWNpZW50IGFjdGl2YXRpb24gdm90ZXMiIiIKICAgIC8vICAgICBzZWxmLl9yZWplY3RfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlICE9IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HOgogICAgLy8gICAgICAgICByZXR1cm4KICAgIC8vIAogICAgLy8gICAgIGlmIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wOgogICAgLy8gCiAgICAvLyAgICAgICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlIDwgc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICAgICAgICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fY2FuY2VsX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYW5jZWxfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHBlbmRpbmciCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0NBTkNFTEVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJGaW5hbGl6ZSBhIHByb3Bvc2FsIGFmdGVyIHZvdGluZyBwZXJpb2QgZW5kcyIiIgogICAgLy8gCiAgICAvLyAgICAgcGFzcwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcC5uYXRpdmUgPCBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3QgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50IC0gMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPSBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciArIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPiAwOgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICAgICAgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMgPSBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUKICAgIC8vICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyA9ICgKICAgIC8vICAgICAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKyBlc3RpbWF0ZWRfdW5pcXVlX3ZvdGVycwogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBtZWV0c19xdW9ydW0gPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICA+PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9tZXQgPSBhcmM0LkJvb2wobWVldHNfcXVvcnVtKQogICAgLy8gICAgIGlmICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgIDwgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19OT1RfTUVUKQogICAgLy8gICAgIGVsaWYgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgPT0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19NRVQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfRVhDRUVERUQpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPT0gMDoKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfRVhQSVJFRCkKICAgIC8vICAgICBlbGlmIG5vdCBtZWV0c19xdW9ydW06CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgLy8gICAgIGVsaWYgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZSA+ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlIC0gcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZQogICAgLy8gICAgICk6CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRCkKICAgIC8vICAgICBlbHNlOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHF1ZXVlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiUXVldWUgYSBzdWNjZWVkZWQgcHJvcG9zYWwgZm9yIGV4ZWN1dGlvbiIiIgogICAgLy8gICAgIHNlbGYuX3F1ZXVlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9xdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHN1Y2NlZWRlZCIKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfUVVFVUVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZXhlY3V0ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIkV4ZWN1dGUgYSBxdWV1ZWQgcHJvcG9zYWwiIiIKICAgIC8vICAgICBzZWxmLl9leGVjdXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9leGVjdXRlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICBkaWcgMQogICAgY29uY2F0CiAgICBib3hfbGVuCiAgICBjb3ZlciAxCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExNDkKICAgIC8vIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgYXNzZXJ0IC8vIFByb3Bvc2FsIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTUwCiAgICAvLyBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfcHJvcG9zYWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExNTMKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1FVRVVFRAogICAgZHVwCiAgICBpbnQgOAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgaW50IDUKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTUyLTExNTQKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUVVFVUVECiAgICAvLyApLCAiUHJvcG9zYWwgaXMgbm90IHF1ZXVlZCIKICAgIGFzc2VydCAvLyBQcm9wb3NhbCBpcyBub3QgcXVldWVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTYxCiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfRVhFQ1VURUQpCiAgICBpbnQgOAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDcKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTYyCiAgICAvLyBwcm9wb3NhbC5leGVjdXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIGl0b2IKICAgIHVuY292ZXIgMQogICAgaW50IDgwMAogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTYzCiAgICAvLyBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIHVuY292ZXIgMgogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLlBvd0dvdmVybmFuY2UucXVldWVfcHJvcG9zYWwocHJvcG9zYWxfbm9kZTogYnl0ZXMpIC0+IHZvaWQ6CnF1ZXVlX3Byb3Bvc2FsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTYwMC0xNjAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBxdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNjAzCiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MDQKICAgIC8vIHNlbGYuX3F1ZXVlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX3F1ZXVlX3Byb3Bvc2FsCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9xdWV1ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlOiBieXRlcykgLT4gdm9pZDoKX3F1ZXVlX3Byb3Bvc2FsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTEyOC0xMTI5CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9xdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTEzMAogICAgLy8gX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAtMTEzMQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzID0gQm94TWFwKEJ5dGVzMzIsIFByb3Bvc2FsLCBrZXlfcHJlZml4PWIicF8iKQogICAgLy8gICAgIHNlbGYudm90ZXMgPSBCb3hNYXAoQnl0ZXM2NCwgVUludDY0LCBrZXlfcHJlZml4PWIiIikKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiQ2Fubm90IGxvY2sgcG93ZXIgaW4gdGhlIHBhc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBtdXN0IGJlIGF0IGxlYXN0IDEgd2VlayIKICAgIC8vIAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbiA9IHBvd2VyX3VubG9ja190aW1lc3RhbXAgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb24KICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldID0gUG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICAvLyAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIG5ld192b3RlX3Bvd2VyID0gdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKyBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgdm90ZXIudm90ZXJfYWRkcmVzcyA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBpcyBub3QgeWV0IHVubG9ja2VkIgogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfb3duZXIgPSBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lci5uYXRpdmUKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3RlciA9IHNlbGYuX2dldF92b3Rlcihwb3dlcl9vd25lcikKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gcG93ZXJfbG9jay5wb3dlcl9ncmFudGVkLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZCA8PSBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICksICJOb3QgZW5vdWdoIHZvdGluZyBwb3dlciIKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAtIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi52b3RlcnNbcG93ZXJfb3duZXJdID0gcG93ZXJfb3duZXJfdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfYW1vdW50LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgZGVsIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUuYnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1Nihwcm9wb3NhbF90aXRsZSArIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLnByb3Bvc2Fscy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGUoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgYWNjb3VudC5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBhY2NvdW50OiBBY2NvdW50LAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBhY2NvdW50LmJ5dGVzKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fcHJvcG9zZSgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlID0gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBwcm9wb3NhbF9ub2RlIG5vdCBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXggPSBzZWxmLnByb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2luZGV4ID0gYXJjNC5VSW50NjQocHJvcG9zYWxfaW5kZXgpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zZXIgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90aXRsZSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF90aXRsZSkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9kZXNjcmlwdGlvbiA9IEJ5dGVzNTEyLmZyb21fYnl0ZXMocHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2NhdGVnb3J5X2lkID0gYXJjNC5VSW50NjQocHJvcG9zYWxfY2F0ZWdvcnlfaWQpCiAgICAvLyAgICAgcHJvcG9zYWwuY3JlYXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZCA9IGFyYzQuVUludDY0KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2FsX2NvdW50ID0gcHJvcG9zYWxfaW5kZXgKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFByb3Bvc2FsQ3JlYXRlZCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9cHJvcG9zYWxfbm9kZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FjdGl2YXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3Qgc3RhcnRlZCB5ZXQiCiAgICAvLyAKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSA+IDAsICJZb3UgaGF2ZSBubyB2b3RpbmcgcG93ZXIiCiAgICAvLyAKICAgIC8vICAgICBuZXdfYWN0aXZhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld19hY3RpdmF0aW9uX3Bvd2VyKQogICAgLy8gCiAgICAvLyAgICAgaWYgbmV3X2FjdGl2YXRpb25fcG93ZXIgPj0gc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgICAgIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0FDVElWRSkKICAgIC8vIAogICAgLy8gICAgICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gICAgIHN1cHBvcnQ6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2Nhc3Rfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBzdXBwb3J0Lm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Nhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIHN1cHBvcnQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIHZvdGVfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBUeG4uc2VuZGVyLmJ5dGVzKQogICAgLy8gICAgIGFzc2VydCB2b3RlX2tleSBub3QgaW4gc2VsZi52b3RlcywgIllvdSBoYXZlIGFscmVhZHkgdm90ZWQiCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCBzdXBwb3J0IDwgMiwgIkludmFsaWQgdm90ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0ucHJvcG9zYWxfc3RhdHVzID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IGFjdGl2ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0udm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgICAgID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBoYXMgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnZvdGVzW3ZvdGVfa2V5XSA9IHN1cHBvcnQKICAgIC8vIAogICAgLy8gICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci52b3RlX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKF9wcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSArIDEKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgKyBzdXBwb3J0CiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgIGlmIHN1cHBvcnQgPT0gMToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlX2NvdW50ID0gc2VsZi52b3RlX2NvdW50ICsgMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcmVqZWN0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSBwZW5kaW5nIHByb3Bvc2FsIHNob3VsZCBiZSByZWplY3RlZCBkdWUgdG8gaW5zdWZmaWNpZW50IGFjdGl2YXRpb24gdm90ZXMiIiIKICAgIC8vICAgICBzZWxmLl9yZWplY3RfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlICE9IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HOgogICAgLy8gICAgICAgICByZXR1cm4KICAgIC8vIAogICAgLy8gICAgIGlmIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wOgogICAgLy8gCiAgICAvLyAgICAgICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlIDwgc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICAgICAgICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fY2FuY2VsX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYW5jZWxfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHBlbmRpbmciCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0NBTkNFTEVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJGaW5hbGl6ZSBhIHByb3Bvc2FsIGFmdGVyIHZvdGluZyBwZXJpb2QgZW5kcyIiIgogICAgLy8gCiAgICAvLyAgICAgcGFzcwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcC5uYXRpdmUgPCBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3QgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50IC0gMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPSBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciArIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPiAwOgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICAgICAgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMgPSBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUKICAgIC8vICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyA9ICgKICAgIC8vICAgICAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKyBlc3RpbWF0ZWRfdW5pcXVlX3ZvdGVycwogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBtZWV0c19xdW9ydW0gPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICA+PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9tZXQgPSBhcmM0LkJvb2wobWVldHNfcXVvcnVtKQogICAgLy8gICAgIGlmICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgIDwgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19OT1RfTUVUKQogICAgLy8gICAgIGVsaWYgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgPT0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19NRVQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfRVhDRUVERUQpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPT0gMDoKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfRVhQSVJFRCkKICAgIC8vICAgICBlbGlmIG5vdCBtZWV0c19xdW9ydW06CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgLy8gICAgIGVsaWYgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZSA+ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlIC0gcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZQogICAgLy8gICAgICk6CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRCkKICAgIC8vICAgICBlbHNlOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHF1ZXVlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiUXVldWUgYSBzdWNjZWVkZWQgcHJvcG9zYWwgZm9yIGV4ZWN1dGlvbiIiIgogICAgLy8gICAgIHNlbGYuX3F1ZXVlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9xdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgZGlnIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTMxCiAgICAvLyBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIGFzc2VydCAvLyBQcm9wb3NhbCBkb2VzIG5vdCBleGlzdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTEzMgogICAgLy8gcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3Byb3Bvc2FsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTM1CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQKICAgIGR1cAogICAgaW50IDgKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCA0CiAgICA9PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTEzNC0xMTM2CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRAogICAgLy8gKSwgIlByb3Bvc2FsIGlzIG5vdCBzdWNjZWVkZWQiCiAgICBhc3NlcnQgLy8gUHJvcG9zYWwgaXMgbm90IHN1Y2NlZWRlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE0MAogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1FVRVVFRCkKICAgIGludCA4CiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwNQogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE0MQogICAgLy8gc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICB1bmNvdmVyIDIKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Qb3dHb3Zlcm5hbmNlLmZpbmFsaXplX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiB2b2lkOgpmaW5hbGl6ZV9wcm9wb3NhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MDYtMTYwNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTYwOQogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNjEwCiAgICAvLyBzZWxmLl9maW5hbGl6ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9maW5hbGl6ZV9wcm9wb3NhbAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5fZmluYWxpemVfcHJvcG9zYWwocHJvcG9zYWxfbm9kZTogYnl0ZXMpIC0+IHZvaWQ6Cl9maW5hbGl6ZV9wcm9wb3NhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNTktMTA2MAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIGJ5dGUgIiIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNjEKICAgIC8vIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGR1cAogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAtMTA2MgogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzID0gQm94TWFwKEJ5dGVzMzIsIFByb3Bvc2FsLCBrZXlfcHJlZml4PWIicF8iKQogICAgLy8gICAgIHNlbGYudm90ZXMgPSBCb3hNYXAoQnl0ZXM2NCwgVUludDY0LCBrZXlfcHJlZml4PWIiIikKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiQ2Fubm90IGxvY2sgcG93ZXIgaW4gdGhlIHBhc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBtdXN0IGJlIGF0IGxlYXN0IDEgd2VlayIKICAgIC8vIAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbiA9IHBvd2VyX3VubG9ja190aW1lc3RhbXAgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb24KICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldID0gUG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICAvLyAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIG5ld192b3RlX3Bvd2VyID0gdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKyBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgdm90ZXIudm90ZXJfYWRkcmVzcyA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBpcyBub3QgeWV0IHVubG9ja2VkIgogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfb3duZXIgPSBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lci5uYXRpdmUKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3RlciA9IHNlbGYuX2dldF92b3Rlcihwb3dlcl9vd25lcikKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gcG93ZXJfbG9jay5wb3dlcl9ncmFudGVkLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZCA8PSBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICksICJOb3QgZW5vdWdoIHZvdGluZyBwb3dlciIKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAtIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi52b3RlcnNbcG93ZXJfb3duZXJdID0gcG93ZXJfb3duZXJfdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfYW1vdW50LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgZGVsIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUuYnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1Nihwcm9wb3NhbF90aXRsZSArIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLnByb3Bvc2Fscy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGUoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgYWNjb3VudC5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBhY2NvdW50OiBBY2NvdW50LAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBhY2NvdW50LmJ5dGVzKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fcHJvcG9zZSgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlID0gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBwcm9wb3NhbF9ub2RlIG5vdCBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXggPSBzZWxmLnByb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2luZGV4ID0gYXJjNC5VSW50NjQocHJvcG9zYWxfaW5kZXgpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zZXIgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90aXRsZSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF90aXRsZSkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9kZXNjcmlwdGlvbiA9IEJ5dGVzNTEyLmZyb21fYnl0ZXMocHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2NhdGVnb3J5X2lkID0gYXJjNC5VSW50NjQocHJvcG9zYWxfY2F0ZWdvcnlfaWQpCiAgICAvLyAgICAgcHJvcG9zYWwuY3JlYXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZCA9IGFyYzQuVUludDY0KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2FsX2NvdW50ID0gcHJvcG9zYWxfaW5kZXgKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFByb3Bvc2FsQ3JlYXRlZCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9cHJvcG9zYWxfbm9kZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FjdGl2YXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3Qgc3RhcnRlZCB5ZXQiCiAgICAvLyAKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSA+IDAsICJZb3UgaGF2ZSBubyB2b3RpbmcgcG93ZXIiCiAgICAvLyAKICAgIC8vICAgICBuZXdfYWN0aXZhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld19hY3RpdmF0aW9uX3Bvd2VyKQogICAgLy8gCiAgICAvLyAgICAgaWYgbmV3X2FjdGl2YXRpb25fcG93ZXIgPj0gc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgICAgIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0FDVElWRSkKICAgIC8vIAogICAgLy8gICAgICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gICAgIHN1cHBvcnQ6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2Nhc3Rfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBzdXBwb3J0Lm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Nhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIHN1cHBvcnQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIHZvdGVfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBUeG4uc2VuZGVyLmJ5dGVzKQogICAgLy8gICAgIGFzc2VydCB2b3RlX2tleSBub3QgaW4gc2VsZi52b3RlcywgIllvdSBoYXZlIGFscmVhZHkgdm90ZWQiCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCBzdXBwb3J0IDwgMiwgIkludmFsaWQgdm90ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0ucHJvcG9zYWxfc3RhdHVzID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IGFjdGl2ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0udm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgICAgID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBoYXMgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnZvdGVzW3ZvdGVfa2V5XSA9IHN1cHBvcnQKICAgIC8vIAogICAgLy8gICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci52b3RlX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKF9wcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSArIDEKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgKyBzdXBwb3J0CiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgIGlmIHN1cHBvcnQgPT0gMToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlX2NvdW50ID0gc2VsZi52b3RlX2NvdW50ICsgMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcmVqZWN0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSBwZW5kaW5nIHByb3Bvc2FsIHNob3VsZCBiZSByZWplY3RlZCBkdWUgdG8gaW5zdWZmaWNpZW50IGFjdGl2YXRpb24gdm90ZXMiIiIKICAgIC8vICAgICBzZWxmLl9yZWplY3RfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlICE9IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HOgogICAgLy8gICAgICAgICByZXR1cm4KICAgIC8vIAogICAgLy8gICAgIGlmIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wOgogICAgLy8gCiAgICAvLyAgICAgICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlIDwgc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICAgICAgICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fY2FuY2VsX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYW5jZWxfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHBlbmRpbmciCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0NBTkNFTEVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJGaW5hbGl6ZSBhIHByb3Bvc2FsIGFmdGVyIHZvdGluZyBwZXJpb2QgZW5kcyIiIgogICAgLy8gCiAgICAvLyAgICAgcGFzcwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBib3hfbGVuCiAgICBjb3ZlciAxCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNjIKICAgIC8vIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgYXNzZXJ0IC8vIFByb3Bvc2FsIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDYzCiAgICAvLyBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfcHJvcG9zYWwKICAgIGR1cAogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA2NgogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICBkdXAKICAgIGludCA4CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMQogICAgPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNjUtMTA2NwogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIC8vICksICJQcm9wb3NhbCBpcyBub3QgYWN0aXZlIgogICAgYXNzZXJ0IC8vIFByb3Bvc2FsIGlzIG5vdCBhY3RpdmUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNzAKICAgIC8vIHByb3Bvc2FsLnZvdGluZ19lbmRfdGltZXN0YW1wLm5hdGl2ZSA8IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICBkdXAKICAgIGludCA3NjAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIDwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNjktMTA3MQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcC5uYXRpdmUgPCBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gKSwgIlZvdGluZyBwZXJpb2QgaGFzIG5vdCBlbmRlZCIKICAgIGFzc2VydCAvLyBWb3RpbmcgcGVyaW9kIGhhcyBub3QgZW5kZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNzMKICAgIC8vIHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ID0gc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgLSAxCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTk3CiAgICAvLyBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJhY3RpdmVfcHJvcG9zYWxfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDczCiAgICAvLyBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50IC0gMQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCBleGlzdHMKICAgIGludCAxCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTcKICAgIC8vIHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgImFjdGl2ZV9wcm9wb3NhbF9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNzMKICAgIC8vIHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ID0gc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgLSAxCiAgICB1bmNvdmVyIDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDc1CiAgICAvLyBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCA9IHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYwMAogICAgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPSAoCiAgICBieXRlICJmaW5hbGl6ZWRfcHJvcG9zYWxfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDc1CiAgICAvLyBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCA9IHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCBleGlzdHMKICAgIGludCAxCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDAKICAgIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID0gKAogICAgYnl0ZSAiZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA3NQogICAgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPSBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCArIDEKICAgIHVuY292ZXIgMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNzcKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciArIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYwMwogICAgLy8gc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyID0gKAogICAgYnl0ZSAidG90YWxfcGFydGljaXBhdGlvbl9wb3dlciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNzcKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciArIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgZXhpc3RzCiAgICBkaWcgMQogICAgaW50IDY4MAogICAgaW50IDMyCiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGIrCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDMKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciA9ICgKICAgIGJ5dGUgInRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDc2LTEwNzgKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgKyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICkKICAgIHVuY292ZXIgMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwODIKICAgIC8vIGlmIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSA+IDA6CiAgICBpbnQgNjY0CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMAogICAgPgogICAgYnogX2ZpbmFsaXplX3Byb3Bvc2FsX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA4NQogICAgLy8gZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMgPSBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUKICAgIGZyYW1lX2RpZyAyCiAgICBpbnQgNjY0CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDg3CiAgICAvLyBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzICsgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDYKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgPSAoCiAgICBieXRlICJ0b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwODcKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKyBlc3RpbWF0ZWRfdW5pcXVlX3ZvdGVycwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzIGV4aXN0cwogICAgdW5jb3ZlciAxCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDYKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgPSAoCiAgICBieXRlICJ0b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwODYtMTA4OAogICAgLy8gc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyA9ICgKICAgIC8vICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzICsgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMKICAgIC8vICkKICAgIHVuY292ZXIgMQogICAgYXBwX2dsb2JhbF9wdXQKCl9maW5hbGl6ZV9wcm9wb3NhbF9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDkxCiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIGZyYW1lX2RpZyAyCiAgICBkdXAKICAgIGludCA2ODAKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDkyCiAgICAvLyA+PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgZHVwCiAgICBpbnQgODI0CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDkxLTEwOTIKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gPj0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwOTAtMTA5MwogICAgLy8gbWVldHNfcXVvcnVtID0gKAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgID49IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIHVuY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA5MS0xMDkyCiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vID49IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICBiPj0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwOTAtMTA5MwogICAgLy8gbWVldHNfcXVvcnVtID0gKAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgID49IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyApCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA5NQogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX21ldCA9IGFyYzQuQm9vbChtZWV0c19xdW9ydW0pCiAgICBieXRlIDB4MDAKICAgIGludCAwCiAgICB1bmNvdmVyIDIKICAgIHNldGJpdAogICAgaW50IDAKICAgIGdldGJpdAogICAgdW5jb3ZlciAxCiAgICBpbnQgNjY1NgogICAgdW5jb3ZlciAyCiAgICBzZXRiaXQKICAgIGR1cAogICAgZnJhbWVfYnVyeSAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDk3CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIGR1cAogICAgaW50IDY4MAogICAgaW50IDMyCiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwOTgKICAgIC8vIDwgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIGludCA4MjQKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwOTctMTA5OAogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyA8IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICBpdG9iCiAgICBiPAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA5Ni0xMDk5CiAgICAvLyBpZiAoCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgPCBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gKToKICAgIGJ6IF9maW5hbGl6ZV9wcm9wb3NhbF9lbHNlX2JvZHlANAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTEwMAogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfTk9UX01FVCkKICAgIGZyYW1lX2RpZyAyCiAgICBpbnQgODMzCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgcmVwbGFjZTMKICAgIGZyYW1lX2J1cnkgMgogICAgYiBfZmluYWxpemVfcHJvcG9zYWxfYWZ0ZXJfaWZfZWxzZUA4CgpfZmluYWxpemVfcHJvcG9zYWxfZWxzZV9ib2R5QDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTAyCiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIGZyYW1lX2RpZyAyCiAgICBkdXAKICAgIGludCA2ODAKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTAzCiAgICAvLyA9PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgaW50IDgyNAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTEwMi0xMTAzCiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vID09IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICBpdG9iCiAgICBiPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExMDEtMTEwNAogICAgLy8gZWxpZiAoCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgPT0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICk6CiAgICBieiBfZmluYWxpemVfcHJvcG9zYWxfZWxzZV9ib2R5QDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExMDUKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9zdGF0dXMgPSBhcmM0LlVJbnQ2NChRVU9SVU1fU1RBVFVTX01FVCkKICAgIGZyYW1lX2RpZyAyCiAgICBpbnQgODMzCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMQogICAgcmVwbGFjZTMKICAgIGZyYW1lX2J1cnkgMgogICAgYiBfZmluYWxpemVfcHJvcG9zYWxfYWZ0ZXJfaWZfZWxzZUA3CgpfZmluYWxpemVfcHJvcG9zYWxfZWxzZV9ib2R5QDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTA3CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19FWENFRURFRCkKICAgIGZyYW1lX2RpZyAyCiAgICBpbnQgODMzCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMgogICAgcmVwbGFjZTMKICAgIGZyYW1lX2J1cnkgMgoKX2ZpbmFsaXplX3Byb3Bvc2FsX2FmdGVyX2lmX2Vsc2VANzoKCl9maW5hbGl6ZV9wcm9wb3NhbF9hZnRlcl9pZl9lbHNlQDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTA5CiAgICAvLyBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPT0gMDoKICAgIGZyYW1lX2RpZyAyCiAgICBpbnQgNjY0CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMAogICAgPT0KICAgIGJ6IF9maW5hbGl6ZV9wcm9wb3NhbF9lbHNlX2JvZHlAMTAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExMTEKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19FWFBJUkVEKQogICAgZnJhbWVfZGlnIDIKICAgIGludCA4CiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwNgogICAgcmVwbGFjZTMKICAgIGZyYW1lX2J1cnkgMgogICAgYiBfZmluYWxpemVfcHJvcG9zYWxfYWZ0ZXJfaWZfZWxzZUAxNwoKX2ZpbmFsaXplX3Byb3Bvc2FsX2Vsc2VfYm9keUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExMTIKICAgIC8vIGVsaWYgbm90IG1lZXRzX3F1b3J1bToKICAgIGZyYW1lX2RpZyAwCiAgICBibnogX2ZpbmFsaXplX3Byb3Bvc2FsX2Vsc2VfYm9keUAxMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTExNAogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgZnJhbWVfZGlnIDIKICAgIGludCA4CiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMwogICAgcmVwbGFjZTMKICAgIGZyYW1lX2J1cnkgMgogICAgYiBfZmluYWxpemVfcHJvcG9zYWxfYWZ0ZXJfaWZfZWxzZUAxNgoKX2ZpbmFsaXplX3Byb3Bvc2FsX2Vsc2VfYm9keUAxMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExMTUKICAgIC8vIGVsaWYgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZSA+ICgKICAgIGZyYW1lX2RpZyAyCiAgICBkdXAKICAgIGludCA2NzIKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExMTYKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSAtIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUKICAgIGR1cAogICAgaW50IDY2NAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgY292ZXIgMQogICAgaW50IDY3MgogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTExNS0xMTE2CiAgICAvLyBlbGlmIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgPiAoCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlIC0gcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZQogICAgPgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTExNS0xMTE3CiAgICAvLyBlbGlmIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgPiAoCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlIC0gcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZQogICAgLy8gKToKICAgIGJ6IF9maW5hbGl6ZV9wcm9wb3NhbF9lbHNlX2JvZHlAMTQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExMTkKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQpCiAgICBmcmFtZV9kaWcgMgogICAgaW50IDgKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDA0CiAgICByZXBsYWNlMwogICAgZnJhbWVfYnVyeSAyCiAgICBiIF9maW5hbGl6ZV9wcm9wb3NhbF9hZnRlcl9pZl9lbHNlQDE1CgpfZmluYWxpemVfcHJvcG9zYWxfZWxzZV9ib2R5QDE0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTEyMgogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgZnJhbWVfZGlnIDIKICAgIGludCA4CiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMwogICAgcmVwbGFjZTMKICAgIGZyYW1lX2J1cnkgMgoKX2ZpbmFsaXplX3Byb3Bvc2FsX2FmdGVyX2lmX2Vsc2VAMTU6CgpfZmluYWxpemVfcHJvcG9zYWxfYWZ0ZXJfaWZfZWxzZUAxNjoKCl9maW5hbGl6ZV9wcm9wb3NhbF9hZnRlcl9pZl9lbHNlQDE3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTEyMwogICAgLy8gc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICBmcmFtZV9kaWcgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTIzCiAgICAvLyBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIGZyYW1lX2RpZyAxCiAgICBjb25jYXQKICAgIHVuY292ZXIgMQogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uUG93R292ZXJuYW5jZS5jYW5jZWxfcHJvcG9zYWwocHJvcG9zYWxfbm9kZTogYnl0ZXMpIC0+IHZvaWQ6CmNhbmNlbF9wcm9wb3NhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MTItMTYxMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MTUKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTYxNgogICAgLy8gc2VsZi5fY2FuY2VsX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2NhbmNlbF9wcm9wb3NhbAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5fY2FuY2VsX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiB2b2lkOgpfY2FuY2VsX3Byb3Bvc2FsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA0NC0xMDQ1CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYW5jZWxfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNDYKICAgIC8vIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwLTEwNDcKICAgIC8vICAgICBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIC8vICAgICBzZWxmLnZvdGVzID0gQm94TWFwKEJ5dGVzNjQsIFVJbnQ2NCwga2V5X3ByZWZpeD1iIiIpCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzID0gQm94TWFwKAogICAgLy8gICAgICAgICBVSW50NjQsIFBvd2VyU291cmNlLCBrZXlfcHJlZml4PWIicV8iCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3MgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfc291cmNlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1wb3dlcl9zb3VyY2VfaWQsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgdGhlIGJvbnVzIG11bHRpcGxpZXIgYmFzZWQgb24gbG9ja3VwIGR1cmF0aW9uIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfaW5mbyhzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gdHVwbGVbVUludDY0LCBVSW50NjRdOgogICAgLy8gICAgICIiIkdldCBsb2NrdXAgdGllciBpbmZvcm1hdGlvbjogKHRpZXJfbnVtYmVyLCBib251c19tdWx0aXBsaWVyKSIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg1KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDQpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMyksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgyKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDEpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIkNhbm5vdCBsb2NrIHBvd2VyIGluIHRoZSBwYXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgbXVzdCBiZSBhdCBsZWFzdCAxIHdlZWsiCiAgICAvLyAKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb24gPSBwb3dlcl91bmxvY2tfdGltZXN0YW1wIC0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllciA9IHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcG93ZXJfc291cmNlID0gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQpCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgbm90IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGFscmVhZHkgZXhpc3RzIgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAgICAgICAgICogKHBvd2VyX3NvdXJjZS5wb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSArIGxvY2t1cF9ib251c19tdWx0aXBsaWVyKQogICAgLy8gICAgICkgLy8gQmlnVUludCgxMDAwMCkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XSA9IFBvd2VyTG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYocG93ZXJfZ3JhbnRlZCksCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NChsb2NrdXBfZHVyYXRpb24pLAogICAgLy8gICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChsb2NrdXBfYm9udXNfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBuZXdfdm90ZV9wb3dlciA9IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gICAgIHZvdGVyLnZvdGVyX2FkZHJlc3MgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICB2b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld192b3RlX3Bvd2VyKQogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9sb2Nrcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJMb2NrKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VubG9ja19wb3dlcihwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9jayA9IHNlbGYuX2dldF9wb3dlcl9sb2NrKHBvd2VyX3NvdXJjZV9pZCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgaXMgbm90IHlldCB1bmxvY2tlZCIKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX293bmVyID0gcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIubmF0aXZlCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIocG93ZXJfb3duZXIpCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9IHBvd2VyX2xvY2sucG93ZXJfZ3JhbnRlZC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2dyYW50ZWQgPD0gcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApLCAiTm90IGVub3VnaCB2b3RpbmcgcG93ZXIiCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgLSBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudm90ZXJzW3Bvd2VyX293bmVyXSA9IHBvd2VyX293bmVyX3ZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciAtIHBvd2VyX2dyYW50ZWQKICAgIC8vIAogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIsCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX2Ftb3VudCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGRlbCBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfbm9kZSgKICAgIC8vICAgICBzZWxmLCBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzNTEyCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLmJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5zaGEyNTYocHJvcG9zYWxfdGl0bGUgKyBwcm9wb3NhbF9kZXNjcmlwdGlvbikpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wcm9wb3NhbHMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3RlKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF92b3RlKHByb3Bvc2FsX25vZGUuYnl0ZXMsIGFjY291bnQubmF0aXZlKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyAgICAgYWNjb3VudDogQWNjb3VudCwKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLnZvdGVzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgYWNjb3VudC5ieXRlcyksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9VUludDY0KDIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHByb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3Byb3Bvc2UoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3RpdGxlLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcywKICAgIC8vICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3Byb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkOiBVSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZSA9IHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLCBwcm9wb3NhbF9kZXNjcmlwdGlvbikKICAgIC8vICAgICBhc3NlcnQgcHJvcG9zYWxfbm9kZSBub3QgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBJRCBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4ID0gc2VsZi5wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9pbmRleCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2luZGV4KQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19QRU5ESU5HKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2VyID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdGl0bGUgPSBCeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfdGl0bGUpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfZGVzY3JpcHRpb24gPSBCeXRlczUxMi5mcm9tX2J5dGVzKHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9jYXRlZ29yeV9pZCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2NhdGVnb3J5X2lkKQogICAgLy8gICAgIHByb3Bvc2FsLmNyZWF0ZWRfYXRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9EQVkKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX2VuZF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wICsgU0VDT05EU19QRVJfV0VFSyArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQgPSBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcXVvcnVtX3RocmVzaG9sZCgpKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbF9jb3VudCA9IHByb3Bvc2FsX2luZGV4CiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBQcm9wb3NhbENyZWF0ZWQoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9ub2RlPXByb3Bvc2FsX25vZGUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHByb3Bvc2FsX25vZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFjdGl2YXRlX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hY3RpdmF0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUEVORElORwogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcGVuZGluZyIKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiVm90aW5nIHBlcmlvZCBoYXMgbm90IHN0YXJ0ZWQgeWV0IgogICAgLy8gCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBhc3NlcnQgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPiAwLCAiWW91IGhhdmUgbm8gdm90aW5nIHBvd2VyIgogICAgLy8gCiAgICAvLyAgICAgbmV3X2FjdGl2YXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlciA9IGFyYzQuVUludDI1NihuZXdfYWN0aXZhdGlvbl9wb3dlcikKICAgIC8vIAogICAgLy8gICAgIGlmIG5ld19hY3RpdmF0aW9uX3Bvd2VyID49IHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQ6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgICAgICBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19BQ1RJVkUpCiAgICAvLyAKICAgIC8vICAgICAgICAgc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FzdF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICAgICBzdXBwb3J0OiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9jYXN0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgc3VwcG9ydC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBzdXBwb3J0OiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICB2b3RlX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgVHhuLnNlbmRlci5ieXRlcykKICAgIC8vICAgICBhc3NlcnQgdm90ZV9rZXkgbm90IGluIHNlbGYudm90ZXMsICJZb3UgaGF2ZSBhbHJlYWR5IHZvdGVkIgogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgc3VwcG9ydCA8IDIsICJJbnZhbGlkIHZvdGUiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdLnByb3Bvc2FsX3N0YXR1cyA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdLnZvdGluZ19lbmRfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICAgICA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgaGFzIGVuZGVkIgogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3Rlc1t2b3RlX2tleV0gPSBzdXBwb3J0CiAgICAvLyAKICAgIC8vICAgICB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlICsgMQogICAgLy8gICAgICkKICAgIC8vICAgICB2b3Rlci5sYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgdm90ZXIudm90ZV90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci5sYXN0X3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChfcHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3RlcyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3RlcyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfdm90ZXMubmF0aXZlICsgc3VwcG9ydAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBpZiBzdXBwb3J0ID09IDE6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc19wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc19wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudm90ZV9jb3VudCA9IHNlbGYudm90ZV9jb3VudCArIDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHJlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIkNoZWNrIGlmIGEgcGVuZGluZyBwcm9wb3NhbCBzaG91bGQgYmUgcmVqZWN0ZWQgZHVlIHRvIGluc3VmZmljaWVudCBhY3RpdmF0aW9uIHZvdGVzIiIiCiAgICAvLyAgICAgc2VsZi5fcmVqZWN0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWplY3RfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSAhPSBQUk9QT1NBTF9TVEFUVVNfUEVORElORzoKICAgIC8vICAgICAgICAgcmV0dXJuCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSA8PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcDoKICAgIC8vIAogICAgLy8gICAgICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyLm5hdGl2ZSA8IHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQ6CiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQpCiAgICAvLyAgICAgICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNhbmNlbF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2NhbmNlbF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICBkaWcgMQogICAgY29uY2F0CiAgICBib3hfbGVuCiAgICBjb3ZlciAxCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNDcKICAgIC8vIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgYXNzZXJ0IC8vIFByb3Bvc2FsIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDQ4CiAgICAvLyBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfcHJvcG9zYWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwNTAKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIGR1cAogICAgaW50IDgKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAwCiAgICA9PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA0OS0xMDUxCiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIC8vICksICJQcm9wb3NhbCBpcyBub3QgcGVuZGluZyIKICAgIGFzc2VydCAvLyBQcm9wb3NhbCBpcyBub3QgcGVuZGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA1MgogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0NBTkNFTEVEKQogICAgaW50IDgKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDUzCiAgICAvLyBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIHVuY292ZXIgMgogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLlBvd0dvdmVybmFuY2Uuc2V0X3F1b3J1bV9yZXF1aXJlbWVudChxdW9ydW1fYnBzOiBieXRlcykgLT4gdm9pZDoKc2V0X3F1b3J1bV9yZXF1aXJlbWVudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MTgtMTYxOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmLCBxdW9ydW1fYnBzOiBhcmM0LlVJbnQyNTYpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MjEKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTYyMgogICAgLy8gc2VsZi5fc2V0X3F1b3J1bV9yZXF1aXJlbWVudChxdW9ydW1fYnBzLm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfc2V0X3F1b3J1bV9yZXF1aXJlbWVudAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5fc2V0X3F1b3J1bV9yZXF1aXJlbWVudChxdW9ydW1fYnBzOiBieXRlcykgLT4gdm9pZDoKX3NldF9xdW9ydW1fcmVxdWlyZW1lbnQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzA5LTEzMTAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NldF9xdW9ydW1fcmVxdWlyZW1lbnQoc2VsZiwgcXVvcnVtX2JwczogQmlnVUludCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMxMgogICAgLy8gYXNzZXJ0IHF1b3J1bV9icHMgPD0gMTAwMDAsICJRdW9ydW0gcmVxdWlyZW1lbnQgY2Fubm90IGV4Y2VlZCAxMDAlICgxMDAwMCBicHMpIgogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MjcxMAogICAgYjw9CiAgICBhc3NlcnQgLy8gUXVvcnVtIHJlcXVpcmVtZW50IGNhbm5vdCBleGNlZWQgMTAwJSAoMTAwMDAgYnBzKQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTk0CiAgICAvLyBzZWxmLnF1b3J1bV9yZXF1aXJlbWVudCA9ICgKICAgIGJ5dGUgInF1b3J1bV9yZXF1aXJlbWVudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzMTMKICAgIC8vIHNlbGYucXVvcnVtX3JlcXVpcmVtZW50ID0gcXVvcnVtX2JwcwogICAgZnJhbWVfZGlnIC0xCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uUG93R292ZXJuYW5jZS51cGRhdGVfdG90YWxfdm90aW5nX3Bvd2VyKG5ld190b3RhbF9wb3dlcjogYnl0ZXMpIC0+IHZvaWQ6CnVwZGF0ZV90b3RhbF92b3RpbmdfcG93ZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNjI0LTE2MjUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV90b3RhbF92b3RpbmdfcG93ZXIoc2VsZiwgbmV3X3RvdGFsX3Bvd2VyOiBhcmM0LlVJbnQyNTYpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE2MjcKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTYyOAogICAgLy8gc2VsZi5fdXBkYXRlX3RvdGFsX3ZvdGluZ19wb3dlcihuZXdfdG90YWxfcG93ZXIubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF91cGRhdGVfdG90YWxfdm90aW5nX3Bvd2VyCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl91cGRhdGVfdG90YWxfdm90aW5nX3Bvd2VyKG5ld190b3RhbF9wb3dlcjogYnl0ZXMpIC0+IHZvaWQ6Cl91cGRhdGVfdG90YWxfdm90aW5nX3Bvd2VyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM3Ny0xMzc4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfdG90YWxfdm90aW5nX3Bvd2VyKHNlbGYsIG5ld190b3RhbF9wb3dlcjogQmlnVUludCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTkyCiAgICAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IEJpZ1VJbnQoKQogICAgYnl0ZSAidG90YWxfdm90aW5nX3Bvd2VyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM4MAogICAgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBuZXdfdG90YWxfcG93ZXIKICAgIGZyYW1lX2RpZyAtMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQ6IGJ5dGVzLCBwb3dlcl9tdWx0aXBsaWVyOiBieXRlcykgLT4gdm9pZDoKYWRkX3Bvd2VyX3NvdXJjZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxOS02MjIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjIzCiAgICAvLyBzZWxmLl9hZGRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgZnJhbWVfZGlnIC0yCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGNhbGxzdWIgX2FkZF9wb3dlcl9zb3VyY2UKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkOiB1aW50NjQsIHBvd2VyX211bHRpcGxpZXI6IHVpbnQ2NCkgLT4gdm9pZDoKX2FkZF9wb3dlcl9zb3VyY2U6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MjQtNjI3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEzLTYyOAogICAgLy8gICAgICAgICBVSW50NjQsIFBvd2VyU291cmNlLCBrZXlfcHJlZml4PWIicV8iCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3MgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICBmcmFtZV9kaWcgLTIKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMwogICAgLy8gVUludDY0LCBQb3dlclNvdXJjZSwga2V5X3ByZWZpeD1iInFfIgogICAgYnl0ZSAweDcxNWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMy02MjgKICAgIC8vICAgICAgICAgVUludDY0LCBQb3dlclNvdXJjZSwga2V5X3ByZWZpeD1iInFfIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzID0gQm94TWFwKAogICAgLy8gICAgICAgICBCeXRlczY0LCBQb3dlckxvY2ssIGtleV9wcmVmaXg9YiJsXyIKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hZGRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBub3QgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGFscmVhZHkgZXhpc3RzIgogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGJveF9sZW4KICAgIGNvdmVyIDEKICAgIHBvcAogICAgIQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjI4CiAgICAvLyBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICBhc3NlcnQgLy8gUG93ZXIgc291cmNlIGFscmVhZHkgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MzAKICAgIC8vIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MzEKICAgIC8vIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYyOS02MzIKICAgIC8vIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICkKICAgIGJ5dGUgMHgKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjI5CiAgICAvLyBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTMKICAgIC8vIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIGJ5dGUgMHg3MTVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MjkKICAgIC8vIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjI5LTYzMgogICAgLy8gc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gKQogICAgdW5jb3ZlciAxCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmdldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkOiBieXRlcykgLT4gYnl0ZXM6CmdldF9wb3dlcl9zb3VyY2U6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MzMtNjM0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MzUKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGNhbGxzdWIgX2dldF9wb3dlcl9zb3VyY2UKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkOiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X3Bvd2VyX3NvdXJjZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYzNi02MzcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2NDAtNjQyCiAgICAvLyBkZWZhdWx0PVBvd2VyU291cmNlKAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gKSwKICAgIGJ5dGUgMHgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY0MQogICAgLy8gcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLCBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjQwLTY0MgogICAgLy8gZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY0MQogICAgLy8gcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLCBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjQwLTY0MgogICAgLy8gZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYzOC02NDMKICAgIC8vIHJldHVybiBzZWxmLnBvd2VyX3NvdXJjZXMuZ2V0KAogICAgLy8gICAgIGtleT1wb3dlcl9zb3VyY2VfaWQsCiAgICAvLyAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLCBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApCiAgICAvLyAgICAgKSwKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtMQogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEzCiAgICAvLyBVSW50NjQsIFBvd2VyU291cmNlLCBrZXlfcHJlZml4PWIicV8iCiAgICBieXRlIDB4NzE1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjM4LTY0MwogICAgLy8gcmV0dXJuIHNlbGYucG93ZXJfc291cmNlcy5nZXQoCiAgICAvLyAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICBkZWZhdWx0PVBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICAgICApLAogICAgLy8gKQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGJveF9nZXQKICAgIGNvdmVyIDEKICAgIHVuY292ZXIgMgogICAgdW5jb3ZlciAxCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS51cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZDogYnl0ZXMsIHBvd2VyX211bHRpcGxpZXI6IGJ5dGVzKSAtPiB2b2lkOgp1cGRhdGVfcG93ZXJfc291cmNlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjcwLTY3MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2NzQKICAgIC8vIHNlbGYuX3VwZGF0ZV9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgY2FsbHN1YiBfdXBkYXRlX3Bvd2VyX3NvdXJjZQogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5fdXBkYXRlX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQ6IHVpbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogdWludDY0KSAtPiB2b2lkOgpfdXBkYXRlX3Bvd2VyX3NvdXJjZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY3NS02NzgKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTMtNjc5CiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICBmcmFtZV9kaWcgLTIKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMwogICAgLy8gVUludDY0LCBQb3dlclNvdXJjZSwga2V5X3ByZWZpeD1iInFfIgogICAgYnl0ZSAweDcxNWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMy02NzkKICAgIC8vICAgICAgICAgVUludDY0LCBQb3dlclNvdXJjZSwga2V5X3ByZWZpeD1iInFfIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzID0gQm94TWFwKAogICAgLy8gICAgICAgICBCeXRlczY0LCBQb3dlckxvY2ssIGtleV9wcmVmaXg9YiJsXyIKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hZGRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBub3QgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX3NvdXJjZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9cG93ZXJfc291cmNlX2lkLAogICAgLy8gICAgICAgICBkZWZhdWx0PVBvd2VyU291cmNlKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLCBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHRoZSBib251cyBtdWx0aXBsaWVyIGJhc2VkIG9uIGxvY2t1cCBkdXJhdGlvbiIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xvY2t1cF90aWVyX2luZm8oc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IHR1cGxlW1VJbnQ2NCwgVUludDY0XToKICAgIC8vICAgICAiIiJHZXQgbG9ja3VwIHRpZXIgaW5mb3JtYXRpb246ICh0aWVyX251bWJlciwgYm9udXNfbXVsdGlwbGllcikiIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg0KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDMpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMiksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKSkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgxKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VwZGF0ZV9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBib3hfbGVuCiAgICBjb3ZlciAxCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY3OQogICAgLy8gYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICBhc3NlcnQgLy8gUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2ODEKICAgIC8vIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2ODIKICAgIC8vIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY4MC02ODMKICAgIC8vIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICkKICAgIGJ5dGUgMHgKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjgwCiAgICAvLyBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTMKICAgIC8vIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIGJ5dGUgMHg3MTVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2ODAKICAgIC8vIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjgwLTY4MwogICAgLy8gc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gKQogICAgdW5jb3ZlciAxCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmxvY2tfcG93ZXIocG93ZXJfc291cmNlX2lkOiBieXRlcywgcG93ZXJfc291cmNlX2Ftb3VudDogYnl0ZXMsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGJ5dGVzKSAtPiB2b2lkOgpsb2NrX3Bvd2VyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Njg1LTY5MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMyAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2OTMKICAgIC8vIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY5NQogICAgLy8gcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY5Mi02OTYKICAgIC8vIHNlbGYuX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50Lm5hdGl2ZSwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICkKICAgIHVuY292ZXIgMQogICAgZnJhbWVfZGlnIC0yCiAgICB1bmNvdmVyIDIKICAgIGNhbGxzdWIgX2xvY2tfcG93ZXIKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2xvY2tfcG93ZXIocG93ZXJfc291cmNlX2lkOiB1aW50NjQsIHBvd2VyX3NvdXJjZV9hbW91bnQ6IGJ5dGVzLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiB1aW50NjQpIC0+IHZvaWQ6Cl9sb2NrX3Bvd2VyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Njk3LTcwMwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IEJpZ1VJbnQsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMyAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTMtNzA0CiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIGZyYW1lX2RpZyAtMwogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEzCiAgICAvLyBVSW50NjQsIFBvd2VyU291cmNlLCBrZXlfcHJlZml4PWIicV8iCiAgICBieXRlIDB4NzE1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEzLTcwNAogICAgLy8gICAgICAgICBVSW50NjQsIFBvd2VyU291cmNlLCBrZXlfcHJlZml4PWIicV8iCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3MgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfc291cmNlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1wb3dlcl9zb3VyY2VfaWQsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgdGhlIGJvbnVzIG11bHRpcGxpZXIgYmFzZWQgb24gbG9ja3VwIGR1cmF0aW9uIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfaW5mbyhzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gdHVwbGVbVUludDY0LCBVSW50NjRdOgogICAgLy8gICAgICIiIkdldCBsb2NrdXAgdGllciBpbmZvcm1hdGlvbjogKHRpZXJfbnVtYmVyLCBib251c19tdWx0aXBsaWVyKSIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg1KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDQpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMyksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgyKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDEpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MDQKICAgIC8vIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgYXNzZXJ0IC8vIFBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzA2CiAgICAvLyBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIGZyYW1lX2RpZyAtMQogICAgdW5jb3ZlciAxCiAgICA+CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MDUtNzA3CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gKSwgIkNhbm5vdCBsb2NrIHBvd2VyIGluIHRoZSBwYXN0IgogICAgYXNzZXJ0IC8vIENhbm5vdCBsb2NrIHBvd2VyIGluIHRoZSBwYXN0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MDkKICAgIC8vIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLCiAgICBnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCiAgICBpbnQgNjA0ODAwCiAgICArCiAgICBmcmFtZV9kaWcgLTEKICAgIHVuY292ZXIgMQogICAgPj0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjcwOC03MTAKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICksICJQb3dlciBsb2NrIG11c3QgYmUgYXQgbGVhc3QgMSB3ZWVrIgogICAgYXNzZXJ0IC8vIFBvd2VyIGxvY2sgbXVzdCBiZSBhdCBsZWFzdCAxIHdlZWsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjcxMgogICAgLy8gbG9ja3VwX2R1cmF0aW9uID0gcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCAtIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICBnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCiAgICBmcmFtZV9kaWcgLTEKICAgIHVuY292ZXIgMQogICAgLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzEzLTcxNQogICAgLy8gbG9ja3VwX2JvbnVzX211bHRpcGxpZXIgPSBzZWxmLl9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uCiAgICAvLyApCiAgICBkdXAKICAgIGNhbGxzdWIgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzE2CiAgICAvLyB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgdHhuIFNlbmRlcgogICAgY2FsbHN1YiBfZ2V0X3ZvdGVyCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MTcKICAgIC8vIHBvd2VyX3NvdXJjZSA9IHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkKQogICAgZnJhbWVfZGlnIC0zCiAgICBjYWxsc3ViIF9nZXRfcG93ZXJfc291cmNlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MTkKICAgIC8vIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMwogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzIwCiAgICAvLyArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjcxOS03MjAKICAgIC8vIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjE2CiAgICAvLyBCeXRlczY0LCBQb3dlckxvY2ssIGtleV9wcmVmaXg9YiJsXyIKICAgIGJ5dGUgMHg2YzVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTYtNzIyCiAgICAvLyAgICAgICAgIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfc291cmNlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1wb3dlcl9zb3VyY2VfaWQsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgdGhlIGJvbnVzIG11bHRpcGxpZXIgYmFzZWQgb24gbG9ja3VwIGR1cmF0aW9uIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfaW5mbyhzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gdHVwbGVbVUludDY0LCBVSW50NjRdOgogICAgLy8gICAgICIiIkdldCBsb2NrdXAgdGllciBpbmZvcm1hdGlvbjogKHRpZXJfbnVtYmVyLCBib251c19tdWx0aXBsaWVyKSIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg1KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDQpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMyksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgyKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDEpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIkNhbm5vdCBsb2NrIHBvd2VyIGluIHRoZSBwYXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgbXVzdCBiZSBhdCBsZWFzdCAxIHdlZWsiCiAgICAvLyAKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb24gPSBwb3dlcl91bmxvY2tfdGltZXN0YW1wIC0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllciA9IHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcG93ZXJfc291cmNlID0gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQpCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgbm90IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGFscmVhZHkgZXhpc3RzIgogICAgZGlnIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MjIKICAgIC8vIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICBhc3NlcnQgLy8gUG93ZXIgbG9jayBhbHJlYWR5IGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzI3CiAgICAvLyAqIChwb3dlcl9zb3VyY2UucG93ZXJfbXVsdGlwbGllci5uYXRpdmUgKyBsb2NrdXBfYm9udXNfbXVsdGlwbGllcikKICAgIHVuY292ZXIgMQogICAgaW50IDgKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGRpZyAyCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MjYtNzI3CiAgICAvLyBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAqIChwb3dlcl9zb3VyY2UucG93ZXJfbXVsdGlwbGllci5uYXRpdmUgKyBsb2NrdXBfYm9udXNfbXVsdGlwbGllcikKICAgIGl0b2IKICAgIGZyYW1lX2RpZyAtMgogICAgdW5jb3ZlciAxCiAgICBiKgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzI4CiAgICAvLyApIC8vIEJpZ1VJbnQoMTAwMDApCiAgICBieXRlIDB4MjcxMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzI1LTcyOAogICAgLy8gcG93ZXJfZ3JhbnRlZCA9ICgKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyApIC8vIEJpZ1VJbnQoMTAwMDApCiAgICBiLwogICAgZHVwCiAgICBjb3ZlciA1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MzAKICAgIC8vIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgZnJhbWVfZGlnIC0zCiAgICBpdG9iCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MzEKICAgIC8vIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgZnJhbWVfZGlnIC0yCiAgICBsZW4KICAgIGludCAzMgogICAgPD0KICAgIGFzc2VydCAvLyBvdmVyZmxvdwogICAgaW50IDMyCiAgICBiemVybwogICAgZnJhbWVfZGlnIC0yCiAgICB1bmNvdmVyIDEKICAgIGJ8CiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MzIKICAgIC8vIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MzMKICAgIC8vIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICB0eG4gU2VuZGVyCiAgICBjb3ZlciAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MzQKICAgIC8vIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KHBvd2VyX2dyYW50ZWQpLAogICAgZHVwCiAgICBsZW4KICAgIGludCAzMgogICAgPD0KICAgIGFzc2VydCAvLyBvdmVyZmxvdwogICAgaW50IDMyCiAgICBiemVybwogICAgYnwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjczNQogICAgLy8gbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICB1bmNvdmVyIDcKICAgIGl0b2IKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjczNgogICAgLy8gbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQobG9ja3VwX2JvbnVzX211bHRpcGxpZXIpLAogICAgdW5jb3ZlciA3CiAgICBpdG9iCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3MjktNzM3CiAgICAvLyBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XSA9IFBvd2VyTG9jaygKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KHBvd2VyX2dyYW50ZWQpLAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NChsb2NrdXBfZHVyYXRpb24pLAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICkKICAgIGJ5dGUgMHgKICAgIHVuY292ZXIgNwogICAgY29uY2F0CiAgICB1bmNvdmVyIDQKICAgIGNvbmNhdAogICAgdW5jb3ZlciA0CiAgICBjb25jYXQKICAgIHVuY292ZXIgNAogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTYKICAgIC8vIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgYnl0ZSAweDZjNWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjcyOQogICAgLy8gc2VsZi5wb3dlcl9sb2Nrc1twb3dlcl9sb2NrX2tleV0gPSBQb3dlckxvY2soCiAgICB1bmNvdmVyIDIKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzI5LTczNwogICAgLy8gc2VsZi5wb3dlcl9sb2Nrc1twb3dlcl9sb2NrX2tleV0gPSBQb3dlckxvY2soCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQobG9ja3VwX2R1cmF0aW9uKSwKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChsb2NrdXBfYm9udXNfbXVsdGlwbGllciksCiAgICAvLyApCiAgICB1bmNvdmVyIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjczOC03NDQKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICkKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc0MAogICAgLy8gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgdHhuIFNlbmRlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzQxCiAgICAvLyBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzQyCiAgICAvLyBhcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICBmcmFtZV9kaWcgLTIKICAgIGxlbgogICAgaW50IDMyCiAgICA8PQogICAgYXNzZXJ0IC8vIG92ZXJmbG93CiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBmcmFtZV9kaWcgLTIKICAgIHVuY292ZXIgMQogICAgYnwKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjcwMAogICAgLy8gcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICBmcmFtZV9kaWcgLTMKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzM4LTc0NAogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgYXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gKQogICAgbWV0aG9kICJhcmMyMDBfdHJhbnNmZXJGcm9tKGFkZHJlc3MsYWRkcmVzcyx1aW50MjU2KWJvb2wiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzQ1CiAgICAvLyBuZXdfdm90ZV9wb3dlciA9IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICsgcG93ZXJfZ3JhbnRlZAogICAgZHVwCiAgICBpbnQgMzIKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMAogICAgZHVwCiAgICBjb3ZlciAzCiAgICBiKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzQ2CiAgICAvLyB2b3Rlci52b3Rlcl9hZGRyZXNzID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICB0eG4gU2VuZGVyCiAgICB1bmNvdmVyIDIKICAgIGludCAwCiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NDcKICAgIC8vIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICBkdXAKICAgIGxlbgogICAgaW50IDMyCiAgICA8PQogICAgYXNzZXJ0IC8vIG92ZXJmbG93CiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBifAogICAgdW5jb3ZlciAxCiAgICBpbnQgMzIKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc0OAogICAgLy8gc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIHR4biBTZW5kZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYwOQogICAgLy8gc2VsZi52b3RlcnMgPSBCb3hNYXAoQWNjb3VudCwgVm90ZXIsIGtleV9wcmVmaXg9YiJ2XyIpCiAgICBieXRlIDB4NzY1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzQ4CiAgICAvLyBzZWxmLnZvdGVyc1tUeG4uc2VuZGVyXSA9IHZvdGVyLmNvcHkoKQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIHVuY292ZXIgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzUwCiAgICAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICsgcG93ZXJfZ3JhbnRlZAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5MgogICAgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBCaWdVSW50KCkKICAgIGJ5dGUgInRvdGFsX3ZvdGluZ19wb3dlciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc1MAogICAgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciArIHBvd2VyX2dyYW50ZWQKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgZXhpc3RzCiAgICB1bmNvdmVyIDEKICAgIGIrCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTIKICAgIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gQmlnVUludCgpCiAgICBieXRlICJ0b3RhbF92b3RpbmdfcG93ZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NTAKICAgIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICB1bmNvdmVyIDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIobG9ja3VwX2R1cmF0aW9uOiB1aW50NjQpIC0+IHVpbnQ2NDoKX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY0NC02NDUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2NDcKICAgIC8vIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMzE0NDk2MDAKICAgID49CiAgICBieiBfY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyX2Vsc2VfYm9keUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2NDgKICAgIC8vIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIGludCAxMDAwMAogICAgcmV0c3ViCgpfY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyX2Vsc2VfYm9keUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjQ5CiAgICAvLyBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMTU3MjQ4MDAKICAgID49CiAgICBieiBfY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyX2Vsc2VfYm9keUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2NTAKICAgIC8vIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIGludCA1MDAwCiAgICByZXRzdWIKCl9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXJfZWxzZV9ib2R5QDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2NTEKICAgIC8vIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICBmcmFtZV9kaWcgLTEKICAgIGludCA3MjU3NjAwCiAgICA+PQogICAgYnogX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcl9lbHNlX2JvZHlANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjUyCiAgICAvLyByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICBpbnQgMjUwMAogICAgcmV0c3ViCgpfY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyX2Vsc2VfYm9keUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjUzCiAgICAvLyBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMjQxOTIwMAogICAgPj0KICAgIGJ6IF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXJfZWxzZV9ib2R5QDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY1NAogICAgLy8gcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgaW50IDEwMDAKICAgIHJldHN1YgoKX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcl9lbHNlX2JvZHlAODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY1NgogICAgLy8gcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKQogICAgaW50IDAKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2dldF92b3RlcihhY2NvdW50OiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfdm90ZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTIzLTE1MjcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF92b3RlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFjY291bnQ6IEFjY291bnQsCiAgICAvLyApIC0+IFZvdGVyOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTM2CiAgICAvLyBsYXN0X3Byb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTMwLTE1MzcKICAgIC8vIGRlZmF1bHQ9Vm90ZXIoCiAgICAvLyAgICAgdm90ZXJfYWRkcmVzcz1hcmM0LkFkZHJlc3MoYWNjb3VudCksCiAgICAvLyAgICAgdm90ZV9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgdm90ZV90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxzX3BhcnRpY2lwYXRlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxhc3RfcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICksCiAgICBieXRlIDB4CiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUzMgogICAgLy8gdm90ZV9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUzMC0xNTM3CiAgICAvLyBkZWZhdWx0PVZvdGVyKAogICAgLy8gICAgIHZvdGVyX2FkZHJlc3M9YXJjNC5BZGRyZXNzKGFjY291bnQpLAogICAgLy8gICAgIHZvdGVfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHZvdGVfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbGFzdF9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsYXN0X3Byb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTMzCiAgICAvLyB2b3RlX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTMwLTE1MzcKICAgIC8vIGRlZmF1bHQ9Vm90ZXIoCiAgICAvLyAgICAgdm90ZXJfYWRkcmVzcz1hcmM0LkFkZHJlc3MoYWNjb3VudCksCiAgICAvLyAgICAgdm90ZV9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgdm90ZV90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zYWxzX3BhcnRpY2lwYXRlZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxhc3RfcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1MzQKICAgIC8vIHByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQ9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUzMC0xNTM3CiAgICAvLyBkZWZhdWx0PVZvdGVyKAogICAgLy8gICAgIHZvdGVyX2FkZHJlc3M9YXJjNC5BZGRyZXNzKGFjY291bnQpLAogICAgLy8gICAgIHZvdGVfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHZvdGVfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbGFzdF9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsYXN0X3Byb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTM1CiAgICAvLyBsYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1MzAtMTUzNwogICAgLy8gZGVmYXVsdD1Wb3RlcigKICAgIC8vICAgICB2b3Rlcl9hZGRyZXNzPWFyYzQuQWRkcmVzcyhhY2NvdW50KSwKICAgIC8vICAgICB2b3RlX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICB2b3RlX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3NhbHNfcGFydGljaXBhdGVkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbGFzdF9wcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYwOQogICAgLy8gc2VsZi52b3RlcnMgPSBCb3hNYXAoQWNjb3VudCwgVm90ZXIsIGtleV9wcmVmaXg9YiJ2XyIpCiAgICBieXRlIDB4NzY1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUyOC0xNTM4CiAgICAvLyB2b3RlciA9IHNlbGYudm90ZXJzLmdldCgKICAgIC8vICAgICBrZXk9YWNjb3VudCwKICAgIC8vICAgICBkZWZhdWx0PVZvdGVyKAogICAgLy8gICAgICAgICB2b3Rlcl9hZGRyZXNzPWFyYzQuQWRkcmVzcyhhY2NvdW50KSwKICAgIC8vICAgICAgICAgdm90ZV9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgIHZvdGVfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBwcm9wb3NhbHNfcGFydGljaXBhdGVkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBsYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBsYXN0X3Byb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgKSwKICAgIC8vICkuY29weSgpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgYm94X2dldAogICAgY292ZXIgMQogICAgdW5jb3ZlciAyCiAgICB1bmNvdmVyIDEKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDkKICAgIC8vIHNlbGYudm90ZXJzID0gQm94TWFwKEFjY291bnQsIFZvdGVyLCBrZXlfcHJlZml4PWIidl8iKQogICAgYnl0ZSAweDc2NWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYwOS0xNTQwCiAgICAvLyAgICAgc2VsZi52b3RlcnMgPSBCb3hNYXAoQWNjb3VudCwgVm90ZXIsIGtleV9wcmVmaXg9YiJ2XyIpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICAvLyAgICAgc2VsZi52b3RlcyA9IEJveE1hcChCeXRlczY0LCBVSW50NjQsIGtleV9wcmVmaXg9YiIiKQogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgVUludDY0LCBQb3dlclNvdXJjZSwga2V5X3ByZWZpeD1iInFfIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzID0gQm94TWFwKAogICAgLy8gICAgICAgICBCeXRlczY0LCBQb3dlckxvY2ssIGtleV9wcmVmaXg9YiJsXyIKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hZGRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBub3QgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX3NvdXJjZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9cG93ZXJfc291cmNlX2lkLAogICAgLy8gICAgICAgICBkZWZhdWx0PVBvd2VyU291cmNlKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLCBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHRoZSBib251cyBtdWx0aXBsaWVyIGJhc2VkIG9uIGxvY2t1cCBkdXJhdGlvbiIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xvY2t1cF90aWVyX2luZm8oc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IHR1cGxlW1VJbnQ2NCwgVUludDY0XToKICAgIC8vICAgICAiIiJHZXQgbG9ja3VwIHRpZXIgaW5mb3JtYXRpb246ICh0aWVyX251bWJlciwgYm9udXNfbXVsdGlwbGllcikiIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg0KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDMpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMiksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKSkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgxKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VwZGF0ZV9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IGFyYzQuVUludDI1NiwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9sb2NrX3Bvd2VyKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50Lm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IEJpZ1VJbnQsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJDYW5ub3QgbG9jayBwb3dlciBpbiB0aGUgcGFzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wICsgU0VDT05EU19QRVJfV0VFSwogICAgLy8gICAgICksICJQb3dlciBsb2NrIG11c3QgYmUgYXQgbGVhc3QgMSB3ZWVrIgogICAgLy8gCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uID0gcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCAtIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIgPSBzZWxmLl9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbgogICAgLy8gICAgICkKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIHBvd2VyX3NvdXJjZSA9IHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkKQogICAgLy8gICAgIHBvd2VyX2xvY2tfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX2xvY2tfa2V5IG5vdCBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBhbHJlYWR5IGV4aXN0cyIKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9ICgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudAogICAgLy8gICAgICAgICAqIChwb3dlcl9zb3VyY2UucG93ZXJfbXVsdGlwbGllci5uYXRpdmUgKyBsb2NrdXBfYm9udXNfbXVsdGlwbGllcikKICAgIC8vICAgICApIC8vIEJpZ1VJbnQoMTAwMDApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2Nrc1twb3dlcl9sb2NrX2tleV0gPSBQb3dlckxvY2soCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KHBvd2VyX2dyYW50ZWQpLAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQobG9ja3VwX2R1cmF0aW9uKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQobG9ja3VwX2JvbnVzX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgbmV3X3ZvdGVfcG93ZXIgPSB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSArIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICB2b3Rlci52b3Rlcl9hZGRyZXNzID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgdm90ZXIudm90ZV9wb3dlciA9IGFyYzQuVUludDI1NihuZXdfdm90ZV9wb3dlcikKICAgIC8vICAgICBzZWxmLnZvdGVyc1tUeG4uc2VuZGVyXSA9IHZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciArIHBvd2VyX2dyYW50ZWQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfbG9ja3MuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICAgICBkZWZhdWx0PVBvd2VyTG9jaygKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1bmxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91bmxvY2tfcG93ZXIocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91bmxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHBvd2VyX2xvY2tfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX2xvY2tfa2V5IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHBvd2VyX2xvY2sgPSBzZWxmLl9nZXRfcG93ZXJfbG9jayhwb3dlcl9zb3VyY2VfaWQsIHBvd2VyX3VubG9ja190aW1lc3RhbXApCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSA8PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJQb3dlciBsb2NrIGlzIG5vdCB5ZXQgdW5sb2NrZWQiCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9vd25lciA9IHBvd2VyX2xvY2sucG93ZXJfc291cmNlX293bmVyLm5hdGl2ZQogICAgLy8gICAgIHBvd2VyX293bmVyX3ZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKHBvd2VyX293bmVyKQogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSBwb3dlcl9sb2NrLnBvd2VyX2dyYW50ZWQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkIDw9IHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKSwgIk5vdCBlbm91Z2ggdm90aW5nIHBvd2VyIgogICAgLy8gICAgIHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIubmF0aXZlIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnZvdGVyc1twb3dlcl9vd25lcl0gPSBwb3dlcl9vd25lcl92b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgLSBwb3dlcl9ncmFudGVkCiAgICAvLyAKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX293bmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9hbW91bnQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBkZWwgc2VsZi5wb3dlcl9sb2Nrc1twb3dlcl9sb2NrX2tleV0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzNjQsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMgogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcHJvcG9zYWxfbm9kZShwcm9wb3NhbF90aXRsZS5ieXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb24uYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWxfbm9kZSgKICAgIC8vICAgICBzZWxmLCBwcm9wb3NhbF90aXRsZTogQnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlcwogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBCeXRlczMyLmZyb21fYnl0ZXMob3Auc2hhMjU2KHByb3Bvc2FsX3RpdGxlICsgcHJvcG9zYWxfZGVzY3JpcHRpb24pKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucHJvcG9zYWxzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qcm9wb3NhbCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMob3AuYnplcm8oNTEyKSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF95ZXNfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF95ZXNfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHZvdGluZ19zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3RpbmdfZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgICAgICAgICAgZXhlY3V0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgZXhlY3V0aW9uX3R4bl9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX21ldD1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBhY2NvdW50Lm5hdGl2ZSkpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIGFjY291bnQ6IEFjY291bnQsCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi52b3Rlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSArIGFjY291bnQuYnl0ZXMpLAogICAgLy8gICAgICAgICBkZWZhdWx0PVVJbnQ2NCgyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBwcm9wb3NlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzNjQsCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzNTEyLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9wcm9wb3NlKAogICAgLy8gICAgICAgICBwcm9wb3NhbF90aXRsZS5ieXRlcywKICAgIC8vICAgICAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb24uYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9wcm9wb3NlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogVUludDY0LAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHByb3Bvc2FsX25vZGUgPSBzZWxmLl9nZXRfcHJvcG9zYWxfbm9kZShwcm9wb3NhbF90aXRsZSwgcHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgYXNzZXJ0IHByb3Bvc2FsX25vZGUgbm90IGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgSUQgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbF9pbmRleCA9IHNlbGYucHJvcG9zYWxfY291bnQgKyAxCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfaW5kZXggPSBhcmM0LlVJbnQ2NChwcm9wb3NhbF9pbmRleCkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfUEVORElORykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NlciA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RpdGxlID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX3RpdGxlKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2Rlc2NyaXB0aW9uID0gQnl0ZXM1MTIuZnJvbV9ieXRlcyhwcm9wb3NhbF9kZXNjcmlwdGlvbikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfY2F0ZWdvcnlfaWQgPSBhcmM0LlVJbnQ2NChwcm9wb3NhbF9jYXRlZ29yeV9pZCkKICAgIC8vICAgICBwcm9wb3NhbC5jcmVhdGVkX2F0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb3Bvc2FsLnZvdGluZ19lbmRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsgKyBTRUNPTkRTX1BFUl9EQVkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkID0gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3F1b3J1bV90aHJlc2hvbGQoKSkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1twcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxfY291bnQgPSBwcm9wb3NhbF9pbmRleAogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgUHJvcG9zYWxDcmVhdGVkKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1wcm9wb3NhbF9ub2RlLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBwcm9wb3NhbF9ub2RlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWN0aXZhdGVfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FjdGl2YXRlX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHBlbmRpbmciCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSA+IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBwZXJpb2QgaGFzIG5vdCBzdGFydGVkIHlldCIKICAgIC8vIAogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgYXNzZXJ0IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlID4gMCwgIllvdSBoYXZlIG5vIHZvdGluZyBwb3dlciIKICAgIC8vIAogICAgLy8gICAgIG5ld19hY3RpdmF0aW9uX3Bvd2VyID0gKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X2FjdGl2YXRpb25fcG93ZXIpCiAgICAvLyAKICAgIC8vICAgICBpZiBuZXdfYWN0aXZhdGlvbl9wb3dlciA+PSBzZWxmLmFjdGl2YXRpb25fdGhyZXNob2xkOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICAgICAgR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfQUNUSVZFKQogICAgLy8gCiAgICAvLyAgICAgICAgIHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ID0gc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgKyAxCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsCiAgICAvLyAgICAgc3VwcG9ydDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fY2FzdF92b3RlKHByb3Bvc2FsX25vZGUuYnl0ZXMsIHN1cHBvcnQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FzdF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyAgICAgc3VwcG9ydDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgdm90ZV9rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSArIFR4bi5zZW5kZXIuYnl0ZXMpCiAgICAvLyAgICAgYXNzZXJ0IHZvdGVfa2V5IG5vdCBpbiBzZWxmLnZvdGVzLCAiWW91IGhhdmUgYWxyZWFkeSB2b3RlZCIKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0IHN1cHBvcnQgPCAyLCAiSW52YWxpZCB2b3RlIgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXS5wcm9wb3NhbF9zdGF0dXMgPT0gUFJPUE9TQUxfU1RBVFVTX0FDVElWRQogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgYWN0aXZlIgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXS52b3RpbmdfZW5kX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICAgICAgICAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiVm90aW5nIGhhcyBlbmRlZCIKICAgIC8vIAogICAgLy8gICAgIHNlbGYudm90ZXNbdm90ZV9rZXldID0gc3VwcG9ydAogICAgLy8gCiAgICAvLyAgICAgdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkLm5hdGl2ZSArIDEKICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIubGFzdF9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHZvdGVyLnZvdGVfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgdm90ZXIubGFzdF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnZvdGVyc1tUeG4uc2VuZGVyXSA9IHZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwoX3Byb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlICsgMQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfdm90ZXMgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZSArIHN1cHBvcnQKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAgICAgaWYgc3VwcG9ydCA9PSAxOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnZvdGVfY291bnQgPSBzZWxmLnZvdGVfY291bnQgKyAxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiByZWplY3RfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJDaGVjayBpZiBhIHBlbmRpbmcgcHJvcG9zYWwgc2hvdWxkIGJlIHJlamVjdGVkIGR1ZSB0byBpbnN1ZmZpY2llbnQgYWN0aXZhdGlvbiB2b3RlcyIiIgogICAgLy8gICAgIHNlbGYuX3JlamVjdF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcmVqZWN0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgIT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkc6CiAgICAvLyAgICAgICAgIHJldHVybgogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXA6CiAgICAvLyAKICAgIC8vICAgICAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgPCBzZWxmLmFjdGl2YXRpb25fdGhyZXNob2xkOgogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgLy8gICAgICAgICAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjYW5jZWxfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9jYW5jZWxfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbmNlbF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUEVORElORwogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcGVuZGluZyIKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfQ0FOQ0VMRUQpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBmaW5hbGl6ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIkZpbmFsaXplIGEgcHJvcG9zYWwgYWZ0ZXIgdm90aW5nIHBlcmlvZCBlbmRzIiIiCiAgICAvLyAKICAgIC8vICAgICBwYXNzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9maW5hbGl6ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IGFjdGl2ZSIKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnZvdGluZ19lbmRfdGltZXN0YW1wLm5hdGl2ZSA8IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBwZXJpb2QgaGFzIG5vdCBlbmRlZCIKICAgIC8vIAogICAgLy8gICAgIHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ID0gc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgLSAxCiAgICAvLyAKICAgIC8vICAgICBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCA9IHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gICAgIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyICsgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSA+IDA6CiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgICAgICBlc3RpbWF0ZWRfdW5pcXVlX3ZvdGVycyA9IHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZQogICAgLy8gICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzID0gKAogICAgLy8gICAgICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyArIGVzdGltYXRlZF91bmlxdWVfdm90ZXJzCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIG1lZXRzX3F1b3J1bSA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgID49IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX21ldCA9IGFyYzQuQm9vbChtZWV0c19xdW9ydW0pCiAgICAvLyAgICAgaWYgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgPCBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gICAgICk6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9zdGF0dXMgPSBhcmM0LlVJbnQ2NChRVU9SVU1fU1RBVFVTX05PVF9NRVQpCiAgICAvLyAgICAgZWxpZiAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICA9PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gICAgICk6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9zdGF0dXMgPSBhcmM0LlVJbnQ2NChRVU9SVU1fU1RBVFVTX01FVCkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19FWENFRURFRCkKICAgIC8vIAogICAgLy8gICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSA9PSAwOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19FWFBJUkVEKQogICAgLy8gICAgIGVsaWYgbm90IG1lZXRzX3F1b3J1bToKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQpCiAgICAvLyAgICAgZWxpZiBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfdm90ZXMubmF0aXZlID4gKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgLSBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfdm90ZXMubmF0aXZlCiAgICAvLyAgICAgKToKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfU1VDQ0VFREVEKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcXVldWVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJRdWV1ZSBhIHN1Y2NlZWRlZCBwcm9wb3NhbCBmb3IgZXhlY3V0aW9uIiIiCiAgICAvLyAgICAgc2VsZi5fcXVldWVfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3F1ZXVlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRAogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3Qgc3VjY2VlZGVkIgogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19RVUVVRUQpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBleGVjdXRlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiRXhlY3V0ZSBhIHF1ZXVlZCBwcm9wb3NhbCIiIgogICAgLy8gICAgIHNlbGYuX2V4ZWN1dGVfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2V4ZWN1dGVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUVVFVUVECiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBxdWV1ZWQiCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0VYRUNVVEVEKQogICAgLy8gICAgIHByb3Bvc2FsLmV4ZWN1dGVkX2F0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdmV0b19wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIlZldG8gYSBxdWV1ZWQgcHJvcG9zYWwiIiIKICAgIC8vICAgICBzZWxmLl92ZXRvX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF92ZXRvX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1FVRVVFRAogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcXVldWVkIgogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0NBTkNFTEVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2FjdGl2ZV9wcm9wb3NhbF9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIGFjdGl2ZSBwcm9wb3NhbHMiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdG90YWxfdm90ZXJfY291bnQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBjdXJyZW50IG51bWJlciBvZiB1bmlxdWUgdm90ZXJzIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYudG90YWxfdm90ZXJfY291bnQpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcGFydGljaXBhdGlvbl9yYXRlKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgY3VycmVudCBwYXJ0aWNpcGF0aW9uIHJhdGUgYXMgYSBwZXJjZW50YWdlICgwLTEwMCkiIiIKICAgIC8vICAgICBpZiBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50ID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAgICAgcGFydGljaXBhdGlvbl9yYXRlID0gKAogICAgLy8gICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzICogMTAwCiAgICAvLyAgICAgKSAvLyBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHBhcnRpY2lwYXRpb25fcmF0ZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9wYXJ0aWNpcGF0aW9uX3JhdGUoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHBhcnRpY2lwYXRpb24gcmF0ZSBmb3IgYSBzcGVjaWZpYyBwcm9wb3NhbCBhcyBhIHBlcmNlbnRhZ2UgKDAtMTAwKSIiIgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBpZiBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vIAogICAgLy8gICAgIHBhcnRpY2lwYXRpb25fcmF0ZSA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlICogMTAwCiAgICAvLyAgICAgKSAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlcgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChwYXJ0aWNpcGF0aW9uX3JhdGUpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfZWxpZ2libGVfdm90ZXJfY291bnQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBudW1iZXIgb2Ygdm90ZXJzIHdpdGggdm90aW5nIHBvd2VyID4gMCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLnRvdGFsX3ZvdGVyX2NvdW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3BhcnRpY2lwYXRpbmdfdm90ZXJfY291bnQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBudW1iZXIgb2Ygdm90ZXJzIHdobyBoYXZlIGFjdHVhbGx5IHBhcnRpY2lwYXRlZCBpbiB2b3RpbmciIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycykKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBudW1iZXIgb2YgcHJvcG9zYWxzIHRoYXQgaGF2ZSBiZWVuIGZpbmFsaXplZCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9hdmVyYWdlX3BhcnRpY2lwYXRpb25fcGVyX3Byb3Bvc2FsKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCBhdmVyYWdlIHBhcnRpY2lwYXRpb24gcG93ZXIgcGVyIGZpbmFsaXplZCBwcm9wb3NhbCIiIgogICAgLy8gICAgIGlmIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgIGF2ZXJhZ2VfcGFydGljaXBhdGlvbiA9ICgKICAgIC8vICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50CiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChhdmVyYWdlX3BhcnRpY2lwYXRpb24pCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYXZlcmFnZV92b3Rlc19wZXJfcHJvcG9zYWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IGF2ZXJhZ2UgbnVtYmVyIG9mIHZvdGVzIHBlciBwcm9wb3NhbCIiIgogICAgLy8gICAgIGlmIHNlbGYucHJvcG9zYWxfY291bnQgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAgICAgYXZlcmFnZV92b3RlcyA9IHNlbGYudm90ZV9jb3VudCAvLyBzZWxmLnByb3Bvc2FsX2NvdW50CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KGF2ZXJhZ2Vfdm90ZXMpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZXJfaW5mbHVlbmNlX3Njb3JlKHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IGluZmx1ZW5jZSBzY29yZSBmb3IgYSBzcGVjaWZpYyB2b3RlciAoMC0xMDApIGJhc2VkIG9uIHZvdGluZyBwb3dlciIiIgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgLy8gICAgIGlmIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAgICAgaWYgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICBpbmZsdWVuY2Vfc2NvcmUgPSAodm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKiAxMDApIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KGluZmx1ZW5jZV9zY29yZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3Rlcl9lbmdhZ2VtZW50X3Njb3JlKHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IGVuZ2FnZW1lbnQgc2NvcmUgZm9yIGEgc3BlY2lmaWMgdm90ZXIgKDAtMTAwKSBiYXNlZCBvbiBhY3R1YWwgcGFydGljaXBhdGlvbiIiIgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgLy8gICAgIGlmIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBpZiBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwYXJ0aWNpcGF0aW9uX2ZyZXF1ZW5jeSA9ICgKICAgIC8vICAgICAgICAgdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgKiAxMDAKICAgIC8vICAgICApIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50CiAgICAvLyAgICAgdm90aW5nX3Bvd2VyX3dlaWdodCA9ICh2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAqIDEwMCkgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgZW5nYWdlbWVudF9zY29yZSA9ICgKICAgIC8vICAgICAgICAgcGFydGljaXBhdGlvbl9mcmVxdWVuY3kgKiA3MCArIHZvdGluZ19wb3dlcl93ZWlnaHQgKiAzMAogICAgLy8gICAgICkgLy8gMTAwCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KGVuZ2FnZW1lbnRfc2NvcmUpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBoYXNfdm90ZXJfcGFydGljaXBhdGVkX2luX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcywgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMgogICAgLy8gKSAtPiBhcmM0LkJvb2w6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSB2b3RlciBoYXMgcGFydGljaXBhdGVkIGluIGEgc3BlY2lmaWMgcHJvcG9zYWwiIiIKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIC8vICAgICByZXR1cm4gYXJjNC5Cb29sKHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlID4gMCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3Rlcl9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcCgKICAgIC8vICAgICBzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIKICAgIC8vICkgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSB0aW1lc3RhbXAgd2hlbiBhIHZvdGVyIHBhcnRpY2lwYXRlZCBpbiBhIHNwZWNpZmljIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX3Byb3Bvc2FsX2NvdW50KHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBudW1iZXIgb2YgcHJvcG9zYWxzIGEgdm90ZXIgaGFzIHBhcnRpY2lwYXRlZCBpbiIiIgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NCh2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkLm5hdGl2ZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3Rlcl9sYXN0X3Byb3Bvc2FsX25vZGUoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBCeXRlczMyOgogICAgLy8gICAgICIiIkdldCB0aGUgbm9kZSBvZiB0aGUgbGFzdCBwcm9wb3NhbCB0aGlzIHZvdGVyIHBhcnRpY2lwYXRlZCBpbiIiIgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgLy8gICAgIHJldHVybiB2b3Rlci5sYXN0X3Byb3Bvc2FsX25vZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9xdW9ydW1fcmVxdWlyZW1lbnQoc2VsZikgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgICIiIkdldCB0aGUgZ2xvYmFsIHF1b3J1bSByZXF1aXJlbWVudCBpbiBiYXNpcyBwb2ludHMgKGJwcykgd2l0aCBiYXNlIG9mIDEwMDAwIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDI1NihzZWxmLnF1b3J1bV9yZXF1aXJlbWVudCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHNldF9xdW9ydW1fcmVxdWlyZW1lbnQoc2VsZiwgcXVvcnVtX2JwczogYXJjNC5VSW50MjU2KSAtPiBOb25lOgogICAgLy8gICAgICIiIlNldCB0aGUgZ2xvYmFsIHF1b3J1bSByZXF1aXJlbWVudCBpbiBiYXNpcyBwb2ludHMgKGJwcykgd2l0aCBiYXNlIG9mIDEwMDAwIiIiCiAgICAvLyAgICAgc2VsZi5fc2V0X3F1b3J1bV9yZXF1aXJlbWVudChxdW9ydW1fYnBzLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NldF9xdW9ydW1fcmVxdWlyZW1lbnQoc2VsZiwgcXVvcnVtX2JwczogQmlnVUludCkgLT4gTm9uZToKICAgIC8vICAgICAiIiJTZXQgdGhlIGdsb2JhbCBxdW9ydW0gcmVxdWlyZW1lbnQgaW4gYmFzaXMgcG9pbnRzIChicHMpIHdpdGggYmFzZSBvZiAxMDAwMCIiIgogICAgLy8gICAgIGFzc2VydCBxdW9ydW1fYnBzIDw9IDEwMDAwLCAiUXVvcnVtIHJlcXVpcmVtZW50IGNhbm5vdCBleGNlZWQgMTAwJSAoMTAwMDAgYnBzKSIKICAgIC8vICAgICBzZWxmLnF1b3J1bV9yZXF1aXJlbWVudCA9IHF1b3J1bV9icHMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9xdW9ydW1fdGhyZXNob2xkKHNlbGYpIC0+IGFyYzQuVUludDI1NjoKICAgIC8vICAgICAiIiJHZXQgdGhlIGN1cnJlbnQgcXVvcnVtIHRocmVzaG9sZCBpbiB2b3RpbmcgcG93ZXIgdW5pdHMiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50MjU2KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcXVvcnVtX3RocmVzaG9sZChzZWxmKSAtPiBCaWdVSW50OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgY3VycmVudCBxdW9ydW0gdGhyZXNob2xkIGluIHZvdGluZyBwb3dlciB1bml0cyIiIgogICAgLy8gCiAgICAvLyAgICAgcmV0dXJuIChzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciAqIHNlbGYucXVvcnVtX3JlcXVpcmVtZW50KSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2hlY2tfcHJvcG9zYWxfcXVvcnVtKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IGFyYzQuQm9vbDoKICAgIC8vICAgICAiIiJDaGVjayBpZiBhIHByb3Bvc2FsIG1lZXRzIHRoZSBxdW9ydW0gcmVxdWlyZW1lbnQiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5Cb29sKHNlbGYuX2NoZWNrX3Byb3Bvc2FsX3F1b3J1bShwcm9wb3NhbF9ub2RlLmJ5dGVzKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9xdW9ydW1fc3RhdHVzKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCBxdW9ydW0gc3RhdHVzIGZvciBhIHByb3Bvc2FsOiAwID0gbm90IG1ldCwgMSA9IG1ldCwgMiA9IGV4Y2VlZGVkIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9wcm9wb3NhbF9xdW9ydW1fc3RhdHVzKHByb3Bvc2FsX25vZGUuYnl0ZXMpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXMoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgcXVvcnVtIHN0YXR1cyBmb3IgYSBwcm9wb3NhbDogMCA9IG5vdCBtZXQsIDEgPSBtZXQsIDIgPSBleGNlZWRlZCIiIgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGlmICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfU1VDQ0VFREVECiAgICAvLyAgICAgICAgIG9yIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVECiAgICAvLyAgICAgICAgIG9yIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX0VYUElSRUQKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICByZXR1cm4gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cy5uYXRpdmUKICAgIC8vICAgICBlbHNlOgogICAgLy8gCiAgICAvLyAgICAgICAgIGlmICgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICAgICAgPCBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gICAgICAgICApOgogICAgLy8gICAgICAgICAgICAgcmV0dXJuIFVJbnQ2NChRVU9SVU1fU1RBVFVTX05PVF9NRVQpCiAgICAvLyAgICAgICAgIGVsaWYgKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICAgICA9PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gICAgICAgICApOgogICAgLy8gICAgICAgICAgICAgcmV0dXJuIFVJbnQ2NChRVU9SVU1fU1RBVFVTX01FVCkKICAgIC8vICAgICAgICAgZWxzZToKICAgIC8vICAgICAgICAgICAgIHJldHVybiBVSW50NjQoUVVPUlVNX1NUQVRVU19FWENFRURFRCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3Moc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHF1b3J1bSBwcm9ncmVzcyBhcyBwZXJjZW50YWdlICgwLTEwMDAwIGJwcykgZm9yIGEgcHJvcG9zYWwiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3Byb3Bvc2FsX3F1b3J1bV9wcm9ncmVzcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgcXVvcnVtIHRocmVzaG9sZCBmb3IgYSBzcGVjaWZpYyBwcm9wb3NhbCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZChwcm9wb3NhbF9ub2RlLmJ5dGVzKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBxdW9ydW0gdGhyZXNob2xkIGZvciBhIHNwZWNpZmljIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIHJldHVybiBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdXBkYXRlX3RvdGFsX3ZvdGluZ19wb3dlcihzZWxmLCBuZXdfdG90YWxfcG93ZXI6IGFyYzQuVUludDI1NikgLT4gTm9uZToKICAgIC8vICAgICAiIiJVcGRhdGUgdGhlIHRvdGFsIHZvdGluZyBwb3dlciAodXNlZCB3aGVuIHRva2VuIGJhbGFuY2VzIGNoYW5nZSkiIiIKICAgIC8vICAgICBzZWxmLl91cGRhdGVfdG90YWxfdm90aW5nX3Bvd2VyKG5ld190b3RhbF9wb3dlci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfdG90YWxfdm90aW5nX3Bvd2VyKHNlbGYsIG5ld190b3RhbF9wb3dlcjogQmlnVUludCkgLT4gTm9uZToKICAgIC8vICAgICAiIiJVcGRhdGUgdGhlIHRvdGFsIHZvdGluZyBwb3dlciIiIgogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gbmV3X3RvdGFsX3Bvd2VyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoCiAgICAvLyAgICAgc2VsZiwgbG9ja3VwX2R1cmF0aW9uX3NlY29uZHM6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgYm9udXMgbXVsdGlwbGllciBmb3IgYSBnaXZlbiBsb2NrdXAgZHVyYXRpb24gaW4gc2Vjb25kcyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzLm5hdGl2ZSkKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfbG9ja3VwX3RpZXJfaW5mbyhzZWxmLCBsb2NrdXBfZHVyYXRpb25fc2Vjb25kczogYXJjNC5VSW50NjQpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgbG9ja3VwIHRpZXIgKDEtNSkgZm9yIGEgZ2l2ZW4gZHVyYXRpb24iIiIKICAgIC8vICAgICB0aWVyX2luZm8gPSBzZWxmLl9nZXRfbG9ja3VwX3RpZXJfaW5mbyhsb2NrdXBfZHVyYXRpb25fc2Vjb25kcy5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHRpZXJfaW5mb1swXSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNhbGN1bGF0ZV9wb3RlbnRpYWxfcG93ZXJfZ3JhbnRlZCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSBwb3RlbnRpYWwgdm90aW5nIHBvd2VyIGdyYW50ZWQgZm9yIGEgZ2l2ZW4gbG9ja3VwIHNjZW5hcmlvIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgc2VsZi5fY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uX3NlY29uZHMubmF0aXZlLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb25fc2Vjb25kczogVUludDY0LAogICAgLy8gKSAtPiBCaWdVSW50OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSBwb3RlbnRpYWwgdm90aW5nIHBvd2VyIGdyYW50ZWQgZm9yIGEgZ2l2ZW4gbG9ja3VwIHNjZW5hcmlvIiIiCiAgICAvLyAgICAgcG93ZXJfc291cmNlID0gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQpCiAgICAvLyAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIgPSBzZWxmLl9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9ICgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudAogICAgLy8gICAgICAgICAqIChwb3dlcl9zb3VyY2UucG93ZXJfbXVsdGlwbGllci5uYXRpdmUgKyBsb2NrdXBfYm9udXNfbXVsdGlwbGllcikKICAgIC8vICAgICApIC8vIEJpZ1VJbnQoMTAwMDApCiAgICAvLyAgICAgcmV0dXJuIHBvd2VyX2dyYW50ZWQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9sb2NrdXBfdGllcl9kdXJhdGlvbihzZWxmLCB0aWVyOiBhcmM0LlVJbnQ2NCkgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBtaW5pbXVtIGR1cmF0aW9uIHJlcXVpcmVkIGZvciBhIHNwZWNpZmljIGxvY2t1cCB0aWVyIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9sb2NrdXBfdGllcl9kdXJhdGlvbih0aWVyLm5hdGl2ZSkpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfZHVyYXRpb24oc2VsZiwgdGllcjogVUludDY0KSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBtaW5pbXVtIGR1cmF0aW9uIHJlcXVpcmVkIGZvciBhIHNwZWNpZmljIGxvY2t1cCB0aWVyIiIiCiAgICAvLyAgICAgaWYgdGllciA9PSAxOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9USUVSXzFfRFVSQVRJT04pCiAgICAvLyAgICAgZWxpZiB0aWVyID09IDI6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX1RJRVJfMl9EVVJBVElPTikKICAgIC8vICAgICBlbGlmIHRpZXIgPT0gMzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfVElFUl8zX0RVUkFUSU9OKQogICAgLy8gICAgIGVsaWYgdGllciA9PSA0OgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9USUVSXzRfRFVSQVRJT04pCiAgICAvLyAgICAgZWxpZiB0aWVyID09IDU6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX1RJRVJfNV9EVVJBVElPTikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfbG9ja3VwX3RpZXJfYm9udXMoc2VsZiwgdGllcjogYXJjNC5VSW50NjQpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgYm9udXMgbXVsdGlwbGllciBmb3IgYSBzcGVjaWZpYyBsb2NrdXAgdGllciIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfbG9ja3VwX3RpZXJfYm9udXModGllci5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xvY2t1cF90aWVyX2JvbnVzKHNlbGYsIHRpZXI6IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgYm9udXMgbXVsdGlwbGllciBmb3IgYSBzcGVjaWZpYyBsb2NrdXAgdGllciIiIgogICAgLy8gICAgIGlmIHRpZXIgPT0gMToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKQogICAgLy8gICAgIGVsaWYgdGllciA9PSAyOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpCiAgICAvLyAgICAgZWxpZiB0aWVyID09IDM6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykKICAgIC8vICAgICBlbGlmIHRpZXIgPT0gNDoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KQogICAgLy8gICAgIGVsaWYgdGllciA9PSA1OgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgxMDAwMCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9sb2NrX2luZm8oCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IGNvbXByZWhlbnNpdmUgbG9ja3VwIGluZm9ybWF0aW9uIGZvciBhIHBvd2VyIGxvY2siIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHNlbGYuX2dldF9wb3dlcl9sb2NrX2luZm8oCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX2xvY2tfaW5mbygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgY29tcHJlaGVuc2l2ZSBsb2NrdXAgaW5mb3JtYXRpb24gZm9yIGEgcG93ZXIgbG9jayIiIgogICAgLy8gICAgIHBvd2VyX2xvY2sgPSBzZWxmLl9nZXRfcG93ZXJfbG9jayhwb3dlcl9zb3VyY2VfaWQsIHBvd2VyX3VubG9ja190aW1lc3RhbXApCiAgICAvLyAgICAgaWYgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfaWQubmF0aXZlID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMCkKICAgIC8vIAogICAgLy8gICAgIHJlbWFpbmluZ190aW1lID0gKAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSAtIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgaWYgcmVtYWluaW5nX3RpbWUgPD0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAgICAgdGllcl9pbmZvID0gc2VsZi5fZ2V0X2xvY2t1cF90aWVyX2luZm8ocG93ZXJfbG9jay5sb2NrdXBfZHVyYXRpb24ubmF0aXZlKQogICAgLy8gICAgIHJldHVybiB0aWVyX2luZm9bMF0KICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3Moc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IEJpZ1VJbnQ6CiAgICAvLyAgICAgIiIiR2V0IHF1b3J1bSBwcm9ncmVzcyBhcyBwZXJjZW50YWdlICgwLTEwMDAwIGJwcykgZm9yIGEgcHJvcG9zYWwiIiIKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIEJpZ1VJbnQoMTAwMDApCiAgICAvLyAKICAgIC8vICAgICBwcm9ncmVzcyA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlICogMTAwMDAKICAgIC8vICAgICApIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9ncmVzcyA+IDEwMDAwOgogICAgLy8gICAgICAgICBwcm9ncmVzcyA9IEJpZ1VJbnQoMTAwMDApCiAgICAvLyAgICAgcmV0dXJuIHByb2dyZXNzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jaGVja19wcm9wb3NhbF9xdW9ydW0oc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IGJvb2w6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSBwcm9wb3NhbCBtZWV0cyB0aGUgcXVvcnVtIHJlcXVpcmVtZW50IiIiCiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgcmV0dXJuICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgID49IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyKHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gVm90ZXI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF92b3RlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGFjY291bnQ6IEFjY291bnQsCiAgICAvLyApIC0+IFZvdGVyOgogICAgLy8gICAgIHZvdGVyID0gc2VsZi52b3RlcnMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9YWNjb3VudCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Wb3RlcigKICAgIC8vICAgICAgICAgICAgIHZvdGVyX2FkZHJlc3M9YXJjNC5BZGRyZXNzKGFjY291bnQpLAogICAgLy8gICAgICAgICAgICAgdm90ZV9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICB2b3RlX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBsYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbGFzdF9wcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBpZiBhY2NvdW50IG5vdCBpbiBzZWxmLnZvdGVyczoKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICBib3hfbGVuCiAgICBjb3ZlciAxCiAgICBwb3AKICAgIGJueiBfZ2V0X3ZvdGVyX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0MQogICAgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudCA9IHNlbGYudG90YWxfdm90ZXJfY291bnQgKyAxCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTk4CiAgICAvLyBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInRvdGFsX3ZvdGVyX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0MQogICAgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudCA9IHNlbGYudG90YWxfdm90ZXJfY291bnQgKyAxCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG90YWxfdm90ZXJfY291bnQgZXhpc3RzCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTk4CiAgICAvLyBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInRvdGFsX3ZvdGVyX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0MQogICAgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudCA9IHNlbGYudG90YWxfdm90ZXJfY291bnQgKyAxCiAgICB1bmNvdmVyIDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQzCiAgICAvLyBzZWxmLnZvdGVyc1thY2NvdW50XSA9IHZvdGVyLmNvcHkoKQogICAgZnJhbWVfZGlnIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYwOQogICAgLy8gc2VsZi52b3RlcnMgPSBCb3hNYXAoQWNjb3VudCwgVm90ZXIsIGtleV9wcmVmaXg9YiJ2XyIpCiAgICBieXRlIDB4NzY1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0MwogICAgLy8gc2VsZi52b3RlcnNbYWNjb3VudF0gPSB2b3Rlci5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGJveF9wdXQKCl9nZXRfdm90ZXJfYWZ0ZXJfaWZfZWxzZUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NAogICAgLy8gcmV0dXJuIHZvdGVyCiAgICBmcmFtZV9kaWcgMAogICAgdW5jb3ZlciAxCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmdldF9wb3dlcl9sb2NrKHBvd2VyX3NvdXJjZV9pZDogYnl0ZXMsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3Bvd2VyX2xvY2s6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NTEtNzU0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc1NgogICAgLy8gcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NTUtNzU3CiAgICAvLyByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICkKICAgIGNhbGxzdWIgX2dldF9wb3dlcl9sb2NrCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9nZXRfcG93ZXJfbG9jayhwb3dlcl9zb3VyY2VfaWQ6IHVpbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogdWludDY0KSAtPiBieXRlczoKX2dldF9wb3dlcl9sb2NrOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzU4LTc2MQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc3MQogICAgLy8gcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzY3LTc3NQogICAgLy8gZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGJ5dGUgMHgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc2OAogICAgLy8gcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc2Ny03NzUKICAgIC8vIGRlZmF1bHQ9UG93ZXJMb2NrKAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc2OQogICAgLy8gcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzY3LTc3NQogICAgLy8gZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzcwCiAgICAvLyBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NjctNzc1CiAgICAvLyBkZWZhdWx0PVBvd2VyTG9jaygKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzcyCiAgICAvLyBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NjctNzc1CiAgICAvLyBkZWZhdWx0PVBvd2VyTG9jaygKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NzMKICAgIC8vIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NjctNzc1CiAgICAvLyBkZWZhdWx0PVBvd2VyTG9jaygKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NzQKICAgIC8vIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc2Ny03NzUKICAgIC8vIGRlZmF1bHQ9UG93ZXJMb2NrKAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc2NAogICAgLy8gYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NjUKICAgIC8vICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMQogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzY0LTc2NQogICAgLy8gYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTYKICAgIC8vIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgYnl0ZSAweDZjNWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc2Mi03NzYKICAgIC8vIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICApLAogICAgLy8gICAgIGRlZmF1bHQ9UG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgKSwKICAgIC8vICkKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBib3hfZ2V0CiAgICBjb3ZlciAxCiAgICB1bmNvdmVyIDIKICAgIHVuY292ZXIgMQogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UudW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZDogYnl0ZXMsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGJ5dGVzKSAtPiB2b2lkOgp1bmxvY2tfcG93ZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3NzctNzgwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1bmxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NzgxCiAgICAvLyBzZWxmLl91bmxvY2tfcG93ZXIocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgY2FsbHN1YiBfdW5sb2NrX3Bvd2VyCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl91bmxvY2tfcG93ZXIocG93ZXJfc291cmNlX2lkOiB1aW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IHVpbnQ2NCkgLT4gdm9pZDoKX3VubG9ja19wb3dlcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc4Mi03ODUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMy03ODYKICAgIC8vICAgICAgICAgVUludDY0LCBQb3dlclNvdXJjZSwga2V5X3ByZWZpeD1iInFfIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzID0gQm94TWFwKAogICAgLy8gICAgICAgICBCeXRlczY0LCBQb3dlckxvY2ssIGtleV9wcmVmaXg9YiJsXyIKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hZGRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBub3QgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX3NvdXJjZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9cG93ZXJfc291cmNlX2lkLAogICAgLy8gICAgICAgICBkZWZhdWx0PVBvd2VyU291cmNlKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLCBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHRoZSBib251cyBtdWx0aXBsaWVyIGJhc2VkIG9uIGxvY2t1cCBkdXJhdGlvbiIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xvY2t1cF90aWVyX2luZm8oc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IHR1cGxlW1VJbnQ2NCwgVUludDY0XToKICAgIC8vICAgICAiIiJHZXQgbG9ja3VwIHRpZXIgaW5mb3JtYXRpb246ICh0aWVyX251bWJlciwgYm9udXNfbXVsdGlwbGllcikiIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg0KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDMpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMiksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKSkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgxKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VwZGF0ZV9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IGFyYzQuVUludDI1NiwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9sb2NrX3Bvd2VyKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50Lm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IEJpZ1VJbnQsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJDYW5ub3QgbG9jayBwb3dlciBpbiB0aGUgcGFzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wICsgU0VDT05EU19QRVJfV0VFSwogICAgLy8gICAgICksICJQb3dlciBsb2NrIG11c3QgYmUgYXQgbGVhc3QgMSB3ZWVrIgogICAgLy8gCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uID0gcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCAtIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIgPSBzZWxmLl9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbgogICAgLy8gICAgICkKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIHBvd2VyX3NvdXJjZSA9IHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkKQogICAgLy8gICAgIHBvd2VyX2xvY2tfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX2xvY2tfa2V5IG5vdCBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBhbHJlYWR5IGV4aXN0cyIKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9ICgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudAogICAgLy8gICAgICAgICAqIChwb3dlcl9zb3VyY2UucG93ZXJfbXVsdGlwbGllci5uYXRpdmUgKyBsb2NrdXBfYm9udXNfbXVsdGlwbGllcikKICAgIC8vICAgICApIC8vIEJpZ1VJbnQoMTAwMDApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2Nrc1twb3dlcl9sb2NrX2tleV0gPSBQb3dlckxvY2soCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KHBvd2VyX2dyYW50ZWQpLAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQobG9ja3VwX2R1cmF0aW9uKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQobG9ja3VwX2JvbnVzX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgbmV3X3ZvdGVfcG93ZXIgPSB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSArIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICB2b3Rlci52b3Rlcl9hZGRyZXNzID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgdm90ZXIudm90ZV9wb3dlciA9IGFyYzQuVUludDI1NihuZXdfdm90ZV9wb3dlcikKICAgIC8vICAgICBzZWxmLnZvdGVyc1tUeG4uc2VuZGVyXSA9IHZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciArIHBvd2VyX2dyYW50ZWQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfbG9ja3MuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICAgICBkZWZhdWx0PVBvd2VyTG9jaygKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1bmxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91bmxvY2tfcG93ZXIocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91bmxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTMKICAgIC8vIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIGJ5dGUgMHg3MTVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTMtNzg2CiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiQ2Fubm90IGxvY2sgcG93ZXIgaW4gdGhlIHBhc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBtdXN0IGJlIGF0IGxlYXN0IDEgd2VlayIKICAgIC8vIAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbiA9IHBvd2VyX3VubG9ja190aW1lc3RhbXAgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb24KICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldID0gUG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICAvLyAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIG5ld192b3RlX3Bvd2VyID0gdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKyBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgdm90ZXIudm90ZXJfYWRkcmVzcyA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBib3hfbGVuCiAgICBjb3ZlciAxCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc4NgogICAgLy8gYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICBhc3NlcnQgLy8gUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3ODgKICAgIC8vIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Nzg5CiAgICAvLyArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc4OC03ODkKICAgIC8vIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Nzg3LTc5MAogICAgLy8gcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICkKICAgIGR1cAogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjE2CiAgICAvLyBCeXRlczY0LCBQb3dlckxvY2ssIGtleV9wcmVmaXg9YiJsXyIKICAgIGJ5dGUgMHg2YzVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTYtNzkxCiAgICAvLyAgICAgICAgIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfc291cmNlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1wb3dlcl9zb3VyY2VfaWQsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgdGhlIGJvbnVzIG11bHRpcGxpZXIgYmFzZWQgb24gbG9ja3VwIGR1cmF0aW9uIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfaW5mbyhzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gdHVwbGVbVUludDY0LCBVSW50NjRdOgogICAgLy8gICAgICIiIkdldCBsb2NrdXAgdGllciBpbmZvcm1hdGlvbjogKHRpZXJfbnVtYmVyLCBib251c19tdWx0aXBsaWVyKSIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg1KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDQpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMyksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgyKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDEpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIkNhbm5vdCBsb2NrIHBvd2VyIGluIHRoZSBwYXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgbXVzdCBiZSBhdCBsZWFzdCAxIHdlZWsiCiAgICAvLyAKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb24gPSBwb3dlcl91bmxvY2tfdGltZXN0YW1wIC0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllciA9IHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcG93ZXJfc291cmNlID0gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQpCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgbm90IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGFscmVhZHkgZXhpc3RzIgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAgICAgICAgICogKHBvd2VyX3NvdXJjZS5wb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSArIGxvY2t1cF9ib251c19tdWx0aXBsaWVyKQogICAgLy8gICAgICkgLy8gQmlnVUludCgxMDAwMCkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XSA9IFBvd2VyTG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYocG93ZXJfZ3JhbnRlZCksCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NChsb2NrdXBfZHVyYXRpb24pLAogICAgLy8gICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChsb2NrdXBfYm9udXNfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBuZXdfdm90ZV9wb3dlciA9IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gICAgIHZvdGVyLnZvdGVyX2FkZHJlc3MgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICB2b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld192b3RlX3Bvd2VyKQogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9sb2Nrcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJMb2NrKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VubG9ja19wb3dlcihwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgZG9lcyBub3QgZXhpc3QiCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3OTEKICAgIC8vIGFzc2VydCBwb3dlcl9sb2NrX2tleSBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBkb2VzIG5vdCBleGlzdCIKICAgIGFzc2VydCAvLyBQb3dlciBsb2NrIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo3OTIKICAgIC8vIHBvd2VyX2xvY2sgPSBzZWxmLl9nZXRfcG93ZXJfbG9jayhwb3dlcl9zb3VyY2VfaWQsIHBvd2VyX3VubG9ja190aW1lc3RhbXApCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3Bvd2VyX2xvY2sKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc5NQogICAgLy8gcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIGR1cAogICAgaW50IDQwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCiAgICA8PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Nzk0LTc5NgogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSA8PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gKSwgIlBvd2VyIGxvY2sgaXMgbm90IHlldCB1bmxvY2tlZCIKICAgIGFzc2VydCAvLyBQb3dlciBsb2NrIGlzIG5vdCB5ZXQgdW5sb2NrZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc5OAogICAgLy8gcG93ZXJfb3duZXIgPSBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lci5uYXRpdmUKICAgIGR1cAogICAgaW50IDQ4CiAgICBpbnQgMzIKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Nzk5CiAgICAvLyBwb3dlcl9vd25lcl92b3RlciA9IHNlbGYuX2dldF92b3Rlcihwb3dlcl9vd25lcikKICAgIGR1cAogICAgY2FsbHN1YiBfZ2V0X3ZvdGVyCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MDAKICAgIC8vIHBvd2VyX2dyYW50ZWQgPSBwb3dlcl9sb2NrLnBvd2VyX2dyYW50ZWQubmF0aXZlCiAgICBkaWcgMgogICAgaW50IDgwCiAgICBpbnQgMzIKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODAzCiAgICAvLyBwb3dlcl9ncmFudGVkIDw9IHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICBkaWcgMgogICAgaW50IDMyCiAgICBpbnQgMzIKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZGlnIDEKICAgIHVuY292ZXIgMQogICAgYjw9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MDItODA0CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPD0gcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICksICJOb3QgZW5vdWdoIHZvdGluZyBwb3dlciIKICAgIGFzc2VydCAvLyBOb3QgZW5vdWdoIHZvdGluZyBwb3dlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODA2CiAgICAvLyBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAtIHBvd2VyX2dyYW50ZWQKICAgIGRpZyAyCiAgICBpbnQgMzIKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkaWcgMQogICAgYi0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgwNS04MDcKICAgIC8vIHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgLSBwb3dlcl9ncmFudGVkCiAgICAvLyApCiAgICBkdXAKICAgIGxlbgogICAgaW50IDMyCiAgICA8PQogICAgYXNzZXJ0IC8vIG92ZXJmbG93CiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBifAogICAgdW5jb3ZlciAzCiAgICBpbnQgMzIKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYwOQogICAgLy8gc2VsZi52b3RlcnMgPSBCb3hNYXAoQWNjb3VudCwgVm90ZXIsIGtleV9wcmVmaXg9YiJ2XyIpCiAgICBieXRlIDB4NzY1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODA4CiAgICAvLyBzZWxmLnZvdGVyc1twb3dlcl9vd25lcl0gPSBwb3dlcl9vd25lcl92b3Rlci5jb3B5KCkKICAgIHVuY292ZXIgMwogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgxMAogICAgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciAtIHBvd2VyX2dyYW50ZWQKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTIKICAgIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gQmlnVUludCgpCiAgICBieXRlICJ0b3RhbF92b3RpbmdfcG93ZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MTAKICAgIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgLSBwb3dlcl9ncmFudGVkCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIGV4aXN0cwogICAgdW5jb3ZlciAxCiAgICBiLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTkyCiAgICAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IEJpZ1VJbnQoKQogICAgYnl0ZSAidG90YWxfdm90aW5nX3Bvd2VyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODEwCiAgICAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIC0gcG93ZXJfZ3JhbnRlZAogICAgdW5jb3ZlciAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODEyLTgxNwogICAgLy8gYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIsCiAgICAvLyAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfYW1vdW50LAogICAgLy8gICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gKQogICAgaXR4bl9iZWdpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODE0CiAgICAvLyBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lciwKICAgIGR1cAogICAgaW50IDQ4CiAgICBpbnQgMzIKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODE1CiAgICAvLyBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9hbW91bnQsCiAgICBpbnQgOAogICAgaW50IDMyCiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjc4NAogICAgLy8gc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgZnJhbWVfZGlnIC0yCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgxMi04MTcKICAgIC8vIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX293bmVyLAogICAgLy8gICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX2Ftb3VudCwKICAgIC8vICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICkKICAgIG1ldGhvZCAiYXJjMjAwX3RyYW5zZmVyKGFkZHJlc3MsdWludDI1Nilib29sIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaW50IGFwcGwKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIGl0eG4gTGFzdExvZwogICAgZXh0cmFjdCAwIDQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgPT0KICAgIGFzc2VydCAvLyBBUkM0IHByZWZpeCBpcyB2YWxpZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjE2CiAgICAvLyBCeXRlczY0LCBQb3dlckxvY2ssIGtleV9wcmVmaXg9YiJsXyIKICAgIGJ5dGUgMHg2YzVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MTgKICAgIC8vIGRlbCBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGJveF9kZWwKICAgIHBvcAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfcHJvcG9zYWxfbm9kZShwcm9wb3NhbF90aXRsZTogYnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBieXRlcykgLT4gYnl0ZXM6CmdldF9wcm9wb3NhbF9ub2RlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODIwLTgyMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzNjQsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMgogICAgLy8gKSAtPiBCeXRlczMyOgogICAgcHJvdG8gMiAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MjQKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfcHJvcG9zYWxfbm9kZShwcm9wb3NhbF90aXRsZS5ieXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb24uYnl0ZXMpCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3Byb3Bvc2FsX25vZGUKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlOiBieXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb246IGJ5dGVzKSAtPiBieXRlczoKX2dldF9wcm9wb3NhbF9ub2RlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODI1LTgyOAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODI5CiAgICAvLyByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1Nihwcm9wb3NhbF90aXRsZSArIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKSkKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIHNoYTI1NgogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZTogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfcHJvcG9zYWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4MzAtODMxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gUHJvcG9zYWw6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjgzMgogICAgLy8gcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfcHJvcG9zYWwKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X3ZvdGUocHJvcG9zYWxfbm9kZTogYnl0ZXMsIGFjY291bnQ6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3ZvdGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NjMtODY0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMiAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NjUKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBhY2NvdW50Lm5hdGl2ZSkpCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3ZvdGUKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2dldF92b3RlKHByb3Bvc2FsX25vZGU6IGJ5dGVzLCBhY2NvdW50OiBieXRlcykgLT4gdWludDY0OgpfZ2V0X3ZvdGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4NjYtODcxCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIGFjY291bnQ6IEFjY291bnQsCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODczCiAgICAvLyBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBhY2NvdW50LmJ5dGVzKSwKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMQogICAgLy8gc2VsZi52b3RlcyA9IEJveE1hcChCeXRlczY0LCBVSW50NjQsIGtleV9wcmVmaXg9YiIiKQogICAgYnl0ZSAweAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODcyLTg3NQogICAgLy8gcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSArIGFjY291bnQuYnl0ZXMpLAogICAgLy8gICAgIGRlZmF1bHQ9VUludDY0KDIpLAogICAgLy8gKQogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGJveF9nZXQKICAgIGNvdmVyIDEKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg3NAogICAgLy8gZGVmYXVsdD1VSW50NjQoMiksCiAgICBpbnQgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODcyLTg3NQogICAgLy8gcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSArIGFjY291bnQuYnl0ZXMpLAogICAgLy8gICAgIGRlZmF1bHQ9VUludDY0KDIpLAogICAgLy8gKQogICAgdW5jb3ZlciAxCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5wcm9wb3NlKHByb3Bvc2FsX3RpdGxlOiBieXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb246IGJ5dGVzLCBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYnl0ZXMsIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogYnl0ZXMpIC0+IGJ5dGVzOgpwcm9wb3NlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODc2LTg4MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIHByb3RvIDQgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODg3CiAgICAvLyBwcm9wb3NhbF9jYXRlZ29yeV9pZC5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjg4OAogICAgLy8gcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSwKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6ODg0LTg4OQogICAgLy8gcmV0dXJuIHNlbGYuX3Byb3Bvc2UoCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb24uYnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQubmF0aXZlLAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgdW5jb3ZlciAzCiAgICB1bmNvdmVyIDMKICAgIGNhbGxzdWIgX3Byb3Bvc2UKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX3Byb3Bvc2UocHJvcG9zYWxfdGl0bGU6IGJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogYnl0ZXMsIHByb3Bvc2FsX2NhdGVnb3J5X2lkOiB1aW50NjQsIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogdWludDY0KSAtPiBieXRlczoKX3Byb3Bvc2U6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4OTAtODk3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9wcm9wb3NlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogVUludDY0LAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4OTgKICAgIC8vIHByb3Bvc2FsX25vZGUgPSBzZWxmLl9nZXRfcHJvcG9zYWxfbm9kZShwcm9wb3NhbF90aXRsZSwgcHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgY2FsbHN1YiBfZ2V0X3Byb3Bvc2FsX25vZGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwLTg5OQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzID0gQm94TWFwKEJ5dGVzMzIsIFByb3Bvc2FsLCBrZXlfcHJlZml4PWIicF8iKQogICAgLy8gICAgIHNlbGYudm90ZXMgPSBCb3hNYXAoQnl0ZXM2NCwgVUludDY0LCBrZXlfcHJlZml4PWIiIikKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiQ2Fubm90IGxvY2sgcG93ZXIgaW4gdGhlIHBhc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBtdXN0IGJlIGF0IGxlYXN0IDEgd2VlayIKICAgIC8vIAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbiA9IHBvd2VyX3VubG9ja190aW1lc3RhbXAgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb24KICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldID0gUG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICAvLyAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIG5ld192b3RlX3Bvd2VyID0gdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKyBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgdm90ZXIudm90ZXJfYWRkcmVzcyA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBpcyBub3QgeWV0IHVubG9ja2VkIgogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfb3duZXIgPSBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lci5uYXRpdmUKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3RlciA9IHNlbGYuX2dldF92b3Rlcihwb3dlcl9vd25lcikKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gcG93ZXJfbG9jay5wb3dlcl9ncmFudGVkLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZCA8PSBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICksICJOb3QgZW5vdWdoIHZvdGluZyBwb3dlciIKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAtIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi52b3RlcnNbcG93ZXJfb3duZXJdID0gcG93ZXJfb3duZXJfdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfYW1vdW50LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgZGVsIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUuYnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1Nihwcm9wb3NhbF90aXRsZSArIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLnByb3Bvc2Fscy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGUoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgYWNjb3VudC5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBhY2NvdW50OiBBY2NvdW50LAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBhY2NvdW50LmJ5dGVzKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fcHJvcG9zZSgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlID0gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBwcm9wb3NhbF9ub2RlIG5vdCBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzIgogICAgZGlnIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo4OTkKICAgIC8vIGFzc2VydCBwcm9wb3NhbF9ub2RlIG5vdCBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzIgogICAgYXNzZXJ0IC8vIFByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MDAKICAgIC8vIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICBkdXAKICAgIGNhbGxzdWIgX2dldF9wcm9wb3NhbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTAxCiAgICAvLyBwcm9wb3NhbF9pbmRleCA9IHNlbGYucHJvcG9zYWxfY291bnQgKyAxCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTg5CiAgICAvLyBzZWxmLnByb3Bvc2FsX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInByb3Bvc2FsX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTAxCiAgICAvLyBwcm9wb3NhbF9pbmRleCA9IHNlbGYucHJvcG9zYWxfY291bnQgKyAxCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYucHJvcG9zYWxfY291bnQgZXhpc3RzCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTAyCiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF9pbmRleCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2luZGV4KQogICAgZHVwCiAgICBpdG9iCiAgICB1bmNvdmVyIDIKICAgIGludCAwCiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MDMKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19QRU5ESU5HKQogICAgaW50IDgKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTA0CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NlciA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgdHhuIFNlbmRlcgogICAgY292ZXIgMQogICAgaW50IDE2CiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MDUKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3RpdGxlID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX3RpdGxlKQogICAgZnJhbWVfZGlnIC00CiAgICBjb3ZlciAxCiAgICBpbnQgNDgKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjkwNgogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfZGVzY3JpcHRpb24gPSBCeXRlczUxMi5mcm9tX2J5dGVzKHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgZnJhbWVfZGlnIC0zCiAgICBjb3ZlciAxCiAgICBpbnQgMTEyCiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MDcKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIGRpZyAyCiAgICBjb3ZlciAxCiAgICBpbnQgNjI0CiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MDgKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX2NhdGVnb3J5X2lkID0gYXJjNC5VSW50NjQocHJvcG9zYWxfY2F0ZWdvcnlfaWQpCiAgICBmcmFtZV9kaWcgLTIKICAgIGl0b2IKICAgIHVuY292ZXIgMQogICAgaW50IDY1NgogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTA5CiAgICAvLyBwcm9wb3NhbC5jcmVhdGVkX2F0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgZ2xvYmFsIExhdGVzdFRpbWVzdGFtcAogICAgaXRvYgogICAgdW5jb3ZlciAxCiAgICBpbnQgNzQ0CiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MTEKICAgIC8vIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX0RBWQogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgODY0MDAKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjkxMC05MTIKICAgIC8vIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9EQVkKICAgIC8vICkKICAgIGl0b2IKICAgIHVuY292ZXIgMQogICAgaW50IDc1MgogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTE0CiAgICAvLyBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLICsgU0VDT05EU19QRVJfREFZCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCA2MDQ4MDAKICAgICsKICAgIGludCA4NjQwMAogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTEzLTkxNQogICAgLy8gcHJvcG9zYWwudm90aW5nX2VuZF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLICsgU0VDT05EU19QRVJfREFZCiAgICAvLyApCiAgICBpdG9iCiAgICB1bmNvdmVyIDEKICAgIGludCA3NjAKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjkxNwogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZCA9IGFyYzQuVUludDY0KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICBjYWxsc3ViIF9nZXRfcXVvcnVtX3RocmVzaG9sZAogICAgZHVwCiAgICBsZW4KICAgIGludCA4CiAgICA8PQogICAgYXNzZXJ0IC8vIG92ZXJmbG93CiAgICBpbnQgOAogICAgYnplcm8KICAgIGJ8CiAgICB1bmNvdmVyIDEKICAgIGludCA4MjQKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTE4CiAgICAvLyBzZWxmLnByb3Bvc2Fsc1twcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgZGlnIDMKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1ODkKICAgIC8vIHNlbGYucHJvcG9zYWxfY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAicHJvcG9zYWxfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MTkKICAgIC8vIHNlbGYucHJvcG9zYWxfY291bnQgPSBwcm9wb3NhbF9pbmRleAogICAgdW5jb3ZlciAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTIxLTkyMwogICAgLy8gUHJvcG9zYWxDcmVhdGVkKAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU9cHJvcG9zYWxfbm9kZSwKICAgIC8vICkKICAgIGJ5dGUgMHgKICAgIGRpZyAxCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjkyMC05MjQKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBQcm9wb3NhbENyZWF0ZWQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX25vZGU9cHJvcG9zYWxfbm9kZSwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIlByb3Bvc2FsQ3JlYXRlZChieXRlWzMyXSkiCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MjUKICAgIC8vIHJldHVybiBwcm9wb3NhbF9ub2RlCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9nZXRfcXVvcnVtX3RocmVzaG9sZCgpIC0+IGJ5dGVzOgpfZ2V0X3F1b3J1bV90aHJlc2hvbGQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzE4LTEzMTkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9xdW9ydW1fdGhyZXNob2xkKHNlbGYpIC0+IEJpZ1VJbnQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzMjIKICAgIC8vIHJldHVybiAoc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKiBzZWxmLnF1b3J1bV9yZXF1aXJlbWVudCkgLy8gQmlnVUludCgxMDAwMCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTIKICAgIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gQmlnVUludCgpCiAgICBieXRlICJ0b3RhbF92b3RpbmdfcG93ZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzIyCiAgICAvLyByZXR1cm4gKHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICogc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQpIC8vIEJpZ1VJbnQoMTAwMDApCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIGV4aXN0cwogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5NAogICAgLy8gc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQgPSAoCiAgICBieXRlICJxdW9ydW1fcmVxdWlyZW1lbnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzIyCiAgICAvLyByZXR1cm4gKHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICogc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQpIC8vIEJpZ1VJbnQoMTAwMDApCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYucXVvcnVtX3JlcXVpcmVtZW50IGV4aXN0cwogICAgYioKICAgIGJ5dGUgMHgyNzEwCiAgICBiLwogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5hY3RpdmF0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlOiBieXRlcykgLT4gdm9pZDoKYWN0aXZhdGVfcHJvcG9zYWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MjYtOTMwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsCiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjkzMQogICAgLy8gc2VsZi5fYWN0aXZhdGVfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfYWN0aXZhdGVfcHJvcG9zYWwKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2FjdGl2YXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiB2b2lkOgpfYWN0aXZhdGVfcHJvcG9zYWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MzItOTM2CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5MzcKICAgIC8vIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGR1cAogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAtOTM4CiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICAvLyAgICAgc2VsZi52b3RlcyA9IEJveE1hcChCeXRlczY0LCBVSW50NjQsIGtleV9wcmVmaXg9YiIiKQogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgVUludDY0LCBQb3dlclNvdXJjZSwga2V5X3ByZWZpeD1iInFfIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzID0gQm94TWFwKAogICAgLy8gICAgICAgICBCeXRlczY0LCBQb3dlckxvY2ssIGtleV9wcmVmaXg9YiJsXyIKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hZGRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBub3QgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX3NvdXJjZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9cG93ZXJfc291cmNlX2lkLAogICAgLy8gICAgICAgICBkZWZhdWx0PVBvd2VyU291cmNlKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLCBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHRoZSBib251cyBtdWx0aXBsaWVyIGJhc2VkIG9uIGxvY2t1cCBkdXJhdGlvbiIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xvY2t1cF90aWVyX2luZm8oc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IHR1cGxlW1VJbnQ2NCwgVUludDY0XToKICAgIC8vICAgICAiIiJHZXQgbG9ja3VwIHRpZXIgaW5mb3JtYXRpb246ICh0aWVyX251bWJlciwgYm9udXNfbXVsdGlwbGllcikiIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg0KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDMpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMiksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKSkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgxKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VwZGF0ZV9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IGFyYzQuVUludDI1NiwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9sb2NrX3Bvd2VyKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50Lm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IEJpZ1VJbnQsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJDYW5ub3QgbG9jayBwb3dlciBpbiB0aGUgcGFzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wICsgU0VDT05EU19QRVJfV0VFSwogICAgLy8gICAgICksICJQb3dlciBsb2NrIG11c3QgYmUgYXQgbGVhc3QgMSB3ZWVrIgogICAgLy8gCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uID0gcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCAtIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIgPSBzZWxmLl9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbgogICAgLy8gICAgICkKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIHBvd2VyX3NvdXJjZSA9IHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkKQogICAgLy8gICAgIHBvd2VyX2xvY2tfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX2xvY2tfa2V5IG5vdCBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBhbHJlYWR5IGV4aXN0cyIKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9ICgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudAogICAgLy8gICAgICAgICAqIChwb3dlcl9zb3VyY2UucG93ZXJfbXVsdGlwbGllci5uYXRpdmUgKyBsb2NrdXBfYm9udXNfbXVsdGlwbGllcikKICAgIC8vICAgICApIC8vIEJpZ1VJbnQoMTAwMDApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2Nrc1twb3dlcl9sb2NrX2tleV0gPSBQb3dlckxvY2soCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KHBvd2VyX2dyYW50ZWQpLAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQobG9ja3VwX2R1cmF0aW9uKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQobG9ja3VwX2JvbnVzX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgbmV3X3ZvdGVfcG93ZXIgPSB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSArIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICB2b3Rlci52b3Rlcl9hZGRyZXNzID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgdm90ZXIudm90ZV9wb3dlciA9IGFyYzQuVUludDI1NihuZXdfdm90ZV9wb3dlcikKICAgIC8vICAgICBzZWxmLnZvdGVyc1tUeG4uc2VuZGVyXSA9IHZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciArIHBvd2VyX2dyYW50ZWQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfbG9ja3MuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICAgICBkZWZhdWx0PVBvd2VyTG9jaygKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1bmxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91bmxvY2tfcG93ZXIocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91bmxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHBvd2VyX2xvY2tfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX2xvY2tfa2V5IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHBvd2VyX2xvY2sgPSBzZWxmLl9nZXRfcG93ZXJfbG9jayhwb3dlcl9zb3VyY2VfaWQsIHBvd2VyX3VubG9ja190aW1lc3RhbXApCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSA8PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJQb3dlciBsb2NrIGlzIG5vdCB5ZXQgdW5sb2NrZWQiCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9vd25lciA9IHBvd2VyX2xvY2sucG93ZXJfc291cmNlX293bmVyLm5hdGl2ZQogICAgLy8gICAgIHBvd2VyX293bmVyX3ZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKHBvd2VyX293bmVyKQogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSBwb3dlcl9sb2NrLnBvd2VyX2dyYW50ZWQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkIDw9IHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKSwgIk5vdCBlbm91Z2ggdm90aW5nIHBvd2VyIgogICAgLy8gICAgIHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIubmF0aXZlIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnZvdGVyc1twb3dlcl9vd25lcl0gPSBwb3dlcl9vd25lcl92b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgLSBwb3dlcl9ncmFudGVkCiAgICAvLyAKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX293bmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9hbW91bnQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBkZWwgc2VsZi5wb3dlcl9sb2Nrc1twb3dlcl9sb2NrX2tleV0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzNjQsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMgogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcHJvcG9zYWxfbm9kZShwcm9wb3NhbF90aXRsZS5ieXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb24uYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWxfbm9kZSgKICAgIC8vICAgICBzZWxmLCBwcm9wb3NhbF90aXRsZTogQnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlcwogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBCeXRlczMyLmZyb21fYnl0ZXMob3Auc2hhMjU2KHByb3Bvc2FsX3RpdGxlICsgcHJvcG9zYWxfZGVzY3JpcHRpb24pKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucHJvcG9zYWxzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qcm9wb3NhbCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMob3AuYnplcm8oNTEyKSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF95ZXNfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF95ZXNfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHZvdGluZ19zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3RpbmdfZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgICAgICAgICAgZXhlY3V0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgZXhlY3V0aW9uX3R4bl9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX21ldD1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBhY2NvdW50Lm5hdGl2ZSkpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIGFjY291bnQ6IEFjY291bnQsCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi52b3Rlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSArIGFjY291bnQuYnl0ZXMpLAogICAgLy8gICAgICAgICBkZWZhdWx0PVVJbnQ2NCgyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBwcm9wb3NlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzNjQsCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzNTEyLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9wcm9wb3NlKAogICAgLy8gICAgICAgICBwcm9wb3NhbF90aXRsZS5ieXRlcywKICAgIC8vICAgICAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb24uYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9wcm9wb3NlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogVUludDY0LAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHByb3Bvc2FsX25vZGUgPSBzZWxmLl9nZXRfcHJvcG9zYWxfbm9kZShwcm9wb3NhbF90aXRsZSwgcHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgYXNzZXJ0IHByb3Bvc2FsX25vZGUgbm90IGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgSUQgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbF9pbmRleCA9IHNlbGYucHJvcG9zYWxfY291bnQgKyAxCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfaW5kZXggPSBhcmM0LlVJbnQ2NChwcm9wb3NhbF9pbmRleCkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfUEVORElORykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NlciA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RpdGxlID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX3RpdGxlKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2Rlc2NyaXB0aW9uID0gQnl0ZXM1MTIuZnJvbV9ieXRlcyhwcm9wb3NhbF9kZXNjcmlwdGlvbikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfY2F0ZWdvcnlfaWQgPSBhcmM0LlVJbnQ2NChwcm9wb3NhbF9jYXRlZ29yeV9pZCkKICAgIC8vICAgICBwcm9wb3NhbC5jcmVhdGVkX2F0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb3Bvc2FsLnZvdGluZ19lbmRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsgKyBTRUNPTkRTX1BFUl9EQVkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkID0gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3F1b3J1bV90aHJlc2hvbGQoKSkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1twcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxfY291bnQgPSBwcm9wb3NhbF9pbmRleAogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgUHJvcG9zYWxDcmVhdGVkKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1wcm9wb3NhbF9ub2RlLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBwcm9wb3NhbF9ub2RlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWN0aXZhdGVfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FjdGl2YXRlX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBib3hfbGVuCiAgICBjb3ZlciAxCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjkzOAogICAgLy8gYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICBhc3NlcnQgLy8gUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjkzOQogICAgLy8gcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3Byb3Bvc2FsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5NDEKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIGR1cAogICAgaW50IDgKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAwCiAgICA9PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTQwLTk0MgogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyApLCAiUHJvcG9zYWwgaXMgbm90IHBlbmRpbmciCiAgICBhc3NlcnQgLy8gUHJvcG9zYWwgaXMgbm90IHBlbmRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk0NQogICAgLy8gcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgZHVwCiAgICBpbnQgNzUyCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCiAgICA+CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5NDQtOTQ2CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3Qgc3RhcnRlZCB5ZXQiCiAgICBhc3NlcnQgLy8gVm90aW5nIHBlcmlvZCBoYXMgbm90IHN0YXJ0ZWQgeWV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5NDgKICAgIC8vIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICB0eG4gU2VuZGVyCiAgICBjYWxsc3ViIF9nZXRfdm90ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk0OQogICAgLy8gYXNzZXJ0IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlID4gMCwgIllvdSBoYXZlIG5vIHZvdGluZyBwb3dlciIKICAgIGR1cAogICAgaW50IDMyCiAgICBpbnQgMzIKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnl0ZSAweAogICAgYj4KICAgIGFzc2VydCAvLyBZb3UgaGF2ZSBubyB2b3RpbmcgcG93ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk1MgogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgZGlnIDEKICAgIGludCA3MTIKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICB1bmNvdmVyIDEKICAgIGludCAzMgogICAgaW50IDMyCiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGIrCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5NTQKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X2FjdGl2YXRpb25fcG93ZXIpCiAgICBkdXAKICAgIGxlbgogICAgaW50IDMyCiAgICA8PQogICAgYXNzZXJ0IC8vIG92ZXJmbG93CiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBkaWcgMQogICAgdW5jb3ZlciAxCiAgICBifAogICAgdW5jb3ZlciAyCiAgICBpbnQgNzEyCiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk1NgogICAgLy8gaWYgbmV3X2FjdGl2YXRpb25fcG93ZXIgPj0gc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTMKICAgIC8vIHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQgPSBCaWdVSW50KCkKICAgIGJ5dGUgImFjdGl2YXRpb25fdGhyZXNob2xkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTU2CiAgICAvLyBpZiBuZXdfYWN0aXZhdGlvbl9wb3dlciA+PSBzZWxmLmFjdGl2YXRpb25fdGhyZXNob2xkOgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmFjdGl2YXRpb25fdGhyZXNob2xkIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICB1bmNvdmVyIDEKICAgIGI+PQogICAgYnogX2FjdGl2YXRlX3Byb3Bvc2FsX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTU4CiAgICAvLyBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgZ2xvYmFsIExhdGVzdFRpbWVzdGFtcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTU3LTk1OQogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gKQogICAgaXRvYgogICAgZnJhbWVfZGlnIDEKICAgIGludCA4MTYKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk2MAogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0FDVElWRSkKICAgIGludCA4CiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMQogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk2MgogICAgLy8gc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCArIDEKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTcKICAgIC8vIHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgImFjdGl2ZV9wcm9wb3NhbF9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk2MgogICAgLy8gc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCArIDEKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgZXhpc3RzCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTk3CiAgICAvLyBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJhY3RpdmVfcHJvcG9zYWxfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5NjIKICAgIC8vIHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ID0gc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgKyAxCiAgICB1bmNvdmVyIDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICBmcmFtZV9idXJ5IDIKCl9hY3RpdmF0ZV9wcm9wb3NhbF9hZnRlcl9pZl9lbHNlQDI6CiAgICBmcmFtZV9kaWcgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5NjQKICAgIC8vIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgZnJhbWVfZGlnIDAKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmNhc3Rfdm90ZShwcm9wb3NhbF9ub2RlOiBieXRlcywgc3VwcG9ydDogYnl0ZXMpIC0+IHZvaWQ6CmNhc3Rfdm90ZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk2NS05NzAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsCiAgICAvLyAgICAgc3VwcG9ydDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICBwcm90byAyIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk3MQogICAgLy8gc2VsZi5fY2FzdF92b3RlKHByb3Bvc2FsX25vZGUuYnl0ZXMsIHN1cHBvcnQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTIKICAgIHVuY292ZXIgMQogICAgY2FsbHN1YiBfY2FzdF92b3RlCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9jYXN0X3ZvdGUocHJvcG9zYWxfbm9kZTogYnl0ZXMsIHN1cHBvcnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2Nhc3Rfdm90ZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk3Mi05NzcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Nhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIHN1cHBvcnQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTc4CiAgICAvLyBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgZnJhbWVfZGlnIC0yCiAgICBkdXAKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk3OQogICAgLy8gdm90ZV9rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSArIFR4bi5zZW5kZXIuYnl0ZXMpCiAgICB0eG4gU2VuZGVyCiAgICBmcmFtZV9kaWcgLTIKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTEKICAgIC8vIHNlbGYudm90ZXMgPSBCb3hNYXAoQnl0ZXM2NCwgVUludDY0LCBrZXlfcHJlZml4PWIiIikKICAgIGJ5dGUgMHgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMS05ODAKICAgIC8vICAgICBzZWxmLnZvdGVzID0gQm94TWFwKEJ5dGVzNjQsIFVJbnQ2NCwga2V5X3ByZWZpeD1iIiIpCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzID0gQm94TWFwKAogICAgLy8gICAgICAgICBVSW50NjQsIFBvd2VyU291cmNlLCBrZXlfcHJlZml4PWIicV8iCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3MgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfc291cmNlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1wb3dlcl9zb3VyY2VfaWQsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgdGhlIGJvbnVzIG11bHRpcGxpZXIgYmFzZWQgb24gbG9ja3VwIGR1cmF0aW9uIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfaW5mbyhzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gdHVwbGVbVUludDY0LCBVSW50NjRdOgogICAgLy8gICAgICIiIkdldCBsb2NrdXAgdGllciBpbmZvcm1hdGlvbjogKHRpZXJfbnVtYmVyLCBib251c19tdWx0aXBsaWVyKSIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg1KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDQpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMyksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgyKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDEpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIkNhbm5vdCBsb2NrIHBvd2VyIGluIHRoZSBwYXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgbXVzdCBiZSBhdCBsZWFzdCAxIHdlZWsiCiAgICAvLyAKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb24gPSBwb3dlcl91bmxvY2tfdGltZXN0YW1wIC0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllciA9IHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcG93ZXJfc291cmNlID0gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQpCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgbm90IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGFscmVhZHkgZXhpc3RzIgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAgICAgICAgICogKHBvd2VyX3NvdXJjZS5wb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSArIGxvY2t1cF9ib251c19tdWx0aXBsaWVyKQogICAgLy8gICAgICkgLy8gQmlnVUludCgxMDAwMCkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XSA9IFBvd2VyTG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYocG93ZXJfZ3JhbnRlZCksCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NChsb2NrdXBfZHVyYXRpb24pLAogICAgLy8gICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChsb2NrdXBfYm9udXNfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBuZXdfdm90ZV9wb3dlciA9IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gICAgIHZvdGVyLnZvdGVyX2FkZHJlc3MgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICB2b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld192b3RlX3Bvd2VyKQogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9sb2Nrcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJMb2NrKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VubG9ja19wb3dlcihwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9jayA9IHNlbGYuX2dldF9wb3dlcl9sb2NrKHBvd2VyX3NvdXJjZV9pZCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgaXMgbm90IHlldCB1bmxvY2tlZCIKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX293bmVyID0gcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIubmF0aXZlCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIocG93ZXJfb3duZXIpCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9IHBvd2VyX2xvY2sucG93ZXJfZ3JhbnRlZC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2dyYW50ZWQgPD0gcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApLCAiTm90IGVub3VnaCB2b3RpbmcgcG93ZXIiCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgLSBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudm90ZXJzW3Bvd2VyX293bmVyXSA9IHBvd2VyX293bmVyX3ZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciAtIHBvd2VyX2dyYW50ZWQKICAgIC8vIAogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIsCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX2Ftb3VudCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGRlbCBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfbm9kZSgKICAgIC8vICAgICBzZWxmLCBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzNTEyCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLmJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5zaGEyNTYocHJvcG9zYWxfdGl0bGUgKyBwcm9wb3NhbF9kZXNjcmlwdGlvbikpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wcm9wb3NhbHMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3RlKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF92b3RlKHByb3Bvc2FsX25vZGUuYnl0ZXMsIGFjY291bnQubmF0aXZlKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyAgICAgYWNjb3VudDogQWNjb3VudCwKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLnZvdGVzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgYWNjb3VudC5ieXRlcyksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9VUludDY0KDIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHByb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3Byb3Bvc2UoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3RpdGxlLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcywKICAgIC8vICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3Byb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkOiBVSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZSA9IHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLCBwcm9wb3NhbF9kZXNjcmlwdGlvbikKICAgIC8vICAgICBhc3NlcnQgcHJvcG9zYWxfbm9kZSBub3QgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBJRCBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4ID0gc2VsZi5wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9pbmRleCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2luZGV4KQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19QRU5ESU5HKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2VyID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdGl0bGUgPSBCeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfdGl0bGUpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfZGVzY3JpcHRpb24gPSBCeXRlczUxMi5mcm9tX2J5dGVzKHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9jYXRlZ29yeV9pZCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2NhdGVnb3J5X2lkKQogICAgLy8gICAgIHByb3Bvc2FsLmNyZWF0ZWRfYXRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9EQVkKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX2VuZF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wICsgU0VDT05EU19QRVJfV0VFSyArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQgPSBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcXVvcnVtX3RocmVzaG9sZCgpKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbF9jb3VudCA9IHByb3Bvc2FsX2luZGV4CiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBQcm9wb3NhbENyZWF0ZWQoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9ub2RlPXByb3Bvc2FsX25vZGUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHByb3Bvc2FsX25vZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFjdGl2YXRlX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hY3RpdmF0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUEVORElORwogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcGVuZGluZyIKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiVm90aW5nIHBlcmlvZCBoYXMgbm90IHN0YXJ0ZWQgeWV0IgogICAgLy8gCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBhc3NlcnQgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPiAwLCAiWW91IGhhdmUgbm8gdm90aW5nIHBvd2VyIgogICAgLy8gCiAgICAvLyAgICAgbmV3X2FjdGl2YXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlciA9IGFyYzQuVUludDI1NihuZXdfYWN0aXZhdGlvbl9wb3dlcikKICAgIC8vIAogICAgLy8gICAgIGlmIG5ld19hY3RpdmF0aW9uX3Bvd2VyID49IHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQ6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgICAgICBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19BQ1RJVkUpCiAgICAvLyAKICAgIC8vICAgICAgICAgc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FzdF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICAgICBzdXBwb3J0OiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9jYXN0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgc3VwcG9ydC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBzdXBwb3J0OiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICB2b3RlX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgVHhuLnNlbmRlci5ieXRlcykKICAgIC8vICAgICBhc3NlcnQgdm90ZV9rZXkgbm90IGluIHNlbGYudm90ZXMsICJZb3UgaGF2ZSBhbHJlYWR5IHZvdGVkIgogICAgZGlnIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5ODAKICAgIC8vIGFzc2VydCB2b3RlX2tleSBub3QgaW4gc2VsZi52b3RlcywgIllvdSBoYXZlIGFscmVhZHkgdm90ZWQiCiAgICBhc3NlcnQgLy8gWW91IGhhdmUgYWxyZWFkeSB2b3RlZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAtOTgxCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICAvLyAgICAgc2VsZi52b3RlcyA9IEJveE1hcChCeXRlczY0LCBVSW50NjQsIGtleV9wcmVmaXg9YiIiKQogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgVUludDY0LCBQb3dlclNvdXJjZSwga2V5X3ByZWZpeD1iInFfIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzID0gQm94TWFwKAogICAgLy8gICAgICAgICBCeXRlczY0LCBQb3dlckxvY2ssIGtleV9wcmVmaXg9YiJsXyIKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hZGRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBub3QgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9zb3VyY2Uoc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX3NvdXJjZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9cG93ZXJfc291cmNlX2lkLAogICAgLy8gICAgICAgICBkZWZhdWx0PVBvd2VyU291cmNlKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLCBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHRoZSBib251cyBtdWx0aXBsaWVyIGJhc2VkIG9uIGxvY2t1cCBkdXJhdGlvbiIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xvY2t1cF90aWVyX2luZm8oc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IHR1cGxlW1VJbnQ2NCwgVUludDY0XToKICAgIC8vICAgICAiIiJHZXQgbG9ja3VwIHRpZXIgaW5mb3JtYXRpb246ICh0aWVyX251bWJlciwgYm9udXNfbXVsdGlwbGllcikiIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg0KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzNfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDMpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMykpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMiksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKSkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgxKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VwZGF0ZV9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IGFyYzQuVUludDI1NiwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9sb2NrX3Bvd2VyKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50Lm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IEJpZ1VJbnQsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJDYW5ub3QgbG9jayBwb3dlciBpbiB0aGUgcGFzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wICsgU0VDT05EU19QRVJfV0VFSwogICAgLy8gICAgICksICJQb3dlciBsb2NrIG11c3QgYmUgYXQgbGVhc3QgMSB3ZWVrIgogICAgLy8gCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uID0gcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCAtIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIgPSBzZWxmLl9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbgogICAgLy8gICAgICkKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIHBvd2VyX3NvdXJjZSA9IHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkKQogICAgLy8gICAgIHBvd2VyX2xvY2tfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX2xvY2tfa2V5IG5vdCBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBhbHJlYWR5IGV4aXN0cyIKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9ICgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudAogICAgLy8gICAgICAgICAqIChwb3dlcl9zb3VyY2UucG93ZXJfbXVsdGlwbGllci5uYXRpdmUgKyBsb2NrdXBfYm9udXNfbXVsdGlwbGllcikKICAgIC8vICAgICApIC8vIEJpZ1VJbnQoMTAwMDApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2Nrc1twb3dlcl9sb2NrX2tleV0gPSBQb3dlckxvY2soCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KHBvd2VyX2dyYW50ZWQpLAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQobG9ja3VwX2R1cmF0aW9uKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQobG9ja3VwX2JvbnVzX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXJGcm9tLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgbmV3X3ZvdGVfcG93ZXIgPSB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSArIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICB2b3Rlci52b3Rlcl9hZGRyZXNzID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgdm90ZXIudm90ZV9wb3dlciA9IGFyYzQuVUludDI1NihuZXdfdm90ZV9wb3dlcikKICAgIC8vICAgICBzZWxmLnZvdGVyc1tUeG4uc2VuZGVyXSA9IHZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciArIHBvd2VyX2dyYW50ZWQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfbG9ja3MuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICAgICBkZWZhdWx0PVBvd2VyTG9jaygKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBsb2NrdXBfZHVyYXRpb249YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1bmxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91bmxvY2tfcG93ZXIocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF91bmxvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHBvd2VyX2xvY2tfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX2xvY2tfa2V5IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHBvd2VyX2xvY2sgPSBzZWxmLl9nZXRfcG93ZXJfbG9jayhwb3dlcl9zb3VyY2VfaWQsIHBvd2VyX3VubG9ja190aW1lc3RhbXApCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSA8PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJQb3dlciBsb2NrIGlzIG5vdCB5ZXQgdW5sb2NrZWQiCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9vd25lciA9IHBvd2VyX2xvY2sucG93ZXJfc291cmNlX293bmVyLm5hdGl2ZQogICAgLy8gICAgIHBvd2VyX293bmVyX3ZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKHBvd2VyX293bmVyKQogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSBwb3dlcl9sb2NrLnBvd2VyX2dyYW50ZWQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkIDw9IHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKSwgIk5vdCBlbm91Z2ggdm90aW5nIHBvd2VyIgogICAgLy8gICAgIHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHBvd2VyX293bmVyX3ZvdGVyLnZvdGVfcG93ZXIubmF0aXZlIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLnZvdGVyc1twb3dlcl9vd25lcl0gPSBwb3dlcl9vd25lcl92b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgLSBwb3dlcl9ncmFudGVkCiAgICAvLyAKICAgIC8vICAgICBhcmM0LmFiaV9jYWxsKAogICAgLy8gICAgICAgICBBUkMyMDBUb2tlbkludGVyZmFjZS5hcmMyMDBfdHJhbnNmZXIsCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX293bmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9hbW91bnQsCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBkZWwgc2VsZi5wb3dlcl9sb2Nrc1twb3dlcl9sb2NrX2tleV0KICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzNjQsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMgogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcHJvcG9zYWxfbm9kZShwcm9wb3NhbF90aXRsZS5ieXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb24uYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWxfbm9kZSgKICAgIC8vICAgICBzZWxmLCBwcm9wb3NhbF90aXRsZTogQnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlcwogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBCeXRlczMyLmZyb21fYnl0ZXMob3Auc2hhMjU2KHByb3Bvc2FsX3RpdGxlICsgcHJvcG9zYWxfZGVzY3JpcHRpb24pKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucHJvcG9zYWxzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qcm9wb3NhbCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMob3AuYnplcm8oNjQpKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMob3AuYnplcm8oNTEyKSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF95ZXNfdm90ZXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90b3RhbF9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF95ZXNfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHZvdGluZ19zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3RpbmdfZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGlvbl9oYXNoPUJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5iemVybygzMikpLAogICAgLy8gICAgICAgICAgICAgZXhlY3V0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgZXhlY3V0aW9uX3R4bl9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX21ldD1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBhY2NvdW50Lm5hdGl2ZSkpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIGFjY291bnQ6IEFjY291bnQsCiAgICAvLyApIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi52b3Rlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSArIGFjY291bnQuYnl0ZXMpLAogICAgLy8gICAgICAgICBkZWZhdWx0PVVJbnQ2NCgyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBwcm9wb3NlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzNjQsCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzNTEyLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9wcm9wb3NlKAogICAgLy8gICAgICAgICBwcm9wb3NhbF90aXRsZS5ieXRlcywKICAgIC8vICAgICAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb24uYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9wcm9wb3NlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogVUludDY0LAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHByb3Bvc2FsX25vZGUgPSBzZWxmLl9nZXRfcHJvcG9zYWxfbm9kZShwcm9wb3NhbF90aXRsZSwgcHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgYXNzZXJ0IHByb3Bvc2FsX25vZGUgbm90IGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgSUQgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbF9pbmRleCA9IHNlbGYucHJvcG9zYWxfY291bnQgKyAxCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfaW5kZXggPSBhcmM0LlVJbnQ2NChwcm9wb3NhbF9pbmRleCkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfUEVORElORykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NlciA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RpdGxlID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX3RpdGxlKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2Rlc2NyaXB0aW9uID0gQnl0ZXM1MTIuZnJvbV9ieXRlcyhwcm9wb3NhbF9kZXNjcmlwdGlvbikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfY2F0ZWdvcnlfaWQgPSBhcmM0LlVJbnQ2NChwcm9wb3NhbF9jYXRlZ29yeV9pZCkKICAgIC8vICAgICBwcm9wb3NhbC5jcmVhdGVkX2F0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb3Bvc2FsLnZvdGluZ19lbmRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsgKyBTRUNPTkRTX1BFUl9EQVkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkID0gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3F1b3J1bV90aHJlc2hvbGQoKSkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1twcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxfY291bnQgPSBwcm9wb3NhbF9pbmRleAogICAgLy8gICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgUHJvcG9zYWxDcmVhdGVkKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1wcm9wb3NhbF9ub2RlLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gICAgIHJldHVybiBwcm9wb3NhbF9ub2RlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWN0aXZhdGVfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FjdGl2YXRlX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHBlbmRpbmciCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSA+IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBwZXJpb2QgaGFzIG5vdCBzdGFydGVkIHlldCIKICAgIC8vIAogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgYXNzZXJ0IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlID4gMCwgIllvdSBoYXZlIG5vIHZvdGluZyBwb3dlciIKICAgIC8vIAogICAgLy8gICAgIG5ld19hY3RpdmF0aW9uX3Bvd2VyID0gKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X2FjdGl2YXRpb25fcG93ZXIpCiAgICAvLyAKICAgIC8vICAgICBpZiBuZXdfYWN0aXZhdGlvbl9wb3dlciA+PSBzZWxmLmFjdGl2YXRpb25fdGhyZXNob2xkOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICAgICAgR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfQUNUSVZFKQogICAgLy8gCiAgICAvLyAgICAgICAgIHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ID0gc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgKyAxCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsCiAgICAvLyAgICAgc3VwcG9ydDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fY2FzdF92b3RlKHByb3Bvc2FsX25vZGUuYnl0ZXMsIHN1cHBvcnQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FzdF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyAgICAgc3VwcG9ydDogVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgdm90ZV9rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSArIFR4bi5zZW5kZXIuYnl0ZXMpCiAgICAvLyAgICAgYXNzZXJ0IHZvdGVfa2V5IG5vdCBpbiBzZWxmLnZvdGVzLCAiWW91IGhhdmUgYWxyZWFkeSB2b3RlZCIKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIGRpZyAyCiAgICBjb25jYXQKICAgIGJveF9sZW4KICAgIGNvdmVyIDEKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTgxCiAgICAvLyBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIGFzc2VydCAvLyBQcm9wb3NhbCBkb2VzIG5vdCBleGlzdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTgyCiAgICAvLyB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgdHhuIFNlbmRlcgogICAgY2FsbHN1YiBfZ2V0X3ZvdGVyCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5ODQKICAgIC8vIGFzc2VydCBzdXBwb3J0IDwgMiwgIkludmFsaWQgdm90ZSIKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDIKICAgIDwKICAgIGFzc2VydCAvLyBJbnZhbGlkIHZvdGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTg2CiAgICAvLyBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0ucHJvcG9zYWxfc3RhdHVzID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIGRpZyAzCiAgICBjb25jYXQKICAgIGJveF9nZXQKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnByb3Bvc2FscyBlbnRyeSBleGlzdHMKICAgIGludCA4CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMQogICAgYj09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5ODUtOTg3CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXS5wcm9wb3NhbF9zdGF0dXMgPT0gUFJPUE9TQUxfU1RBVFVTX0FDVElWRQogICAgLy8gKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICBhc3NlcnQgLy8gUHJvcG9zYWwgaXMgbm90IGFjdGl2ZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5ODkKICAgIC8vIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXS52b3RpbmdfZW5kX3RpbWVzdGFtcC5uYXRpdmUKICAgIGRpZyAzCiAgICBjb25jYXQKICAgIGJveF9nZXQKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnByb3Bvc2FscyBlbnRyeSBleGlzdHMKICAgIGludCA3NjAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk5MAogICAgLy8gPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk4OS05OTAKICAgIC8vIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXS52b3RpbmdfZW5kX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICA+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTg4LTk5MQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0udm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICksICJWb3RpbmcgaGFzIGVuZGVkIgogICAgYXNzZXJ0IC8vIFZvdGluZyBoYXMgZW5kZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMQogICAgLy8gc2VsZi52b3RlcyA9IEJveE1hcChCeXRlczY0LCBVSW50NjQsIGtleV9wcmVmaXg9YiIiKQogICAgYnl0ZSAweAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6OTkzCiAgICAvLyBzZWxmLnZvdGVzW3ZvdGVfa2V5XSA9IHN1cHBvcnQKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk5NgogICAgLy8gdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgKyAxCiAgICBkdXAKICAgIGludCA3MgogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgaW50IDEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjk5NS05OTcKICAgIC8vIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkLm5hdGl2ZSArIDEKICAgIC8vICkKICAgIGl0b2IKICAgIHVuY292ZXIgMQogICAgaW50IDcyCiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5OTgKICAgIC8vIHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIGl0b2IKICAgIHVuY292ZXIgMQogICAgaW50IDgwCiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo5OTkKICAgIC8vIHZvdGVyLnZvdGVfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICBnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCiAgICBpdG9iCiAgICB1bmNvdmVyIDEKICAgIGludCA2NAogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTAwMAogICAgLy8gdm90ZXIubGFzdF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNvdmVyIDEKICAgIGludCA4OAogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgZHVwCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDAyCiAgICAvLyBzZWxmLnZvdGVyc1tUeG4uc2VuZGVyXSA9IHZvdGVyLmNvcHkoKQogICAgZHVwCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDkKICAgIC8vIHNlbGYudm90ZXJzID0gQm94TWFwKEFjY291bnQsIFZvdGVyLCBrZXlfcHJlZml4PWIidl8iKQogICAgYnl0ZSAweDc2NWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMDIKICAgIC8vIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDA0CiAgICAvLyBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChfcHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIHVuY292ZXIgMQogICAgY2FsbHN1YiBfZ2V0X3Byb3Bvc2FsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDA2CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgKyAxCiAgICBkdXAKICAgIGludCA2NjQKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAxCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDA1LTEwMDcKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlICsgMQogICAgLy8gKQogICAgaXRvYgogICAgdW5jb3ZlciAxCiAgICBpbnQgNjY0CiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDA5CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfdm90ZXMubmF0aXZlICsgc3VwcG9ydAogICAgZHVwCiAgICBpbnQgNjcyCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMDgtMTAxMAogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZSArIHN1cHBvcnQKICAgIC8vICkKICAgIGl0b2IKICAgIHVuY292ZXIgMQogICAgaW50IDY3MgogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTAxMwogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIGR1cAogICAgaW50IDY4MAogICAgaW50IDMyCiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHVuY292ZXIgMgogICAgaW50IDMyCiAgICBpbnQgMzIKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYisKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMTItMTAxNAogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICB1bmNvdmVyIDEKICAgIGludCA2ODAKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIGR1cAogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTAxNQogICAgLy8gaWYgc3VwcG9ydCA9PSAxOgogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMQogICAgPT0KICAgIGJ6IF9jYXN0X3ZvdGVfYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDE3CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIGZyYW1lX2RpZyAyCiAgICBkdXAKICAgIGludCA4NDEKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMQogICAgaW50IDMyCiAgICBpbnQgMzIKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYisKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMTYtMTAxOAogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc19wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gKQogICAgZHVwCiAgICBsZW4KICAgIGludCAzMgogICAgPD0KICAgIGFzc2VydCAvLyBvdmVyZmxvdwogICAgaW50IDMyCiAgICBiemVybwogICAgYnwKICAgIHVuY292ZXIgMQogICAgaW50IDg0MQogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgZnJhbWVfYnVyeSAzCgpfY2FzdF92b3RlX2FmdGVyX2lmX2Vsc2VAMjoKICAgIGZyYW1lX2RpZyAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAKICAgIC8vIHNlbGYucHJvcG9zYWxzID0gQm94TWFwKEJ5dGVzMzIsIFByb3Bvc2FsLCBrZXlfcHJlZml4PWIicF8iKQogICAgYnl0ZSAweDcwNWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMjAKICAgIC8vIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgZnJhbWVfZGlnIDAKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDIyCiAgICAvLyBzZWxmLnZvdGVfY291bnQgPSBzZWxmLnZvdGVfY291bnQgKyAxCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTkwCiAgICAvLyBzZWxmLnZvdGVfY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAidm90ZV9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMjIKICAgIC8vIHNlbGYudm90ZV9jb3VudCA9IHNlbGYudm90ZV9jb3VudCArIDEKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi52b3RlX2NvdW50IGV4aXN0cwogICAgaW50IDEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5MAogICAgLy8gc2VsZi52b3RlX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInZvdGVfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDIyCiAgICAvLyBzZWxmLnZvdGVfY291bnQgPSBzZWxmLnZvdGVfY291bnQgKyAxCiAgICB1bmNvdmVyIDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLnJlamVjdF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlOiBieXRlcykgLT4gdm9pZDoKcmVqZWN0X3Byb3Bvc2FsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTAyMy0xMDI0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiByZWplY3RfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTAyNgogICAgLy8gc2VsZi5fcmVqZWN0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX3JlamVjdF9wcm9wb3NhbAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5fcmVqZWN0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiB2b2lkOgpfcmVqZWN0X3Byb3Bvc2FsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTAyNy0xMDI4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWplY3RfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMjkKICAgIC8vIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGR1cAogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAtMTAzMAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzID0gQm94TWFwKEJ5dGVzMzIsIFByb3Bvc2FsLCBrZXlfcHJlZml4PWIicF8iKQogICAgLy8gICAgIHNlbGYudm90ZXMgPSBCb3hNYXAoQnl0ZXM2NCwgVUludDY0LCBrZXlfcHJlZml4PWIiIikKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiQ2Fubm90IGxvY2sgcG93ZXIgaW4gdGhlIHBhc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBtdXN0IGJlIGF0IGxlYXN0IDEgd2VlayIKICAgIC8vIAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbiA9IHBvd2VyX3VubG9ja190aW1lc3RhbXAgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb24KICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldID0gUG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICAvLyAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIG5ld192b3RlX3Bvd2VyID0gdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKyBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgdm90ZXIudm90ZXJfYWRkcmVzcyA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBpcyBub3QgeWV0IHVubG9ja2VkIgogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfb3duZXIgPSBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lci5uYXRpdmUKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3RlciA9IHNlbGYuX2dldF92b3Rlcihwb3dlcl9vd25lcikKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gcG93ZXJfbG9jay5wb3dlcl9ncmFudGVkLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZCA8PSBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICksICJOb3QgZW5vdWdoIHZvdGluZyBwb3dlciIKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAtIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi52b3RlcnNbcG93ZXJfb3duZXJdID0gcG93ZXJfb3duZXJfdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfYW1vdW50LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgZGVsIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUuYnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1Nihwcm9wb3NhbF90aXRsZSArIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLnByb3Bvc2Fscy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGUoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgYWNjb3VudC5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBhY2NvdW50OiBBY2NvdW50LAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBhY2NvdW50LmJ5dGVzKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fcHJvcG9zZSgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlID0gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBwcm9wb3NhbF9ub2RlIG5vdCBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXggPSBzZWxmLnByb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2luZGV4ID0gYXJjNC5VSW50NjQocHJvcG9zYWxfaW5kZXgpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zZXIgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90aXRsZSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF90aXRsZSkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9kZXNjcmlwdGlvbiA9IEJ5dGVzNTEyLmZyb21fYnl0ZXMocHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2NhdGVnb3J5X2lkID0gYXJjNC5VSW50NjQocHJvcG9zYWxfY2F0ZWdvcnlfaWQpCiAgICAvLyAgICAgcHJvcG9zYWwuY3JlYXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZCA9IGFyYzQuVUludDY0KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2FsX2NvdW50ID0gcHJvcG9zYWxfaW5kZXgKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFByb3Bvc2FsQ3JlYXRlZCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9cHJvcG9zYWxfbm9kZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FjdGl2YXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3Qgc3RhcnRlZCB5ZXQiCiAgICAvLyAKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSA+IDAsICJZb3UgaGF2ZSBubyB2b3RpbmcgcG93ZXIiCiAgICAvLyAKICAgIC8vICAgICBuZXdfYWN0aXZhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld19hY3RpdmF0aW9uX3Bvd2VyKQogICAgLy8gCiAgICAvLyAgICAgaWYgbmV3X2FjdGl2YXRpb25fcG93ZXIgPj0gc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgICAgIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0FDVElWRSkKICAgIC8vIAogICAgLy8gICAgICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gICAgIHN1cHBvcnQ6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2Nhc3Rfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBzdXBwb3J0Lm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Nhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIHN1cHBvcnQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIHZvdGVfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBUeG4uc2VuZGVyLmJ5dGVzKQogICAgLy8gICAgIGFzc2VydCB2b3RlX2tleSBub3QgaW4gc2VsZi52b3RlcywgIllvdSBoYXZlIGFscmVhZHkgdm90ZWQiCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCBzdXBwb3J0IDwgMiwgIkludmFsaWQgdm90ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0ucHJvcG9zYWxfc3RhdHVzID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IGFjdGl2ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0udm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgICAgID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBoYXMgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnZvdGVzW3ZvdGVfa2V5XSA9IHN1cHBvcnQKICAgIC8vIAogICAgLy8gICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci52b3RlX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKF9wcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSArIDEKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgKyBzdXBwb3J0CiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgIGlmIHN1cHBvcnQgPT0gMToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlX2NvdW50ID0gc2VsZi52b3RlX2NvdW50ICsgMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcmVqZWN0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSBwZW5kaW5nIHByb3Bvc2FsIHNob3VsZCBiZSByZWplY3RlZCBkdWUgdG8gaW5zdWZmaWNpZW50IGFjdGl2YXRpb24gdm90ZXMiIiIKICAgIC8vICAgICBzZWxmLl9yZWplY3RfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGJveF9sZW4KICAgIGNvdmVyIDEKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTAzMAogICAgLy8gYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICBhc3NlcnQgLy8gUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMzEKICAgIC8vIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9wcm9wb3NhbAogICAgZHVwCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMDMzCiAgICAvLyBpZiBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlICE9IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HOgogICAgaW50IDgKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAwCiAgICAhPQogICAgYnogX3JlamVjdF9wcm9wb3NhbF9hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMzQKICAgIC8vIHJldHVybgogICAgcmV0c3ViCgpfcmVqZWN0X3Byb3Bvc2FsX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMzYKICAgIC8vIGlmIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wOgogICAgZnJhbWVfZGlnIDEKICAgIGludCA3NTIKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIDw9CiAgICBieiBfcmVqZWN0X3Byb3Bvc2FsX2FmdGVyX2lmX2Vsc2VANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTAzOAogICAgLy8gaWYgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgPCBzZWxmLmFjdGl2YXRpb25fdGhyZXNob2xkOgogICAgZnJhbWVfZGlnIDEKICAgIGludCA3MTIKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTkzCiAgICAvLyBzZWxmLmFjdGl2YXRpb25fdGhyZXNob2xkID0gQmlnVUludCgpCiAgICBieXRlICJhY3RpdmF0aW9uX3RocmVzaG9sZCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEwMzgKICAgIC8vIGlmIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlIDwgc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZCBleGlzdHMKICAgIGI8CiAgICBieiBfcmVqZWN0X3Byb3Bvc2FsX2FmdGVyX2lmX2Vsc2VANQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTAzOQogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgZnJhbWVfZGlnIDEKICAgIGludCA4CiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMwogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTA0MAogICAgLy8gc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICBmcmFtZV9kaWcgMAogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGJveF9wdXQKCl9yZWplY3RfcHJvcG9zYWxfYWZ0ZXJfaWZfZWxzZUA1OgoKX3JlamVjdF9wcm9wb3NhbF9hZnRlcl9pZl9lbHNlQDY6CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmdldF9hY3RpdmVfcHJvcG9zYWxfY291bnQoKSAtPiBieXRlczoKZ2V0X2FjdGl2ZV9wcm9wb3NhbF9jb3VudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExODMtMTE4NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2FjdGl2ZV9wcm9wb3NhbF9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE4NgogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5NwogICAgLy8gc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAiYWN0aXZlX3Byb3Bvc2FsX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE4NgogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50KQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCBleGlzdHMKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X3RvdGFsX3ZvdGVyX2NvdW50KCkgLT4gYnl0ZXM6CmdldF90b3RhbF92b3Rlcl9jb3VudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExODctMTE4OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3RvdGFsX3ZvdGVyX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTkwCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi50b3RhbF92b3Rlcl9jb3VudCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTgKICAgIC8vIHNlbGYudG90YWxfdm90ZXJfY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAidG90YWxfdm90ZXJfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTkwCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi50b3RhbF92b3Rlcl9jb3VudCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b3RhbF92b3Rlcl9jb3VudCBleGlzdHMKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X3BhcnRpY2lwYXRpb25fcmF0ZSgpIC0+IGJ5dGVzOgpnZXRfcGFydGljaXBhdGlvbl9yYXRlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE5MS0xMTkyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcGFydGljaXBhdGlvbl9yYXRlKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMTk0CiAgICAvLyBpZiBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50ID09IDA6CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTk4CiAgICAvLyBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInRvdGFsX3ZvdGVyX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE5NAogICAgLy8gaWYgc2VsZi50b3RhbF92b3Rlcl9jb3VudCA9PSAwOgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50IGV4aXN0cwogICAgaW50IDAKICAgID09CiAgICBieiBnZXRfcGFydGljaXBhdGlvbl9yYXRlX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE5NQogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgcmV0c3ViCgpnZXRfcGFydGljaXBhdGlvbl9yYXRlX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExOTgKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKiAxMDAKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDYKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgPSAoCiAgICBieXRlICJ0b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExOTgKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKiAxMDAKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyBleGlzdHMKICAgIGludCAxMDAKICAgICoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExOTkKICAgIC8vICkgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudAogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5OAogICAgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJ0b3RhbF92b3Rlcl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjExOTkKICAgIC8vICkgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50IGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTE5Ny0xMTk5CiAgICAvLyBwYXJ0aWNpcGF0aW9uX3JhdGUgPSAoCiAgICAvLyAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyAqIDEwMAogICAgLy8gKSAvLyBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50CiAgICAvCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjAwCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQocGFydGljaXBhdGlvbl9yYXRlKQogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfcHJvcG9zYWxfcGFydGljaXBhdGlvbl9yYXRlKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3Byb3Bvc2FsX3BhcnRpY2lwYXRpb25fcmF0ZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMDEtMTIwMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3BhcnRpY2lwYXRpb25fcmF0ZShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIwNAogICAgLy8gX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAtMTIwNQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzID0gQm94TWFwKEJ5dGVzMzIsIFByb3Bvc2FsLCBrZXlfcHJlZml4PWIicF8iKQogICAgLy8gICAgIHNlbGYudm90ZXMgPSBCb3hNYXAoQnl0ZXM2NCwgVUludDY0LCBrZXlfcHJlZml4PWIiIikKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiQ2Fubm90IGxvY2sgcG93ZXIgaW4gdGhlIHBhc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBtdXN0IGJlIGF0IGxlYXN0IDEgd2VlayIKICAgIC8vIAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbiA9IHBvd2VyX3VubG9ja190aW1lc3RhbXAgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb24KICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldID0gUG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICAvLyAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIG5ld192b3RlX3Bvd2VyID0gdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKyBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgdm90ZXIudm90ZXJfYWRkcmVzcyA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBpcyBub3QgeWV0IHVubG9ja2VkIgogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfb3duZXIgPSBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lci5uYXRpdmUKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3RlciA9IHNlbGYuX2dldF92b3Rlcihwb3dlcl9vd25lcikKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gcG93ZXJfbG9jay5wb3dlcl9ncmFudGVkLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZCA8PSBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICksICJOb3QgZW5vdWdoIHZvdGluZyBwb3dlciIKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAtIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi52b3RlcnNbcG93ZXJfb3duZXJdID0gcG93ZXJfb3duZXJfdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfYW1vdW50LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgZGVsIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUuYnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1Nihwcm9wb3NhbF90aXRsZSArIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLnByb3Bvc2Fscy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGUoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgYWNjb3VudC5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBhY2NvdW50OiBBY2NvdW50LAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBhY2NvdW50LmJ5dGVzKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fcHJvcG9zZSgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlID0gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBwcm9wb3NhbF9ub2RlIG5vdCBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXggPSBzZWxmLnByb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2luZGV4ID0gYXJjNC5VSW50NjQocHJvcG9zYWxfaW5kZXgpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zZXIgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90aXRsZSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF90aXRsZSkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9kZXNjcmlwdGlvbiA9IEJ5dGVzNTEyLmZyb21fYnl0ZXMocHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2NhdGVnb3J5X2lkID0gYXJjNC5VSW50NjQocHJvcG9zYWxfY2F0ZWdvcnlfaWQpCiAgICAvLyAgICAgcHJvcG9zYWwuY3JlYXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZCA9IGFyYzQuVUludDY0KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2FsX2NvdW50ID0gcHJvcG9zYWxfaW5kZXgKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFByb3Bvc2FsQ3JlYXRlZCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9cHJvcG9zYWxfbm9kZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FjdGl2YXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3Qgc3RhcnRlZCB5ZXQiCiAgICAvLyAKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSA+IDAsICJZb3UgaGF2ZSBubyB2b3RpbmcgcG93ZXIiCiAgICAvLyAKICAgIC8vICAgICBuZXdfYWN0aXZhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld19hY3RpdmF0aW9uX3Bvd2VyKQogICAgLy8gCiAgICAvLyAgICAgaWYgbmV3X2FjdGl2YXRpb25fcG93ZXIgPj0gc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgICAgIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0FDVElWRSkKICAgIC8vIAogICAgLy8gICAgICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gICAgIHN1cHBvcnQ6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2Nhc3Rfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBzdXBwb3J0Lm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Nhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIHN1cHBvcnQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIHZvdGVfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBUeG4uc2VuZGVyLmJ5dGVzKQogICAgLy8gICAgIGFzc2VydCB2b3RlX2tleSBub3QgaW4gc2VsZi52b3RlcywgIllvdSBoYXZlIGFscmVhZHkgdm90ZWQiCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCBzdXBwb3J0IDwgMiwgIkludmFsaWQgdm90ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0ucHJvcG9zYWxfc3RhdHVzID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IGFjdGl2ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0udm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgICAgID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBoYXMgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnZvdGVzW3ZvdGVfa2V5XSA9IHN1cHBvcnQKICAgIC8vIAogICAgLy8gICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci52b3RlX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKF9wcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSArIDEKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgKyBzdXBwb3J0CiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgIGlmIHN1cHBvcnQgPT0gMToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlX2NvdW50ID0gc2VsZi52b3RlX2NvdW50ICsgMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcmVqZWN0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSBwZW5kaW5nIHByb3Bvc2FsIHNob3VsZCBiZSByZWplY3RlZCBkdWUgdG8gaW5zdWZmaWNpZW50IGFjdGl2YXRpb24gdm90ZXMiIiIKICAgIC8vICAgICBzZWxmLl9yZWplY3RfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlICE9IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HOgogICAgLy8gICAgICAgICByZXR1cm4KICAgIC8vIAogICAgLy8gICAgIGlmIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wOgogICAgLy8gCiAgICAvLyAgICAgICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlIDwgc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICAgICAgICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fY2FuY2VsX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYW5jZWxfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHBlbmRpbmciCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0NBTkNFTEVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJGaW5hbGl6ZSBhIHByb3Bvc2FsIGFmdGVyIHZvdGluZyBwZXJpb2QgZW5kcyIiIgogICAgLy8gCiAgICAvLyAgICAgcGFzcwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcC5uYXRpdmUgPCBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3QgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50IC0gMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPSBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciArIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPiAwOgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICAgICAgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMgPSBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUKICAgIC8vICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyA9ICgKICAgIC8vICAgICAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKyBlc3RpbWF0ZWRfdW5pcXVlX3ZvdGVycwogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBtZWV0c19xdW9ydW0gPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICA+PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9tZXQgPSBhcmM0LkJvb2wobWVldHNfcXVvcnVtKQogICAgLy8gICAgIGlmICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgIDwgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19OT1RfTUVUKQogICAgLy8gICAgIGVsaWYgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgPT0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19NRVQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfRVhDRUVERUQpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPT0gMDoKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfRVhQSVJFRCkKICAgIC8vICAgICBlbGlmIG5vdCBtZWV0c19xdW9ydW06CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgLy8gICAgIGVsaWYgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZSA+ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlIC0gcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZQogICAgLy8gICAgICk6CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRCkKICAgIC8vICAgICBlbHNlOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHF1ZXVlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiUXVldWUgYSBzdWNjZWVkZWQgcHJvcG9zYWwgZm9yIGV4ZWN1dGlvbiIiIgogICAgLy8gICAgIHNlbGYuX3F1ZXVlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9xdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHN1Y2NlZWRlZCIKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfUVVFVUVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZXhlY3V0ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIkV4ZWN1dGUgYSBxdWV1ZWQgcHJvcG9zYWwiIiIKICAgIC8vICAgICBzZWxmLl9leGVjdXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9leGVjdXRlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1FVRVVFRAogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcXVldWVkIgogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19FWEVDVVRFRCkKICAgIC8vICAgICBwcm9wb3NhbC5leGVjdXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHZldG9fcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJWZXRvIGEgcXVldWVkIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgc2VsZi5fdmV0b19wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdmV0b19wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19RVUVVRUQKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHF1ZXVlZCIKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19DQU5DRUxFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9hY3RpdmVfcHJvcG9zYWxfY291bnQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBjdXJyZW50IG51bWJlciBvZiBhY3RpdmUgcHJvcG9zYWxzIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3RvdGFsX3ZvdGVyX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgY3VycmVudCBudW1iZXIgb2YgdW5pcXVlIHZvdGVycyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLnRvdGFsX3ZvdGVyX2NvdW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3BhcnRpY2lwYXRpb25fcmF0ZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGN1cnJlbnQgcGFydGljaXBhdGlvbiByYXRlIGFzIGEgcGVyY2VudGFnZSAoMC0xMDApIiIiCiAgICAvLyAgICAgaWYgc2VsZi50b3RhbF92b3Rlcl9jb3VudCA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vIAogICAgLy8gICAgIHBhcnRpY2lwYXRpb25fcmF0ZSA9ICgKICAgIC8vICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyAqIDEwMAogICAgLy8gICAgICkgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudAogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChwYXJ0aWNpcGF0aW9uX3JhdGUpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfcGFydGljaXBhdGlvbl9yYXRlKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCBwYXJ0aWNpcGF0aW9uIHJhdGUgZm9yIGEgc3BlY2lmaWMgcHJvcG9zYWwgYXMgYSBwZXJjZW50YWdlICgwLTEwMCkiIiIKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGJveF9sZW4KICAgIGNvdmVyIDEKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIwNQogICAgLy8gYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICBhc3NlcnQgLy8gUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMDYKICAgIC8vIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9wcm9wb3NhbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIwNwogICAgLy8gaWYgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPT0gMDoKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTIKICAgIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gQmlnVUludCgpCiAgICBieXRlICJ0b3RhbF92b3RpbmdfcG93ZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjA3CiAgICAvLyBpZiBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9PSAwOgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciBleGlzdHMKICAgIGJ5dGUgMHgKICAgIGI9PQogICAgYnogZ2V0X3Byb3Bvc2FsX3BhcnRpY2lwYXRpb25fcmF0ZV9hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMDgKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIHVuY292ZXIgMQogICAgcmV0c3ViCgpnZXRfcHJvcG9zYWxfcGFydGljaXBhdGlvbl9yYXRlX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMTEKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSAqIDEwMAogICAgZnJhbWVfZGlnIDAKICAgIGludCA2ODAKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBieXRlIDB4NjQKICAgIGIqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjEyCiAgICAvLyApIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTkyCiAgICAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IEJpZ1VJbnQoKQogICAgYnl0ZSAidG90YWxfdm90aW5nX3Bvd2VyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIxMgogICAgLy8gKSAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlcgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciBleGlzdHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMTAtMTIxMgogICAgLy8gcGFydGljaXBhdGlvbl9yYXRlID0gKAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSAqIDEwMAogICAgLy8gKSAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlcgogICAgYi8KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMTMKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChwYXJ0aWNpcGF0aW9uX3JhdGUpCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCA4CiAgICBiemVybwogICAgYnwKICAgIHVuY292ZXIgMQogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfZWxpZ2libGVfdm90ZXJfY291bnQoKSAtPiBieXRlczoKZ2V0X2VsaWdpYmxlX3ZvdGVyX2NvdW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIxNC0xMjE1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfZWxpZ2libGVfdm90ZXJfY291bnQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMTcKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLnRvdGFsX3ZvdGVyX2NvdW50KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5OAogICAgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJ0b3RhbF92b3Rlcl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMTcKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLnRvdGFsX3ZvdGVyX2NvdW50KQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnRvdGFsX3ZvdGVyX2NvdW50IGV4aXN0cwogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfcGFydGljaXBhdGluZ192b3Rlcl9jb3VudCgpIC0+IGJ5dGVzOgpnZXRfcGFydGljaXBhdGluZ192b3Rlcl9jb3VudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMTgtMTIxOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3BhcnRpY2lwYXRpbmdfdm90ZXJfY291bnQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMjEKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzKQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYwNgogICAgLy8gc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyA9ICgKICAgIGJ5dGUgInRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIyMQogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgZXhpc3RzCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmdldF9maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQoKSAtPiBieXRlczoKZ2V0X2ZpbmFsaXplZF9wcm9wb3NhbF9jb3VudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMjItMTIyMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2ZpbmFsaXplZF9wcm9wb3NhbF9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIyNQogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50KQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYwMAogICAgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPSAoCiAgICBieXRlICJmaW5hbGl6ZWRfcHJvcG9zYWxfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjI1CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50IGV4aXN0cwogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfYXZlcmFnZV9wYXJ0aWNpcGF0aW9uX3Blcl9wcm9wb3NhbCgpIC0+IGJ5dGVzOgpnZXRfYXZlcmFnZV9wYXJ0aWNpcGF0aW9uX3Blcl9wcm9wb3NhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMjYtMTIyNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2F2ZXJhZ2VfcGFydGljaXBhdGlvbl9wZXJfcHJvcG9zYWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMjkKICAgIC8vIGlmIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID09IDA6CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjAwCiAgICAvLyBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCA9ICgKICAgIGJ5dGUgImZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMjkKICAgIC8vIGlmIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID09IDA6CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50IGV4aXN0cwogICAgaW50IDAKICAgID09CiAgICBieiBnZXRfYXZlcmFnZV9wYXJ0aWNpcGF0aW9uX3Blcl9wcm9wb3NhbF9hZnRlcl9pZl9lbHNlQDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMzAKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIHJldHN1YgoKZ2V0X2F2ZXJhZ2VfcGFydGljaXBhdGlvbl9wZXJfcHJvcG9zYWxfYWZ0ZXJfaWZfZWxzZUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIzMgogICAgLy8gc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjAzCiAgICAvLyBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgPSAoCiAgICBieXRlICJ0b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIzMgogICAgLy8gc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciBleGlzdHMKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDAKICAgIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID0gKAogICAgYnl0ZSAiZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIzMgogICAgLy8gc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50IGV4aXN0cwogICAgaXRvYgogICAgYi8KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMzQKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChhdmVyYWdlX3BhcnRpY2lwYXRpb24pCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCA4CiAgICBiemVybwogICAgYnwKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X2F2ZXJhZ2Vfdm90ZXNfcGVyX3Byb3Bvc2FsKCkgLT4gYnl0ZXM6CmdldF9hdmVyYWdlX3ZvdGVzX3Blcl9wcm9wb3NhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyMzUtMTIzNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2F2ZXJhZ2Vfdm90ZXNfcGVyX3Byb3Bvc2FsKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjM4CiAgICAvLyBpZiBzZWxmLnByb3Bvc2FsX2NvdW50ID09IDA6CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTg5CiAgICAvLyBzZWxmLnByb3Bvc2FsX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgInByb3Bvc2FsX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTIzOAogICAgLy8gaWYgc2VsZi5wcm9wb3NhbF9jb3VudCA9PSAwOgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnByb3Bvc2FsX2NvdW50IGV4aXN0cwogICAgaW50IDAKICAgID09CiAgICBieiBnZXRfYXZlcmFnZV92b3Rlc19wZXJfcHJvcG9zYWxfYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjM5CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICByZXRzdWIKCmdldF9hdmVyYWdlX3ZvdGVzX3Blcl9wcm9wb3NhbF9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjQwCiAgICAvLyBhdmVyYWdlX3ZvdGVzID0gc2VsZi52b3RlX2NvdW50IC8vIHNlbGYucHJvcG9zYWxfY291bnQKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTAKICAgIC8vIHNlbGYudm90ZV9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJ2b3RlX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI0MAogICAgLy8gYXZlcmFnZV92b3RlcyA9IHNlbGYudm90ZV9jb3VudCAvLyBzZWxmLnByb3Bvc2FsX2NvdW50CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudm90ZV9jb3VudCBleGlzdHMKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1ODkKICAgIC8vIHNlbGYucHJvcG9zYWxfY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAicHJvcG9zYWxfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjQwCiAgICAvLyBhdmVyYWdlX3ZvdGVzID0gc2VsZi52b3RlX2NvdW50IC8vIHNlbGYucHJvcG9zYWxfY291bnQKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5wcm9wb3NhbF9jb3VudCBleGlzdHMKICAgIC8KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNDEKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChhdmVyYWdlX3ZvdGVzKQogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfdm90ZXJfaW5mbHVlbmNlX3Njb3JlKGFjY291bnQ6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3ZvdGVyX2luZmx1ZW5jZV9zY29yZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNDItMTI0MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX2luZmx1ZW5jZV9zY29yZShzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjQ1CiAgICAvLyB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3ZvdGVyCiAgICBkdXAKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNDYKICAgIC8vIGlmIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlID09IDA6CiAgICBpbnQgMzIKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBieXRlIDB4CiAgICBiPT0KICAgIGJ6IGdldF92b3Rlcl9pbmZsdWVuY2Vfc2NvcmVfYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjQ3CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICB1bmNvdmVyIDEKICAgIHJldHN1YgoKZ2V0X3ZvdGVyX2luZmx1ZW5jZV9zY29yZV9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjQ5CiAgICAvLyBpZiBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9PSAwOgogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5MgogICAgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBCaWdVSW50KCkKICAgIGJ5dGUgInRvdGFsX3ZvdGluZ19wb3dlciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNDkKICAgIC8vIGlmIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID09IDA6CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIGV4aXN0cwogICAgYnl0ZSAweAogICAgYj09CiAgICBieiBnZXRfdm90ZXJfaW5mbHVlbmNlX3Njb3JlX2FmdGVyX2lmX2Vsc2VANAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI1MAogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgdW5jb3ZlciAxCiAgICByZXRzdWIKCmdldF92b3Rlcl9pbmZsdWVuY2Vfc2NvcmVfYWZ0ZXJfaWZfZWxzZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI1MgogICAgLy8gaW5mbHVlbmNlX3Njb3JlID0gKHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICogMTAwKSAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlcgogICAgZnJhbWVfZGlnIDAKICAgIGludCAzMgogICAgaW50IDMyCiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ5dGUgMHg2NAogICAgYioKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTIKICAgIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gQmlnVUludCgpCiAgICBieXRlICJ0b3RhbF92b3RpbmdfcG93ZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjUyCiAgICAvLyBpbmZsdWVuY2Vfc2NvcmUgPSAodm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKiAxMDApIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIGV4aXN0cwogICAgYi8KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNTMKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChpbmZsdWVuY2Vfc2NvcmUpCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCA4CiAgICBiemVybwogICAgYnwKICAgIHVuY292ZXIgMQogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfdm90ZXJfZW5nYWdlbWVudF9zY29yZShhY2NvdW50OiBieXRlcykgLT4gYnl0ZXM6CmdldF92b3Rlcl9lbmdhZ2VtZW50X3Njb3JlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI1NC0xMjU1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZXJfZW5nYWdlbWVudF9zY29yZShzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjU3CiAgICAvLyB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3ZvdGVyCiAgICBkdXAKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNTgKICAgIC8vIGlmIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlID09IDA6CiAgICBpbnQgMzIKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBieXRlIDB4CiAgICBiPT0KICAgIGJ6IGdldF92b3Rlcl9lbmdhZ2VtZW50X3Njb3JlX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI1OQogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgdW5jb3ZlciAxCiAgICByZXRzdWIKCmdldF92b3Rlcl9lbmdhZ2VtZW50X3Njb3JlX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNjIKICAgIC8vIGlmIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID09IDA6CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjAwCiAgICAvLyBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCA9ICgKICAgIGJ5dGUgImZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNjIKICAgIC8vIGlmIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID09IDA6CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50IGV4aXN0cwogICAgaW50IDAKICAgID09CiAgICBieiBnZXRfdm90ZXJfZW5nYWdlbWVudF9zY29yZV9hZnRlcl9pZl9lbHNlQDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNjMKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIHVuY292ZXIgMQogICAgcmV0c3ViCgpnZXRfdm90ZXJfZW5nYWdlbWVudF9zY29yZV9hZnRlcl9pZl9lbHNlQDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjY4CiAgICAvLyB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkLm5hdGl2ZSAqIDEwMAogICAgZnJhbWVfZGlnIDAKICAgIGR1cAogICAgaW50IDcyCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMTAwCiAgICAqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjY5CiAgICAvLyApIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50CiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjAwCiAgICAvLyBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCA9ICgKICAgIGJ5dGUgImZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNjkKICAgIC8vICkgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjY3LTEyNjkKICAgIC8vIHBhcnRpY2lwYXRpb25fZnJlcXVlbmN5ID0gKAogICAgLy8gICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlICogMTAwCiAgICAvLyApIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50CiAgICAvCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMjcwCiAgICAvLyB2b3RpbmdfcG93ZXJfd2VpZ2h0ID0gKHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICogMTAwKSAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlcgogICAgdW5jb3ZlciAxCiAgICBpbnQgMzIKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBieXRlIDB4NjQKICAgIGIqCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTkyCiAgICAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IEJpZ1VJbnQoKQogICAgYnl0ZSAidG90YWxfdm90aW5nX3Bvd2VyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI3MAogICAgLy8gdm90aW5nX3Bvd2VyX3dlaWdodCA9ICh2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAqIDEwMCkgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgZXhpc3RzCiAgICBiLwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI3NAogICAgLy8gcGFydGljaXBhdGlvbl9mcmVxdWVuY3kgKiA3MCArIHZvdGluZ19wb3dlcl93ZWlnaHQgKiAzMAogICAgdW5jb3ZlciAxCiAgICBpbnQgNzAKICAgICoKICAgIGl0b2IKICAgIHVuY292ZXIgMQogICAgYnl0ZSAweDFlCiAgICBiKgogICAgYisKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNzUKICAgIC8vICkgLy8gMTAwCiAgICBieXRlIDB4NjQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNzMtMTI3NQogICAgLy8gZW5nYWdlbWVudF9zY29yZSA9ICgKICAgIC8vICAgICBwYXJ0aWNpcGF0aW9uX2ZyZXF1ZW5jeSAqIDcwICsgdm90aW5nX3Bvd2VyX3dlaWdodCAqIDMwCiAgICAvLyApIC8vIDEwMAogICAgYi8KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyNzYKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChlbmdhZ2VtZW50X3Njb3JlKQogICAgZHVwCiAgICBsZW4KICAgIGludCA4CiAgICA8PQogICAgYXNzZXJ0IC8vIG92ZXJmbG93CiAgICBpbnQgOAogICAgYnplcm8KICAgIGJ8CiAgICB1bmNvdmVyIDEKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuaGFzX3ZvdGVyX3BhcnRpY2lwYXRlZF9pbl9wcm9wb3NhbChhY2NvdW50OiBieXRlcywgcHJvcG9zYWxfbm9kZTogYnl0ZXMpIC0+IGJ5dGVzOgpoYXNfdm90ZXJfcGFydGljaXBhdGVkX2luX3Byb3Bvc2FsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI3Ny0xMjgwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBoYXNfdm90ZXJfcGFydGljaXBhdGVkX2luX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcywgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMgogICAgLy8gKSAtPiBhcmM0LkJvb2w6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyODIKICAgIC8vIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfdm90ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyODMKICAgIC8vIHJldHVybiBhcmM0LkJvb2wodm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgPiAwKQogICAgaW50IDcyCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMAogICAgPgogICAgYnl0ZSAweDAwCiAgICBpbnQgMAogICAgdW5jb3ZlciAyCiAgICBzZXRiaXQKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X3ZvdGVyX3BhcnRpY2lwYXRpb25fdGltZXN0YW1wKGFjY291bnQ6IGJ5dGVzLCBwcm9wb3NhbF9ub2RlOiBieXRlcykgLT4gYnl0ZXM6CmdldF92b3Rlcl9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyODQtMTI4NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX3BhcnRpY2lwYXRpb25fdGltZXN0YW1wKAogICAgLy8gICAgIHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcywgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMgogICAgLy8gKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI4OQogICAgLy8gdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgX2dldF92b3RlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTI5MAogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAubmF0aXZlKQogICAgaW50IDgwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmdldF92b3Rlcl9wcm9wb3NhbF9jb3VudChhY2NvdW50OiBieXRlcykgLT4gYnl0ZXM6CmdldF92b3Rlcl9wcm9wb3NhbF9jb3VudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyOTEtMTI5MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX3Byb3Bvc2FsX2NvdW50KHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyOTQKICAgIC8vIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfdm90ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyOTUKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NCh2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkLm5hdGl2ZSkKICAgIGludCA3MgogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfdm90ZXJfbGFzdF9wcm9wb3NhbF9ub2RlKGFjY291bnQ6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3ZvdGVyX2xhc3RfcHJvcG9zYWxfbm9kZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyOTYtMTI5NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX2xhc3RfcHJvcG9zYWxfbm9kZShzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IEJ5dGVzMzI6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEyOTkKICAgIC8vIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfdm90ZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzMDAKICAgIC8vIHJldHVybiB2b3Rlci5sYXN0X3Byb3Bvc2FsX25vZGUKICAgIGludCA4OAogICAgaW50IDMyCiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X3F1b3J1bV9yZXF1aXJlbWVudCgpIC0+IGJ5dGVzOgpnZXRfcXVvcnVtX3JlcXVpcmVtZW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMwMS0xMzAyCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcXVvcnVtX3JlcXVpcmVtZW50KHNlbGYpIC0+IGFyYzQuVUludDI1NjoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMwNAogICAgLy8gcmV0dXJuIGFyYzQuVUludDI1NihzZWxmLnF1b3J1bV9yZXF1aXJlbWVudCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTQKICAgIC8vIHNlbGYucXVvcnVtX3JlcXVpcmVtZW50ID0gKAogICAgYnl0ZSAicXVvcnVtX3JlcXVpcmVtZW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMwNAogICAgLy8gcmV0dXJuIGFyYzQuVUludDI1NihzZWxmLnF1b3J1bV9yZXF1aXJlbWVudCkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQgZXhpc3RzCiAgICBkdXAKICAgIGxlbgogICAgaW50IDMyCiAgICA8PQogICAgYXNzZXJ0IC8vIG92ZXJmbG93CiAgICBpbnQgMzIKICAgIGJ6ZXJvCiAgICBifAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfcXVvcnVtX3RocmVzaG9sZCgpIC0+IGJ5dGVzOgpnZXRfcXVvcnVtX3RocmVzaG9sZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzMTQtMTMxNQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3F1b3J1bV90aHJlc2hvbGQoc2VsZikgLT4gYXJjNC5VSW50MjU2OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzE3CiAgICAvLyByZXR1cm4gYXJjNC5VSW50MjU2KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICBjYWxsc3ViIF9nZXRfcXVvcnVtX3RocmVzaG9sZAogICAgZHVwCiAgICBsZW4KICAgIGludCAzMgogICAgPD0KICAgIGFzc2VydCAvLyBvdmVyZmxvdwogICAgaW50IDMyCiAgICBiemVybwogICAgYnwKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuY2hlY2tfcHJvcG9zYWxfcXVvcnVtKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiBieXRlczoKY2hlY2tfcHJvcG9zYWxfcXVvcnVtOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMyMy0xMzI0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjaGVja19wcm9wb3NhbF9xdW9ydW0oc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5Cb29sOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzI2CiAgICAvLyByZXR1cm4gYXJjNC5Cb29sKHNlbGYuX2NoZWNrX3Byb3Bvc2FsX3F1b3J1bShwcm9wb3NhbF9ub2RlLmJ5dGVzKSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfY2hlY2tfcHJvcG9zYWxfcXVvcnVtCiAgICBieXRlIDB4MDAKICAgIGludCAwCiAgICB1bmNvdmVyIDIKICAgIHNldGJpdAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5fY2hlY2tfcHJvcG9zYWxfcXVvcnVtKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiB1aW50NjQ6Cl9jaGVja19wcm9wb3NhbF9xdW9ydW06CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTA5LTE1MTAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NoZWNrX3Byb3Bvc2FsX3F1b3J1bShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gYm9vbDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUxMgogICAgLy8gX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwCiAgICAvLyBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIGJ5dGUgMHg3MDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MTAtMTUxMwogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzID0gQm94TWFwKEJ5dGVzMzIsIFByb3Bvc2FsLCBrZXlfcHJlZml4PWIicF8iKQogICAgLy8gICAgIHNlbGYudm90ZXMgPSBCb3hNYXAoQnl0ZXM2NCwgVUludDY0LCBrZXlfcHJlZml4PWIiIikKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIFVJbnQ2NCwgUG93ZXJTb3VyY2UsIGtleV9wcmVmaXg9YiJxXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5wb3dlcl9sb2NrcyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXM2NCwgUG93ZXJMb2NrLCBrZXlfcHJlZml4PWIibF8iCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBhZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fYWRkX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2FkZF9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgbm90IGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBzZWxmLnBvd2VyX3NvdXJjZXNbcG93ZXJfc291cmNlX2lkXSA9IFBvd2VyU291cmNlKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChwb3dlcl9tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQpIC0+IFBvd2VyU291cmNlOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfc291cmNlKHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9zb3VyY2VzLmdldCgKICAgIC8vICAgICAgICAga2V5PXBvd2VyX3NvdXJjZV9pZCwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NCgwKSwgcG93ZXJfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkNhbGN1bGF0ZSB0aGUgYm9udXMgbXVsdGlwbGllciBiYXNlZCBvbiBsb2NrdXAgZHVyYXRpb24iIiIKICAgIC8vICAgICBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbjogVUludDY0KSAtPiB0dXBsZVtVSW50NjQsIFVJbnQ2NF06CiAgICAvLyAgICAgIiIiR2V0IGxvY2t1cCB0aWVyIGluZm9ybWF0aW9uOiAodGllcl9udW1iZXIsIGJvbnVzX211bHRpcGxpZXIpIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoNCksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl80KSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDIpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMSksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8xKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl91cGRhdGVfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX211bHRpcGxpZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfbXVsdGlwbGllcjogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBsb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fbG9ja19wb3dlcigKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiQ2Fubm90IGxvY2sgcG93ZXIgaW4gdGhlIHBhc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX1dFRUsKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBtdXN0IGJlIGF0IGxlYXN0IDEgd2VlayIKICAgIC8vIAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbiA9IHBvd2VyX3VubG9ja190aW1lc3RhbXAgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb24KICAgIC8vICAgICApCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBub3QgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldID0gUG93ZXJMb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2Vfb3duZXI9YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1Nihwb3dlcl9ncmFudGVkKSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KGxvY2t1cF9kdXJhdGlvbiksCiAgICAvLyAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KGxvY2t1cF9ib251c19tdWx0aXBsaWVyKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyRnJvbSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICBhcmM0LkFkZHJlc3MoR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDI1Nihwb3dlcl9zb3VyY2VfYW1vdW50KSwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIG5ld192b3RlX3Bvd2VyID0gdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKyBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgdm90ZXIudm90ZXJfYWRkcmVzcyA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgLy8gICAgIHZvdGVyLnZvdGVfcG93ZXIgPSBhcmM0LlVJbnQyNTYobmV3X3ZvdGVfcG93ZXIpCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKyBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBQb3dlckxvY2s6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLnBvd2VyX2xvY2tzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQocG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkuYnl0ZXMKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1Qb3dlckxvY2soCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50PWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV91bmxvY2tfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX2dyYW50ZWQ9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2R1cmF0aW9uPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbG9ja3VwX2JvbnVzX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdW5sb2NrX3Bvd2VyKHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdW5sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIGluIHNlbGYucG93ZXJfc291cmNlcywgIlBvd2VyIHNvdXJjZSBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcygKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQocG93ZXJfc291cmNlX2lkKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCBwb3dlcl9sb2NrX2tleSBpbiBzZWxmLnBvd2VyX2xvY2tzLCAiUG93ZXIgbG9jayBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgPD0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiUG93ZXIgbG9jayBpcyBub3QgeWV0IHVubG9ja2VkIgogICAgLy8gCiAgICAvLyAgICAgcG93ZXJfb3duZXIgPSBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lci5uYXRpdmUKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3RlciA9IHNlbGYuX2dldF92b3Rlcihwb3dlcl9vd25lcikKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gcG93ZXJfbG9jay5wb3dlcl9ncmFudGVkLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZCA8PSBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICksICJOb3QgZW5vdWdoIHZvdGluZyBwb3dlciIKICAgIC8vICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwb3dlcl9vd25lcl92b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAtIHBvd2VyX2dyYW50ZWQKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi52b3RlcnNbcG93ZXJfb3duZXJdID0gcG93ZXJfb3duZXJfdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyIC0gcG93ZXJfZ3JhbnRlZAogICAgLy8gCiAgICAvLyAgICAgYXJjNC5hYmlfY2FsbCgKICAgIC8vICAgICAgICAgQVJDMjAwVG9rZW5JbnRlcmZhY2UuYXJjMjAwX3RyYW5zZmVyLAogICAgLy8gICAgICAgICBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9vd25lciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfYW1vdW50LAogICAgLy8gICAgICAgICBhcHBfaWQ9QXBwbGljYXRpb24ocG93ZXJfc291cmNlX2lkKSwKICAgIC8vICAgICApCiAgICAvLyAgICAgZGVsIHNlbGYucG93ZXJfbG9ja3NbcG93ZXJfbG9ja19rZXldCiAgICAvLyAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUuYnl0ZXMsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX25vZGUoCiAgICAvLyAgICAgc2VsZiwgcHJvcG9zYWxfdGl0bGU6IEJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1Nihwcm9wb3NhbF90aXRsZSArIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLnByb3Bvc2Fscy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UHJvcG9zYWwoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcygpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDY0KSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDUxMikpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3ZvdGVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfdG90YWxfcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfeWVzX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXI9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICB2b3Rpbmdfc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3Rpb25faGFzaD1CeXRlczMyLmZyb21fYnl0ZXMob3AuYnplcm8oMzIpKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGV4ZWN1dGlvbl90eG5faWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vIAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9tZXQ9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGUoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgYWNjb3VudC5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBhY2NvdW50OiBBY2NvdW50LAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYudm90ZXMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBhY2NvdW50LmJ5dGVzKSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fcHJvcG9zZSgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9jYXRlZ29yeV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlID0gc2VsZi5fZ2V0X3Byb3Bvc2FsX25vZGUocHJvcG9zYWxfdGl0bGUsIHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBwcm9wb3NhbF9ub2RlIG5vdCBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIElEIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgcHJvcG9zYWxfaW5kZXggPSBzZWxmLnByb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2luZGV4ID0gYXJjNC5VSW50NjQocHJvcG9zYWxfaW5kZXgpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zZXIgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90aXRsZSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF90aXRsZSkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9kZXNjcmlwdGlvbiA9IEJ5dGVzNTEyLmZyb21fYnl0ZXMocHJvcG9zYWxfZGVzY3JpcHRpb24pCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX2NhdGVnb3J5X2lkID0gYXJjNC5VSW50NjQocHJvcG9zYWxfY2F0ZWdvcnlfaWQpCiAgICAvLyAgICAgcHJvcG9zYWwuY3JlYXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcCArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLICsgU0VDT05EU19QRVJfREFZCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZCA9IGFyYzQuVUludDY0KHNlbGYuX2dldF9xdW9ydW1fdGhyZXNob2xkKCkpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2FsX2NvdW50ID0gcHJvcG9zYWxfaW5kZXgKICAgIC8vICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgIFByb3Bvc2FsQ3JlYXRlZCgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9cHJvcG9zYWxfbm9kZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FjdGl2YXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hY3RpdmF0ZV9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUgPiBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3Qgc3RhcnRlZCB5ZXQiCiAgICAvLyAKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSA+IDAsICJZb3UgaGF2ZSBubyB2b3RpbmcgcG93ZXIiCiAgICAvLyAKICAgIC8vICAgICBuZXdfYWN0aXZhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld19hY3RpdmF0aW9uX3Bvd2VyKQogICAgLy8gCiAgICAvLyAgICAgaWYgbmV3X2FjdGl2YXRpb25fcG93ZXIgPj0gc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgICAgIEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0FDVElWRSkKICAgIC8vIAogICAgLy8gICAgICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50ICsgMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlczMyLAogICAgLy8gICAgIHN1cHBvcnQ6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2Nhc3Rfdm90ZShwcm9wb3NhbF9ub2RlLmJ5dGVzLCBzdXBwb3J0Lm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Nhc3Rfdm90ZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHByb3Bvc2FsX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIHN1cHBvcnQ6IFVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIHZvdGVfa2V5ID0gQnl0ZXM2NC5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUgKyBUeG4uc2VuZGVyLmJ5dGVzKQogICAgLy8gICAgIGFzc2VydCB2b3RlX2tleSBub3QgaW4gc2VsZi52b3RlcywgIllvdSBoYXZlIGFscmVhZHkgdm90ZWQiCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCBzdXBwb3J0IDwgMiwgIkludmFsaWQgdm90ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0ucHJvcG9zYWxfc3RhdHVzID09IFBST1BPU0FMX1NUQVRVU19BQ1RJVkUKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IGFjdGl2ZSIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0udm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgICAgID49IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlZvdGluZyBoYXMgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnZvdGVzW3ZvdGVfa2V5XSA9IHN1cHBvcnQKICAgIC8vIAogICAgLy8gICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgdm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcGFydGljaXBhdGlvbl90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci52b3RlX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgLy8gICAgIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlcnNbVHhuLnNlbmRlcl0gPSB2b3Rlci5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKF9wcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSArIDEKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgKyBzdXBwb3J0CiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gICAgIGlmIHN1cHBvcnQgPT0gMToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3Bvd2VyLm5hdGl2ZSArIHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3RlX2NvdW50ID0gc2VsZi52b3RlX2NvdW50ICsgMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcmVqZWN0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSBwZW5kaW5nIHByb3Bvc2FsIHNob3VsZCBiZSByZWplY3RlZCBkdWUgdG8gaW5zdWZmaWNpZW50IGFjdGl2YXRpb24gdm90ZXMiIiIKICAgIC8vICAgICBzZWxmLl9yZWplY3RfcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3JlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlICE9IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HOgogICAgLy8gICAgICAgICByZXR1cm4KICAgIC8vIAogICAgLy8gICAgIGlmIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wOgogICAgLy8gCiAgICAvLyAgICAgICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlIDwgc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZDoKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICAgICAgICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fY2FuY2VsX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYW5jZWxfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1BFTkRJTkcKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHBlbmRpbmciCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0NBTkNFTEVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJGaW5hbGl6ZSBhIHByb3Bvc2FsIGFmdGVyIHZvdGluZyBwZXJpb2QgZW5kcyIiIgogICAgLy8gCiAgICAvLyAgICAgcGFzcwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZmluYWxpemVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC52b3RpbmdfZW5kX3RpbWVzdGFtcC5uYXRpdmUgPCBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgcGVyaW9kIGhhcyBub3QgZW5kZWQiCiAgICAvLyAKICAgIC8vICAgICBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50IC0gMQogICAgLy8gCiAgICAvLyAgICAgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPSBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciArIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPiAwOgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICAgICAgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMgPSBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUKICAgIC8vICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyA9ICgKICAgIC8vICAgICAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKyBlc3RpbWF0ZWRfdW5pcXVlX3ZvdGVycwogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBtZWV0c19xdW9ydW0gPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICA+PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9tZXQgPSBhcmM0LkJvb2wobWVldHNfcXVvcnVtKQogICAgLy8gICAgIGlmICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgIDwgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19OT1RfTUVUKQogICAgLy8gICAgIGVsaWYgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgPT0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzID0gYXJjNC5VSW50NjQoUVVPUlVNX1NUQVRVU19NRVQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfRVhDRUVERUQpCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgPT0gMDoKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfRVhQSVJFRCkKICAgIC8vICAgICBlbGlmIG5vdCBtZWV0c19xdW9ydW06CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0RFRkVBVEVEKQogICAgLy8gICAgIGVsaWYgcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZSA+ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlIC0gcHJvcG9zYWwucHJvcG9zYWxfeWVzX3ZvdGVzLm5hdGl2ZQogICAgLy8gICAgICk6CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRCkKICAgIC8vICAgICBlbHNlOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHF1ZXVlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiUXVldWUgYSBzdWNjZWVkZWQgcHJvcG9zYWwgZm9yIGV4ZWN1dGlvbiIiIgogICAgLy8gICAgIHNlbGYuX3F1ZXVlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9xdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHN1Y2NlZWRlZCIKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfUVVFVUVEKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZXhlY3V0ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIkV4ZWN1dGUgYSBxdWV1ZWQgcHJvcG9zYWwiIiIKICAgIC8vICAgICBzZWxmLl9leGVjdXRlX3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9leGVjdXRlX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1FVRVVFRAogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcXVldWVkIgogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19FWEVDVVRFRCkKICAgIC8vICAgICBwcm9wb3NhbC5leGVjdXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHZldG9fcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJWZXRvIGEgcXVldWVkIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgc2VsZi5fdmV0b19wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdmV0b19wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19RVUVVRUQKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHF1ZXVlZCIKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19DQU5DRUxFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9hY3RpdmVfcHJvcG9zYWxfY291bnQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBjdXJyZW50IG51bWJlciBvZiBhY3RpdmUgcHJvcG9zYWxzIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuYWN0aXZlX3Byb3Bvc2FsX2NvdW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3RvdGFsX3ZvdGVyX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgY3VycmVudCBudW1iZXIgb2YgdW5pcXVlIHZvdGVycyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLnRvdGFsX3ZvdGVyX2NvdW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3BhcnRpY2lwYXRpb25fcmF0ZShzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGN1cnJlbnQgcGFydGljaXBhdGlvbiByYXRlIGFzIGEgcGVyY2VudGFnZSAoMC0xMDApIiIiCiAgICAvLyAgICAgaWYgc2VsZi50b3RhbF92b3Rlcl9jb3VudCA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vIAogICAgLy8gICAgIHBhcnRpY2lwYXRpb25fcmF0ZSA9ICgKICAgIC8vICAgICAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyAqIDEwMAogICAgLy8gICAgICkgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudAogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChwYXJ0aWNpcGF0aW9uX3JhdGUpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfcGFydGljaXBhdGlvbl9yYXRlKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCBwYXJ0aWNpcGF0aW9uIHJhdGUgZm9yIGEgc3BlY2lmaWMgcHJvcG9zYWwgYXMgYSBwZXJjZW50YWdlICgwLTEwMCkiIiIKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyAgICAgaWYgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICBwYXJ0aWNpcGF0aW9uX3JhdGUgPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSAqIDEwMAogICAgLy8gICAgICkgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQocGFydGljaXBhdGlvbl9yYXRlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2VsaWdpYmxlX3ZvdGVyX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgbnVtYmVyIG9mIHZvdGVycyB3aXRoIHZvdGluZyBwb3dlciA+IDAiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi50b3RhbF92b3Rlcl9jb3VudCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wYXJ0aWNpcGF0aW5nX3ZvdGVyX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgbnVtYmVyIG9mIHZvdGVycyB3aG8gaGF2ZSBhY3R1YWxseSBwYXJ0aWNpcGF0ZWQgaW4gdm90aW5nIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgbnVtYmVyIG9mIHByb3Bvc2FscyB0aGF0IGhhdmUgYmVlbiBmaW5hbGl6ZWQiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYXZlcmFnZV9wYXJ0aWNpcGF0aW9uX3Blcl9wcm9wb3NhbChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgYXZlcmFnZSBwYXJ0aWNpcGF0aW9uIHBvd2VyIHBlciBmaW5hbGl6ZWQgcHJvcG9zYWwiIiIKICAgIC8vICAgICBpZiBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudCA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vICAgICBhdmVyYWdlX3BhcnRpY2lwYXRpb24gPSAoCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciAvLyBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudAogICAgLy8gICAgICkKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoYXZlcmFnZV9wYXJ0aWNpcGF0aW9uKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2F2ZXJhZ2Vfdm90ZXNfcGVyX3Byb3Bvc2FsKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCBhdmVyYWdlIG51bWJlciBvZiB2b3RlcyBwZXIgcHJvcG9zYWwiIiIKICAgIC8vICAgICBpZiBzZWxmLnByb3Bvc2FsX2NvdW50ID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gICAgIGF2ZXJhZ2Vfdm90ZXMgPSBzZWxmLnZvdGVfY291bnQgLy8gc2VsZi5wcm9wb3NhbF9jb3VudAogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChhdmVyYWdlX3ZvdGVzKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX2luZmx1ZW5jZV9zY29yZShzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCBpbmZsdWVuY2Ugc2NvcmUgZm9yIGEgc3BlY2lmaWMgdm90ZXIgKDAtMTAwKSBiYXNlZCBvbiB2b3RpbmcgcG93ZXIiIiIKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIC8vICAgICBpZiB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vIAogICAgLy8gICAgIGlmIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAgICAgaW5mbHVlbmNlX3Njb3JlID0gKHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICogMTAwKSAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlcgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChpbmZsdWVuY2Vfc2NvcmUpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZXJfZW5nYWdlbWVudF9zY29yZShzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCBlbmdhZ2VtZW50IHNjb3JlIGZvciBhIHNwZWNpZmljIHZvdGVyICgwLTEwMCkgYmFzZWQgb24gYWN0dWFsIHBhcnRpY2lwYXRpb24iIiIKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIC8vICAgICBpZiB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgaWYgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcGFydGljaXBhdGlvbl9mcmVxdWVuY3kgPSAoCiAgICAvLyAgICAgICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlICogMTAwCiAgICAvLyAgICAgKSAvLyBzZWxmLmZpbmFsaXplZF9wcm9wb3NhbF9jb3VudAogICAgLy8gICAgIHZvdGluZ19wb3dlcl93ZWlnaHQgPSAodm90ZXIudm90ZV9wb3dlci5uYXRpdmUgKiAxMDApIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIGVuZ2FnZW1lbnRfc2NvcmUgPSAoCiAgICAvLyAgICAgICAgIHBhcnRpY2lwYXRpb25fZnJlcXVlbmN5ICogNzAgKyB2b3RpbmdfcG93ZXJfd2VpZ2h0ICogMzAKICAgIC8vICAgICApIC8vIDEwMAogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChlbmdhZ2VtZW50X3Njb3JlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgaGFzX3ZvdGVyX3BhcnRpY2lwYXRlZF9pbl9wcm9wb3NhbCgKICAgIC8vICAgICBzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIKICAgIC8vICkgLT4gYXJjNC5Cb29sOgogICAgLy8gICAgICIiIkNoZWNrIGlmIGEgdm90ZXIgaGFzIHBhcnRpY2lwYXRlZCBpbiBhIHNwZWNpZmljIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuQm9vbCh2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkLm5hdGl2ZSA+IDApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZXJfcGFydGljaXBhdGlvbl90aW1lc3RhbXAoCiAgICAvLyAgICAgc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyCiAgICAvLyApIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgdGltZXN0YW1wIHdoZW4gYSB2b3RlciBwYXJ0aWNpcGF0ZWQgaW4gYSBzcGVjaWZpYyBwcm9wb3NhbCIiIgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NCh2b3Rlci5sYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wLm5hdGl2ZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3Rlcl9wcm9wb3NhbF9jb3VudChzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgbnVtYmVyIG9mIHByb3Bvc2FscyBhIHZvdGVyIGhhcyBwYXJ0aWNpcGF0ZWQgaW4iIiIKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQodm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZXJfbGFzdF9wcm9wb3NhbF9ub2RlKHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gQnl0ZXMzMjoKICAgIC8vICAgICAiIiJHZXQgdGhlIG5vZGUgb2YgdGhlIGxhc3QgcHJvcG9zYWwgdGhpcyB2b3RlciBwYXJ0aWNpcGF0ZWQgaW4iIiIKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIC8vICAgICByZXR1cm4gdm90ZXIubGFzdF9wcm9wb3NhbF9ub2RlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcXVvcnVtX3JlcXVpcmVtZW50KHNlbGYpIC0+IGFyYzQuVUludDI1NjoKICAgIC8vICAgICAiIiJHZXQgdGhlIGdsb2JhbCBxdW9ydW0gcmVxdWlyZW1lbnQgaW4gYmFzaXMgcG9pbnRzIChicHMpIHdpdGggYmFzZSBvZiAxMDAwMCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQyNTYoc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzZXRfcXVvcnVtX3JlcXVpcmVtZW50KHNlbGYsIHF1b3J1bV9icHM6IGFyYzQuVUludDI1NikgLT4gTm9uZToKICAgIC8vICAgICAiIiJTZXQgdGhlIGdsb2JhbCBxdW9ydW0gcmVxdWlyZW1lbnQgaW4gYmFzaXMgcG9pbnRzIChicHMpIHdpdGggYmFzZSBvZiAxMDAwMCIiIgogICAgLy8gICAgIHNlbGYuX3NldF9xdW9ydW1fcmVxdWlyZW1lbnQocXVvcnVtX2Jwcy5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zZXRfcXVvcnVtX3JlcXVpcmVtZW50KHNlbGYsIHF1b3J1bV9icHM6IEJpZ1VJbnQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiU2V0IHRoZSBnbG9iYWwgcXVvcnVtIHJlcXVpcmVtZW50IGluIGJhc2lzIHBvaW50cyAoYnBzKSB3aXRoIGJhc2Ugb2YgMTAwMDAiIiIKICAgIC8vICAgICBhc3NlcnQgcXVvcnVtX2JwcyA8PSAxMDAwMCwgIlF1b3J1bSByZXF1aXJlbWVudCBjYW5ub3QgZXhjZWVkIDEwMCUgKDEwMDAwIGJwcykiCiAgICAvLyAgICAgc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQgPSBxdW9ydW1fYnBzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcXVvcnVtX3RocmVzaG9sZChzZWxmKSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBjdXJyZW50IHF1b3J1bSB0aHJlc2hvbGQgaW4gdm90aW5nIHBvd2VyIHVuaXRzIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDI1NihzZWxmLl9nZXRfcXVvcnVtX3RocmVzaG9sZCgpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3F1b3J1bV90aHJlc2hvbGQoc2VsZikgLT4gQmlnVUludDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgdGhlIGN1cnJlbnQgcXVvcnVtIHRocmVzaG9sZCBpbiB2b3RpbmcgcG93ZXIgdW5pdHMiIiIKICAgIC8vIAogICAgLy8gICAgIHJldHVybiAoc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgKiBzZWxmLnF1b3J1bV9yZXF1aXJlbWVudCkgLy8gQmlnVUludCgxMDAwMCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNoZWNrX3Byb3Bvc2FsX3F1b3J1bShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBhcmM0LkJvb2w6CiAgICAvLyAgICAgIiIiQ2hlY2sgaWYgYSBwcm9wb3NhbCBtZWV0cyB0aGUgcXVvcnVtIHJlcXVpcmVtZW50IiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuQm9vbChzZWxmLl9jaGVja19wcm9wb3NhbF9xdW9ydW0ocHJvcG9zYWxfbm9kZS5ieXRlcykpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1cyhzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgcXVvcnVtIHN0YXR1cyBmb3IgYSBwcm9wb3NhbDogMCA9IG5vdCBtZXQsIDEgPSBtZXQsIDIgPSBleGNlZWRlZCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1cyhwcm9wb3NhbF9ub2RlLmJ5dGVzKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9xdW9ydW1fc3RhdHVzKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHF1b3J1bSBzdGF0dXMgZm9yIGEgcHJvcG9zYWw6IDAgPSBub3QgbWV0LCAxID0gbWV0LCAyID0gZXhjZWVkZWQiIiIKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBpZiAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRAogICAgLy8gICAgICAgICBvciBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRAogICAgLy8gICAgICAgICBvciBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19FWFBJUkVECiAgICAvLyAgICAgKToKICAgIC8vICAgICAgICAgcmV0dXJuIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9zdGF0dXMubmF0aXZlCiAgICAvLyAgICAgZWxzZToKICAgIC8vIAogICAgLy8gICAgICAgICBpZiAoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgICAgIDwgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICAgICAgKToKICAgIC8vICAgICAgICAgICAgIHJldHVybiBVSW50NjQoUVVPUlVNX1NUQVRVU19OT1RfTUVUKQogICAgLy8gICAgICAgICBlbGlmICgKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICAgICAgPT0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICAgICAgKToKICAgIC8vICAgICAgICAgICAgIHJldHVybiBVSW50NjQoUVVPUlVNX1NUQVRVU19NRVQpCiAgICAvLyAgICAgICAgIGVsc2U6CiAgICAvLyAgICAgICAgICAgICByZXR1cm4gVUludDY0KFFVT1JVTV9TVEFUVVNfRVhDRUVERUQpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCBxdW9ydW0gcHJvZ3Jlc3MgYXMgcGVyY2VudGFnZSAoMC0xMDAwMCBicHMpIGZvciBhIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3MocHJvcG9zYWxfbm9kZS5ieXRlcykpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIHF1b3J1bSB0aHJlc2hvbGQgZm9yIGEgc3BlY2lmaWMgcHJvcG9zYWwiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQocHJvcG9zYWxfbm9kZS5ieXRlcykpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgcXVvcnVtIHRocmVzaG9sZCBmb3IgYSBzcGVjaWZpYyBwcm9wb3NhbCIiIgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICByZXR1cm4gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVwZGF0ZV90b3RhbF92b3RpbmdfcG93ZXIoc2VsZiwgbmV3X3RvdGFsX3Bvd2VyOiBhcmM0LlVJbnQyNTYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiVXBkYXRlIHRoZSB0b3RhbCB2b3RpbmcgcG93ZXIgKHVzZWQgd2hlbiB0b2tlbiBiYWxhbmNlcyBjaGFuZ2UpIiIiCiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX3RvdGFsX3ZvdGluZ19wb3dlcihuZXdfdG90YWxfcG93ZXIubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdXBkYXRlX3RvdGFsX3ZvdGluZ19wb3dlcihzZWxmLCBuZXdfdG90YWxfcG93ZXI6IEJpZ1VJbnQpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiVXBkYXRlIHRoZSB0b3RhbCB2b3RpbmcgcG93ZXIiIiIKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IG5ld190b3RhbF9wb3dlcgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgIHNlbGYsIGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGJvbnVzIG11bHRpcGxpZXIgZm9yIGEgZ2l2ZW4gbG9ja3VwIGR1cmF0aW9uIGluIHNlY29uZHMiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihsb2NrdXBfZHVyYXRpb25fc2Vjb25kcy5uYXRpdmUpCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2xvY2t1cF90aWVyX2luZm8oc2VsZiwgbG9ja3VwX2R1cmF0aW9uX3NlY29uZHM6IGFyYzQuVUludDY0KSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGxvY2t1cCB0aWVyICgxLTUpIGZvciBhIGdpdmVuIGR1cmF0aW9uIiIiCiAgICAvLyAgICAgdGllcl9pbmZvID0gc2VsZi5fZ2V0X2xvY2t1cF90aWVyX2luZm8obG9ja3VwX2R1cmF0aW9uX3NlY29uZHMubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NCh0aWVyX2luZm9bMF0pCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjYWxjdWxhdGVfcG90ZW50aWFsX3Bvd2VyX2dyYW50ZWQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IGFyYzQuVUludDI1NiwKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb25fc2Vjb25kczogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IGFyYzQuVUludDI1NjoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgcG90ZW50aWFsIHZvdGluZyBwb3dlciBncmFudGVkIGZvciBhIGdpdmVuIGxvY2t1cCBzY2VuYXJpbyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgICAgIHNlbGYuX2NhbGN1bGF0ZV9wb3RlbnRpYWxfcG93ZXJfZ3JhbnRlZCgKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50Lm5hdGl2ZSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzLm5hdGl2ZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2NhbGN1bGF0ZV9wb3RlbnRpYWxfcG93ZXJfZ3JhbnRlZCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ6IEJpZ1VJbnQsCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uX3NlY29uZHM6IFVJbnQ2NCwKICAgIC8vICkgLT4gQmlnVUludDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgcG90ZW50aWFsIHZvdGluZyBwb3dlciBncmFudGVkIGZvciBhIGdpdmVuIGxvY2t1cCBzY2VuYXJpbyIiIgogICAgLy8gICAgIHBvd2VyX3NvdXJjZSA9IHNlbGYuX2dldF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkKQogICAgLy8gICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyID0gc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBsb2NrdXBfZHVyYXRpb25fc2Vjb25kcwogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX2dyYW50ZWQgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQKICAgIC8vICAgICAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyAgICAgKSAvLyBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHJldHVybiBwb3dlcl9ncmFudGVkCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfbG9ja3VwX3RpZXJfZHVyYXRpb24oc2VsZiwgdGllcjogYXJjNC5VSW50NjQpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgbWluaW11bSBkdXJhdGlvbiByZXF1aXJlZCBmb3IgYSBzcGVjaWZpYyBsb2NrdXAgdGllciIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfbG9ja3VwX3RpZXJfZHVyYXRpb24odGllci5uYXRpdmUpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uKHNlbGYsIHRpZXI6IFVJbnQ2NCkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgbWluaW11bSBkdXJhdGlvbiByZXF1aXJlZCBmb3IgYSBzcGVjaWZpYyBsb2NrdXAgdGllciIiIgogICAgLy8gICAgIGlmIHRpZXIgPT0gMToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfVElFUl8xX0RVUkFUSU9OKQogICAgLy8gICAgIGVsaWYgdGllciA9PSAyOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9USUVSXzJfRFVSQVRJT04pCiAgICAvLyAgICAgZWxpZiB0aWVyID09IDM6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX1RJRVJfM19EVVJBVElPTikKICAgIC8vICAgICBlbGlmIHRpZXIgPT0gNDoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfVElFUl80X0RVUkFUSU9OKQogICAgLy8gICAgIGVsaWYgdGllciA9PSA1OgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9USUVSXzVfRFVSQVRJT04pCiAgICAvLyAgICAgZWxzZToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgwKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2xvY2t1cF90aWVyX2JvbnVzKHNlbGYsIHRpZXI6IGFyYzQuVUludDY0KSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGJvbnVzIG11bHRpcGxpZXIgZm9yIGEgc3BlY2lmaWMgbG9ja3VwIHRpZXIiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2xvY2t1cF90aWVyX2JvbnVzKHRpZXIubmF0aXZlKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9ib251cyhzZWxmLCB0aWVyOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGJvbnVzIG11bHRpcGxpZXIgZm9yIGEgc3BlY2lmaWMgbG9ja3VwIHRpZXIiIiIKICAgIC8vICAgICBpZiB0aWVyID09IDE6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIC8vICAgICBlbGlmIHRpZXIgPT0gMjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKQogICAgLy8gICAgIGVsaWYgdGllciA9PSAzOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpCiAgICAvLyAgICAgZWxpZiB0aWVyID09IDQ6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIC8vICAgICBlbGlmIHRpZXIgPT0gNToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMTAwMDApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcG93ZXJfbG9ja19pbmZvKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCBjb21wcmVoZW5zaXZlIGxvY2t1cCBpbmZvcm1hdGlvbiBmb3IgYSBwb3dlciBsb2NrIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBzZWxmLl9nZXRfcG93ZXJfbG9ja19pbmZvKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wb3dlcl9sb2NrX2luZm8oCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IFVJbnQ2NAogICAgLy8gKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IGNvbXByZWhlbnNpdmUgbG9ja3VwIGluZm9ybWF0aW9uIGZvciBhIHBvd2VyIGxvY2siIiIKICAgIC8vICAgICBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgLy8gICAgIGlmIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX2lkLm5hdGl2ZSA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICByZW1haW5pbmdfdGltZSA9ICgKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUgLSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIGlmIHJlbWFpbmluZ190aW1lIDw9IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMCkKICAgIC8vIAogICAgLy8gICAgIHRpZXJfaW5mbyA9IHNlbGYuX2dldF9sb2NrdXBfdGllcl9pbmZvKHBvd2VyX2xvY2subG9ja3VwX2R1cmF0aW9uLm5hdGl2ZSkKICAgIC8vICAgICByZXR1cm4gdGllcl9pbmZvWzBdCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBCaWdVSW50OgogICAgLy8gICAgICIiIkdldCBxdW9ydW0gcHJvZ3Jlc3MgYXMgcGVyY2VudGFnZSAoMC0xMDAwMCBicHMpIGZvciBhIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGlmIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBCaWdVSW50KDEwMDAwKQogICAgLy8gCiAgICAvLyAgICAgcHJvZ3Jlc3MgPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSAqIDEwMDAwCiAgICAvLyAgICAgKSAvLyBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvZ3Jlc3MgPiAxMDAwMDoKICAgIC8vICAgICAgICAgcHJvZ3Jlc3MgPSBCaWdVSW50KDEwMDAwKQogICAgLy8gICAgIHJldHVybiBwcm9ncmVzcwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2hlY2tfcHJvcG9zYWxfcXVvcnVtKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBib29sOgogICAgLy8gICAgICIiIkNoZWNrIGlmIGEgcHJvcG9zYWwgbWVldHMgdGhlIHF1b3J1bSByZXF1aXJlbWVudCIiIgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTEzCiAgICAvLyBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIGFzc2VydCAvLyBQcm9wb3NhbCBkb2VzIG5vdCBleGlzdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUxNAogICAgLy8gcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3Byb3Bvc2FsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTE3CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIGR1cAogICAgaW50IDY4MAogICAgaW50IDMyCiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1MTgKICAgIC8vID49IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICBpbnQgODI0CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTE3LTE1MTgKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gPj0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIGl0b2IKICAgIGI+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUxNi0xNTE5CiAgICAvLyByZXR1cm4gKAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgID49IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyApCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmdldF9wcm9wb3NhbF9xdW9ydW1fc3RhdHVzKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzI3LTEzMjgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9xdW9ydW1fc3RhdHVzKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzMwCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXMocHJvcG9zYWxfbm9kZS5ieXRlcykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9wcm9wb3NhbF9xdW9ydW1fc3RhdHVzCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9nZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1cyhwcm9wb3NhbF9ub2RlOiBieXRlcykgLT4gdWludDY0OgpfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzMxLTEzMzIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9xdW9ydW1fc3RhdHVzKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzMzQKICAgIC8vIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwLTEzMzUKICAgIC8vICAgICBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIC8vICAgICBzZWxmLnZvdGVzID0gQm94TWFwKEJ5dGVzNjQsIFVJbnQ2NCwga2V5X3ByZWZpeD1iIiIpCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzID0gQm94TWFwKAogICAgLy8gICAgICAgICBVSW50NjQsIFBvd2VyU291cmNlLCBrZXlfcHJlZml4PWIicV8iCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3MgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfc291cmNlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1wb3dlcl9zb3VyY2VfaWQsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgdGhlIGJvbnVzIG11bHRpcGxpZXIgYmFzZWQgb24gbG9ja3VwIGR1cmF0aW9uIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfaW5mbyhzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gdHVwbGVbVUludDY0LCBVSW50NjRdOgogICAgLy8gICAgICIiIkdldCBsb2NrdXAgdGllciBpbmZvcm1hdGlvbjogKHRpZXJfbnVtYmVyLCBib251c19tdWx0aXBsaWVyKSIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg1KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDQpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMyksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgyKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDEpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIkNhbm5vdCBsb2NrIHBvd2VyIGluIHRoZSBwYXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgbXVzdCBiZSBhdCBsZWFzdCAxIHdlZWsiCiAgICAvLyAKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb24gPSBwb3dlcl91bmxvY2tfdGltZXN0YW1wIC0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllciA9IHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcG93ZXJfc291cmNlID0gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQpCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgbm90IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGFscmVhZHkgZXhpc3RzIgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAgICAgICAgICogKHBvd2VyX3NvdXJjZS5wb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSArIGxvY2t1cF9ib251c19tdWx0aXBsaWVyKQogICAgLy8gICAgICkgLy8gQmlnVUludCgxMDAwMCkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XSA9IFBvd2VyTG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYocG93ZXJfZ3JhbnRlZCksCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NChsb2NrdXBfZHVyYXRpb24pLAogICAgLy8gICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChsb2NrdXBfYm9udXNfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBuZXdfdm90ZV9wb3dlciA9IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gICAgIHZvdGVyLnZvdGVyX2FkZHJlc3MgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICB2b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld192b3RlX3Bvd2VyKQogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9sb2Nrcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJMb2NrKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VubG9ja19wb3dlcihwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9jayA9IHNlbGYuX2dldF9wb3dlcl9sb2NrKHBvd2VyX3NvdXJjZV9pZCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgaXMgbm90IHlldCB1bmxvY2tlZCIKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX293bmVyID0gcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIubmF0aXZlCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIocG93ZXJfb3duZXIpCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9IHBvd2VyX2xvY2sucG93ZXJfZ3JhbnRlZC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2dyYW50ZWQgPD0gcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApLCAiTm90IGVub3VnaCB2b3RpbmcgcG93ZXIiCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgLSBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudm90ZXJzW3Bvd2VyX293bmVyXSA9IHBvd2VyX293bmVyX3ZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciAtIHBvd2VyX2dyYW50ZWQKICAgIC8vIAogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIsCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX2Ftb3VudCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGRlbCBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfbm9kZSgKICAgIC8vICAgICBzZWxmLCBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzNTEyCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLmJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5zaGEyNTYocHJvcG9zYWxfdGl0bGUgKyBwcm9wb3NhbF9kZXNjcmlwdGlvbikpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wcm9wb3NhbHMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3RlKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF92b3RlKHByb3Bvc2FsX25vZGUuYnl0ZXMsIGFjY291bnQubmF0aXZlKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyAgICAgYWNjb3VudDogQWNjb3VudCwKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLnZvdGVzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgYWNjb3VudC5ieXRlcyksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9VUludDY0KDIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHByb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3Byb3Bvc2UoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3RpdGxlLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcywKICAgIC8vICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3Byb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkOiBVSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZSA9IHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLCBwcm9wb3NhbF9kZXNjcmlwdGlvbikKICAgIC8vICAgICBhc3NlcnQgcHJvcG9zYWxfbm9kZSBub3QgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBJRCBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4ID0gc2VsZi5wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9pbmRleCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2luZGV4KQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19QRU5ESU5HKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2VyID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdGl0bGUgPSBCeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfdGl0bGUpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfZGVzY3JpcHRpb24gPSBCeXRlczUxMi5mcm9tX2J5dGVzKHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9jYXRlZ29yeV9pZCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2NhdGVnb3J5X2lkKQogICAgLy8gICAgIHByb3Bvc2FsLmNyZWF0ZWRfYXRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9EQVkKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX2VuZF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wICsgU0VDT05EU19QRVJfV0VFSyArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQgPSBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcXVvcnVtX3RocmVzaG9sZCgpKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbF9jb3VudCA9IHByb3Bvc2FsX2luZGV4CiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBQcm9wb3NhbENyZWF0ZWQoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9ub2RlPXByb3Bvc2FsX25vZGUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHByb3Bvc2FsX25vZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFjdGl2YXRlX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hY3RpdmF0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUEVORElORwogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcGVuZGluZyIKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiVm90aW5nIHBlcmlvZCBoYXMgbm90IHN0YXJ0ZWQgeWV0IgogICAgLy8gCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBhc3NlcnQgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPiAwLCAiWW91IGhhdmUgbm8gdm90aW5nIHBvd2VyIgogICAgLy8gCiAgICAvLyAgICAgbmV3X2FjdGl2YXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlciA9IGFyYzQuVUludDI1NihuZXdfYWN0aXZhdGlvbl9wb3dlcikKICAgIC8vIAogICAgLy8gICAgIGlmIG5ld19hY3RpdmF0aW9uX3Bvd2VyID49IHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQ6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgICAgICBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19BQ1RJVkUpCiAgICAvLyAKICAgIC8vICAgICAgICAgc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FzdF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICAgICBzdXBwb3J0OiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9jYXN0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgc3VwcG9ydC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBzdXBwb3J0OiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICB2b3RlX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgVHhuLnNlbmRlci5ieXRlcykKICAgIC8vICAgICBhc3NlcnQgdm90ZV9rZXkgbm90IGluIHNlbGYudm90ZXMsICJZb3UgaGF2ZSBhbHJlYWR5IHZvdGVkIgogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgc3VwcG9ydCA8IDIsICJJbnZhbGlkIHZvdGUiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdLnByb3Bvc2FsX3N0YXR1cyA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdLnZvdGluZ19lbmRfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICAgICA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgaGFzIGVuZGVkIgogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3Rlc1t2b3RlX2tleV0gPSBzdXBwb3J0CiAgICAvLyAKICAgIC8vICAgICB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlICsgMQogICAgLy8gICAgICkKICAgIC8vICAgICB2b3Rlci5sYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgdm90ZXIudm90ZV90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci5sYXN0X3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChfcHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3RlcyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3RlcyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfdm90ZXMubmF0aXZlICsgc3VwcG9ydAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBpZiBzdXBwb3J0ID09IDE6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc19wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc19wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudm90ZV9jb3VudCA9IHNlbGYudm90ZV9jb3VudCArIDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHJlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIkNoZWNrIGlmIGEgcGVuZGluZyBwcm9wb3NhbCBzaG91bGQgYmUgcmVqZWN0ZWQgZHVlIHRvIGluc3VmZmljaWVudCBhY3RpdmF0aW9uIHZvdGVzIiIiCiAgICAvLyAgICAgc2VsZi5fcmVqZWN0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWplY3RfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSAhPSBQUk9QT1NBTF9TVEFUVVNfUEVORElORzoKICAgIC8vICAgICAgICAgcmV0dXJuCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSA8PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcDoKICAgIC8vIAogICAgLy8gICAgICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyLm5hdGl2ZSA8IHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQ6CiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQpCiAgICAvLyAgICAgICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNhbmNlbF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2NhbmNlbF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19DQU5DRUxFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGZpbmFsaXplX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiRmluYWxpemUgYSBwcm9wb3NhbCBhZnRlciB2b3RpbmcgcGVyaW9kIGVuZHMiIiIKICAgIC8vIAogICAgLy8gICAgIHBhc3MKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2ZpbmFsaXplX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX0FDVElWRQogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgYWN0aXZlIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlIDwgR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiVm90aW5nIHBlcmlvZCBoYXMgbm90IGVuZGVkIgogICAgLy8gCiAgICAvLyAgICAgc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCAtIDEKICAgIC8vIAogICAgLy8gICAgIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID0gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgKyAxCiAgICAvLyAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyID0gKAogICAgLy8gICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgKyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlID4gMDoKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgICAgIGVzdGltYXRlZF91bmlxdWVfdm90ZXJzID0gcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgPSAoCiAgICAvLyAgICAgICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzICsgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgbWVldHNfcXVvcnVtID0gKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgPj0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fbWV0ID0gYXJjNC5Cb29sKG1lZXRzX3F1b3J1bSkKICAgIC8vICAgICBpZiAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICA8IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgKToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfTk9UX01FVCkKICAgIC8vICAgICBlbGlmICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgID09IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgKToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfTUVUKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9zdGF0dXMgPSBhcmM0LlVJbnQ2NChRVU9SVU1fU1RBVFVTX0VYQ0VFREVEKQogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlID09IDA6CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0VYUElSRUQpCiAgICAvLyAgICAgZWxpZiBub3QgbWVldHNfcXVvcnVtOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICBlbGlmIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgPiAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSAtIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBxdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIlF1ZXVlIGEgc3VjY2VlZGVkIHByb3Bvc2FsIGZvciBleGVjdXRpb24iIiIKICAgIC8vICAgICBzZWxmLl9xdWV1ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcXVldWVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfU1VDQ0VFREVECiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBzdWNjZWVkZWQiCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1FVRVVFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGV4ZWN1dGVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJFeGVjdXRlIGEgcXVldWVkIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgc2VsZi5fZXhlY3V0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZXhlY3V0ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19RVUVVRUQKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHF1ZXVlZCIKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfRVhFQ1VURUQpCiAgICAvLyAgICAgcHJvcG9zYWwuZXhlY3V0ZWRfYXRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB2ZXRvX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiVmV0byBhIHF1ZXVlZCBwcm9wb3NhbCIiIgogICAgLy8gICAgIHNlbGYuX3ZldG9fcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3ZldG9fcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUVVFVUVECiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBxdWV1ZWQiCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfQ0FOQ0VMRUQpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYWN0aXZlX3Byb3Bvc2FsX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgY3VycmVudCBudW1iZXIgb2YgYWN0aXZlIHByb3Bvc2FscyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF90b3RhbF92b3Rlcl9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHVuaXF1ZSB2b3RlcnMiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi50b3RhbF92b3Rlcl9jb3VudCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wYXJ0aWNpcGF0aW9uX3JhdGUoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBjdXJyZW50IHBhcnRpY2lwYXRpb24gcmF0ZSBhcyBhIHBlcmNlbnRhZ2UgKDAtMTAwKSIiIgogICAgLy8gICAgIGlmIHNlbGYudG90YWxfdm90ZXJfY291bnQgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICBwYXJ0aWNpcGF0aW9uX3JhdGUgPSAoCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKiAxMDAKICAgIC8vICAgICApIC8vIHNlbGYudG90YWxfdm90ZXJfY291bnQKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQocGFydGljaXBhdGlvbl9yYXRlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3BhcnRpY2lwYXRpb25fcmF0ZShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgcGFydGljaXBhdGlvbiByYXRlIGZvciBhIHNwZWNpZmljIHByb3Bvc2FsIGFzIGEgcGVyY2VudGFnZSAoMC0xMDApIiIiCiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIGlmIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAgICAgcGFydGljaXBhdGlvbl9yYXRlID0gKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUgKiAxMDAKICAgIC8vICAgICApIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHBhcnRpY2lwYXRpb25fcmF0ZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9lbGlnaWJsZV92b3Rlcl9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiB2b3RlcnMgd2l0aCB2b3RpbmcgcG93ZXIgPiAwIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYudG90YWxfdm90ZXJfY291bnQpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcGFydGljaXBhdGluZ192b3Rlcl9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiB2b3RlcnMgd2hvIGhhdmUgYWN0dWFsbHkgcGFydGljaXBhdGVkIGluIHZvdGluZyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2ZpbmFsaXplZF9wcm9wb3NhbF9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiBwcm9wb3NhbHMgdGhhdCBoYXZlIGJlZW4gZmluYWxpemVkIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2F2ZXJhZ2VfcGFydGljaXBhdGlvbl9wZXJfcHJvcG9zYWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IGF2ZXJhZ2UgcGFydGljaXBhdGlvbiBwb3dlciBwZXIgZmluYWxpemVkIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgaWYgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAgICAgYXZlcmFnZV9wYXJ0aWNpcGF0aW9uID0gKAogICAgLy8gICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KGF2ZXJhZ2VfcGFydGljaXBhdGlvbikKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9hdmVyYWdlX3ZvdGVzX3Blcl9wcm9wb3NhbChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgYXZlcmFnZSBudW1iZXIgb2Ygdm90ZXMgcGVyIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgaWYgc2VsZi5wcm9wb3NhbF9jb3VudCA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vICAgICBhdmVyYWdlX3ZvdGVzID0gc2VsZi52b3RlX2NvdW50IC8vIHNlbGYucHJvcG9zYWxfY291bnQKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoYXZlcmFnZV92b3RlcykKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3Rlcl9pbmZsdWVuY2Vfc2NvcmUoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgaW5mbHVlbmNlIHNjb3JlIGZvciBhIHNwZWNpZmljIHZvdGVyICgwLTEwMCkgYmFzZWQgb24gdm90aW5nIHBvd2VyIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgaWYgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICBpZiBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vIAogICAgLy8gICAgIGluZmx1ZW5jZV9zY29yZSA9ICh2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAqIDEwMCkgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoaW5mbHVlbmNlX3Njb3JlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX2VuZ2FnZW1lbnRfc2NvcmUoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgZW5nYWdlbWVudCBzY29yZSBmb3IgYSBzcGVjaWZpYyB2b3RlciAoMC0xMDApIGJhc2VkIG9uIGFjdHVhbCBwYXJ0aWNpcGF0aW9uIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgaWYgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIGlmIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBhcnRpY2lwYXRpb25fZnJlcXVlbmN5ID0gKAogICAgLy8gICAgICAgICB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkLm5hdGl2ZSAqIDEwMAogICAgLy8gICAgICkgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQKICAgIC8vICAgICB2b3RpbmdfcG93ZXJfd2VpZ2h0ID0gKHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICogMTAwKSAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlcgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBlbmdhZ2VtZW50X3Njb3JlID0gKAogICAgLy8gICAgICAgICBwYXJ0aWNpcGF0aW9uX2ZyZXF1ZW5jeSAqIDcwICsgdm90aW5nX3Bvd2VyX3dlaWdodCAqIDMwCiAgICAvLyAgICAgKSAvLyAxMDAKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoZW5nYWdlbWVudF9zY29yZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGhhc192b3Rlcl9wYXJ0aWNpcGF0ZWRfaW5fcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyCiAgICAvLyApIC0+IGFyYzQuQm9vbDoKICAgIC8vICAgICAiIiJDaGVjayBpZiBhIHZvdGVyIGhhcyBwYXJ0aWNpcGF0ZWQgaW4gYSBzcGVjaWZpYyBwcm9wb3NhbCIiIgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBhcmM0LkJvb2wodm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgPiAwKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX3BhcnRpY2lwYXRpb25fdGltZXN0YW1wKAogICAgLy8gICAgIHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcywgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMgogICAgLy8gKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIHRpbWVzdGFtcCB3aGVuIGEgdm90ZXIgcGFydGljaXBhdGVkIGluIGEgc3BlY2lmaWMgcHJvcG9zYWwiIiIKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQodm90ZXIubGFzdF9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcC5uYXRpdmUpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZXJfcHJvcG9zYWxfY291bnQoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiBwcm9wb3NhbHMgYSB2b3RlciBoYXMgcGFydGljaXBhdGVkIGluIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX2xhc3RfcHJvcG9zYWxfbm9kZShzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBub2RlIG9mIHRoZSBsYXN0IHByb3Bvc2FsIHRoaXMgdm90ZXIgcGFydGljaXBhdGVkIGluIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmKSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBnbG9iYWwgcXVvcnVtIHJlcXVpcmVtZW50IGluIGJhc2lzIHBvaW50cyAoYnBzKSB3aXRoIGJhc2Ugb2YgMTAwMDAiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50MjU2KHNlbGYucXVvcnVtX3JlcXVpcmVtZW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmLCBxdW9ydW1fYnBzOiBhcmM0LlVJbnQyNTYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiU2V0IHRoZSBnbG9iYWwgcXVvcnVtIHJlcXVpcmVtZW50IGluIGJhc2lzIHBvaW50cyAoYnBzKSB3aXRoIGJhc2Ugb2YgMTAwMDAiIiIKICAgIC8vICAgICBzZWxmLl9zZXRfcXVvcnVtX3JlcXVpcmVtZW50KHF1b3J1bV9icHMubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmLCBxdW9ydW1fYnBzOiBCaWdVSW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIlNldCB0aGUgZ2xvYmFsIHF1b3J1bSByZXF1aXJlbWVudCBpbiBiYXNpcyBwb2ludHMgKGJwcykgd2l0aCBiYXNlIG9mIDEwMDAwIiIiCiAgICAvLyAgICAgYXNzZXJ0IHF1b3J1bV9icHMgPD0gMTAwMDAsICJRdW9ydW0gcmVxdWlyZW1lbnQgY2Fubm90IGV4Y2VlZCAxMDAlICgxMDAwMCBicHMpIgogICAgLy8gICAgIHNlbGYucXVvcnVtX3JlcXVpcmVtZW50ID0gcXVvcnVtX2JwcwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3F1b3J1bV90aHJlc2hvbGQoc2VsZikgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgICIiIkdldCB0aGUgY3VycmVudCBxdW9ydW0gdGhyZXNob2xkIGluIHZvdGluZyBwb3dlciB1bml0cyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQyNTYoc2VsZi5fZ2V0X3F1b3J1bV90aHJlc2hvbGQoKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9xdW9ydW1fdGhyZXNob2xkKHNlbGYpIC0+IEJpZ1VJbnQ6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHRoZSBjdXJyZW50IHF1b3J1bSB0aHJlc2hvbGQgaW4gdm90aW5nIHBvd2VyIHVuaXRzIiIiCiAgICAvLyAKICAgIC8vICAgICByZXR1cm4gKHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICogc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQpIC8vIEJpZ1VJbnQoMTAwMDApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjaGVja19wcm9wb3NhbF9xdW9ydW0oc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5Cb29sOgogICAgLy8gICAgICIiIkNoZWNrIGlmIGEgcHJvcG9zYWwgbWVldHMgdGhlIHF1b3J1bSByZXF1aXJlbWVudCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LkJvb2woc2VsZi5fY2hlY2tfcHJvcG9zYWxfcXVvcnVtKHByb3Bvc2FsX25vZGUuYnl0ZXMpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXMoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHF1b3J1bSBzdGF0dXMgZm9yIGEgcHJvcG9zYWw6IDAgPSBub3QgbWV0LCAxID0gbWV0LCAyID0gZXhjZWVkZWQiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXMocHJvcG9zYWxfbm9kZS5ieXRlcykpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1cyhzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgICIiIkdldCBxdW9ydW0gc3RhdHVzIGZvciBhIHByb3Bvc2FsOiAwID0gbm90IG1ldCwgMSA9IG1ldCwgMiA9IGV4Y2VlZGVkIiIiCiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBib3hfbGVuCiAgICBjb3ZlciAxCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzMzUKICAgIC8vIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgYXNzZXJ0IC8vIFByb3Bvc2FsIGRvZXMgbm90IGV4aXN0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzM2CiAgICAvLyBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfcHJvcG9zYWwKICAgIGR1cAogICAgY292ZXIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTMzOQogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfU1VDQ0VFREVECiAgICBpbnQgOAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgaW50IDQKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzM5LTEzNDEKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRAogICAgLy8gb3IgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQKICAgIC8vIG9yIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX0VYUElSRUQKICAgIGJueiBfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXNfaWZfYm9keUAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzQwCiAgICAvLyBvciBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRAogICAgZnJhbWVfZGlnIDAKICAgIGludCA4CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMwogICAgPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzMzktMTM0MQogICAgLy8gcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfU1VDQ0VFREVECiAgICAvLyBvciBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRAogICAgLy8gb3IgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfRVhQSVJFRAogICAgYm56IF9nZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1c19pZl9ib2R5QDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNDEKICAgIC8vIG9yIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX0VYUElSRUQKICAgIGZyYW1lX2RpZyAwCiAgICBpbnQgOAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgaW50IDYKICAgID09CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzM5LTEzNDEKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX1NVQ0NFRURFRAogICAgLy8gb3IgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQKICAgIC8vIG9yIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX0VYUElSRUQKICAgIGJ6IF9nZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1c19lbHNlX2JvZHlANAoKX2dldF9wcm9wb3NhbF9xdW9ydW1fc3RhdHVzX2lmX2JvZHlAMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNDMKICAgIC8vIHJldHVybiBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzLm5hdGl2ZQogICAgZnJhbWVfZGlnIDAKICAgIGludCA4MzMKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHVuY292ZXIgMQogICAgcmV0c3ViCgpfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXNfZWxzZV9ib2R5QDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzQ3CiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIGZyYW1lX2RpZyAwCiAgICBkdXAKICAgIGludCA2ODAKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzQ4CiAgICAvLyA8IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICBpbnQgODI0CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzQ3LTEzNDgKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gPCBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgaXRvYgogICAgYjwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNDYtMTM0OQogICAgLy8gaWYgKAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgIDwgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICk6CiAgICBieiBfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXNfZWxzZV9ib2R5QDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNTAKICAgIC8vIHJldHVybiBVSW50NjQoUVVPUlVNX1NUQVRVU19OT1RfTUVUKQogICAgaW50IDAKICAgIHVuY292ZXIgMQogICAgcmV0c3ViCgpfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXNfZWxzZV9ib2R5QDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzUyCiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIGZyYW1lX2RpZyAwCiAgICBkdXAKICAgIGludCA2ODAKICAgIGludCAzMgogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzUzCiAgICAvLyA9PSBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkLm5hdGl2ZQogICAgaW50IDgyNAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM1Mi0xMzUzCiAgICAvLyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vID09IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICBpdG9iCiAgICBiPT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNTEtMTM1NAogICAgLy8gZWxpZiAoCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgPT0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICk6CiAgICBieiBfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXNfZWxzZV9ib2R5QDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNTUKICAgIC8vIHJldHVybiBVSW50NjQoUVVPUlVNX1NUQVRVU19NRVQpCiAgICBpbnQgMQogICAgdW5jb3ZlciAxCiAgICByZXRzdWIKCl9nZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1c19lbHNlX2JvZHlAODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNTcKICAgIC8vIHJldHVybiBVSW50NjQoUVVPUlVNX1NUQVRVU19FWENFRURFRCkKICAgIGludCAyCiAgICB1bmNvdmVyIDEKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X3Byb3Bvc2FsX3F1b3J1bV9wcm9ncmVzcyhwcm9wb3NhbF9ub2RlOiBieXRlcykgLT4gYnl0ZXM6CmdldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3M6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzU4LTEzNTkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3Moc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNjEKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzKHByb3Bvc2FsX25vZGUuYnl0ZXMpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzCiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCA4CiAgICBiemVybwogICAgYnwKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2dldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3MocHJvcG9zYWxfbm9kZTogYnl0ZXMpIC0+IGJ5dGVzOgpfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9wcm9ncmVzczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0OTMtMTQ5NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9wcm9ncmVzcyhzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gQmlnVUludDoKICAgIHByb3RvIDEgMQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0OTYKICAgIC8vIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwLTE0OTcKICAgIC8vICAgICBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIC8vICAgICBzZWxmLnZvdGVzID0gQm94TWFwKEJ5dGVzNjQsIFVJbnQ2NCwga2V5X3ByZWZpeD1iIiIpCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzID0gQm94TWFwKAogICAgLy8gICAgICAgICBVSW50NjQsIFBvd2VyU291cmNlLCBrZXlfcHJlZml4PWIicV8iCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3MgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfc291cmNlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1wb3dlcl9zb3VyY2VfaWQsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgdGhlIGJvbnVzIG11bHRpcGxpZXIgYmFzZWQgb24gbG9ja3VwIGR1cmF0aW9uIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfaW5mbyhzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gdHVwbGVbVUludDY0LCBVSW50NjRdOgogICAgLy8gICAgICIiIkdldCBsb2NrdXAgdGllciBpbmZvcm1hdGlvbjogKHRpZXJfbnVtYmVyLCBib251c19tdWx0aXBsaWVyKSIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg1KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDQpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMyksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgyKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDEpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIkNhbm5vdCBsb2NrIHBvd2VyIGluIHRoZSBwYXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgbXVzdCBiZSBhdCBsZWFzdCAxIHdlZWsiCiAgICAvLyAKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb24gPSBwb3dlcl91bmxvY2tfdGltZXN0YW1wIC0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllciA9IHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcG93ZXJfc291cmNlID0gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQpCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgbm90IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGFscmVhZHkgZXhpc3RzIgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAgICAgICAgICogKHBvd2VyX3NvdXJjZS5wb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSArIGxvY2t1cF9ib251c19tdWx0aXBsaWVyKQogICAgLy8gICAgICkgLy8gQmlnVUludCgxMDAwMCkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XSA9IFBvd2VyTG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYocG93ZXJfZ3JhbnRlZCksCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NChsb2NrdXBfZHVyYXRpb24pLAogICAgLy8gICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChsb2NrdXBfYm9udXNfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBuZXdfdm90ZV9wb3dlciA9IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gICAgIHZvdGVyLnZvdGVyX2FkZHJlc3MgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICB2b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld192b3RlX3Bvd2VyKQogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9sb2Nrcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJMb2NrKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VubG9ja19wb3dlcihwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9jayA9IHNlbGYuX2dldF9wb3dlcl9sb2NrKHBvd2VyX3NvdXJjZV9pZCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgaXMgbm90IHlldCB1bmxvY2tlZCIKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX293bmVyID0gcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIubmF0aXZlCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIocG93ZXJfb3duZXIpCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9IHBvd2VyX2xvY2sucG93ZXJfZ3JhbnRlZC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2dyYW50ZWQgPD0gcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApLCAiTm90IGVub3VnaCB2b3RpbmcgcG93ZXIiCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgLSBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudm90ZXJzW3Bvd2VyX293bmVyXSA9IHBvd2VyX293bmVyX3ZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciAtIHBvd2VyX2dyYW50ZWQKICAgIC8vIAogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIsCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX2Ftb3VudCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGRlbCBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfbm9kZSgKICAgIC8vICAgICBzZWxmLCBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzNTEyCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLmJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5zaGEyNTYocHJvcG9zYWxfdGl0bGUgKyBwcm9wb3NhbF9kZXNjcmlwdGlvbikpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wcm9wb3NhbHMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3RlKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF92b3RlKHByb3Bvc2FsX25vZGUuYnl0ZXMsIGFjY291bnQubmF0aXZlKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyAgICAgYWNjb3VudDogQWNjb3VudCwKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLnZvdGVzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgYWNjb3VudC5ieXRlcyksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9VUludDY0KDIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHByb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3Byb3Bvc2UoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3RpdGxlLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcywKICAgIC8vICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3Byb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkOiBVSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZSA9IHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLCBwcm9wb3NhbF9kZXNjcmlwdGlvbikKICAgIC8vICAgICBhc3NlcnQgcHJvcG9zYWxfbm9kZSBub3QgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBJRCBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4ID0gc2VsZi5wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9pbmRleCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2luZGV4KQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19QRU5ESU5HKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2VyID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdGl0bGUgPSBCeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfdGl0bGUpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfZGVzY3JpcHRpb24gPSBCeXRlczUxMi5mcm9tX2J5dGVzKHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9jYXRlZ29yeV9pZCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2NhdGVnb3J5X2lkKQogICAgLy8gICAgIHByb3Bvc2FsLmNyZWF0ZWRfYXRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9EQVkKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX2VuZF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wICsgU0VDT05EU19QRVJfV0VFSyArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQgPSBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcXVvcnVtX3RocmVzaG9sZCgpKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbF9jb3VudCA9IHByb3Bvc2FsX2luZGV4CiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBQcm9wb3NhbENyZWF0ZWQoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9ub2RlPXByb3Bvc2FsX25vZGUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHByb3Bvc2FsX25vZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFjdGl2YXRlX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hY3RpdmF0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUEVORElORwogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcGVuZGluZyIKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiVm90aW5nIHBlcmlvZCBoYXMgbm90IHN0YXJ0ZWQgeWV0IgogICAgLy8gCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBhc3NlcnQgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPiAwLCAiWW91IGhhdmUgbm8gdm90aW5nIHBvd2VyIgogICAgLy8gCiAgICAvLyAgICAgbmV3X2FjdGl2YXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlciA9IGFyYzQuVUludDI1NihuZXdfYWN0aXZhdGlvbl9wb3dlcikKICAgIC8vIAogICAgLy8gICAgIGlmIG5ld19hY3RpdmF0aW9uX3Bvd2VyID49IHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQ6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgICAgICBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19BQ1RJVkUpCiAgICAvLyAKICAgIC8vICAgICAgICAgc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FzdF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICAgICBzdXBwb3J0OiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9jYXN0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgc3VwcG9ydC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBzdXBwb3J0OiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICB2b3RlX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgVHhuLnNlbmRlci5ieXRlcykKICAgIC8vICAgICBhc3NlcnQgdm90ZV9rZXkgbm90IGluIHNlbGYudm90ZXMsICJZb3UgaGF2ZSBhbHJlYWR5IHZvdGVkIgogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgc3VwcG9ydCA8IDIsICJJbnZhbGlkIHZvdGUiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdLnByb3Bvc2FsX3N0YXR1cyA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdLnZvdGluZ19lbmRfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICAgICA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgaGFzIGVuZGVkIgogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3Rlc1t2b3RlX2tleV0gPSBzdXBwb3J0CiAgICAvLyAKICAgIC8vICAgICB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlICsgMQogICAgLy8gICAgICkKICAgIC8vICAgICB2b3Rlci5sYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgdm90ZXIudm90ZV90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci5sYXN0X3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChfcHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3RlcyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3RlcyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfdm90ZXMubmF0aXZlICsgc3VwcG9ydAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBpZiBzdXBwb3J0ID09IDE6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc19wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc19wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudm90ZV9jb3VudCA9IHNlbGYudm90ZV9jb3VudCArIDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHJlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIkNoZWNrIGlmIGEgcGVuZGluZyBwcm9wb3NhbCBzaG91bGQgYmUgcmVqZWN0ZWQgZHVlIHRvIGluc3VmZmljaWVudCBhY3RpdmF0aW9uIHZvdGVzIiIiCiAgICAvLyAgICAgc2VsZi5fcmVqZWN0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWplY3RfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSAhPSBQUk9QT1NBTF9TVEFUVVNfUEVORElORzoKICAgIC8vICAgICAgICAgcmV0dXJuCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSA8PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcDoKICAgIC8vIAogICAgLy8gICAgICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyLm5hdGl2ZSA8IHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQ6CiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQpCiAgICAvLyAgICAgICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNhbmNlbF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2NhbmNlbF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19DQU5DRUxFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGZpbmFsaXplX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiRmluYWxpemUgYSBwcm9wb3NhbCBhZnRlciB2b3RpbmcgcGVyaW9kIGVuZHMiIiIKICAgIC8vIAogICAgLy8gICAgIHBhc3MKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2ZpbmFsaXplX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX0FDVElWRQogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgYWN0aXZlIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlIDwgR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiVm90aW5nIHBlcmlvZCBoYXMgbm90IGVuZGVkIgogICAgLy8gCiAgICAvLyAgICAgc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCAtIDEKICAgIC8vIAogICAgLy8gICAgIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID0gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgKyAxCiAgICAvLyAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyID0gKAogICAgLy8gICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgKyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlID4gMDoKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgICAgIGVzdGltYXRlZF91bmlxdWVfdm90ZXJzID0gcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgPSAoCiAgICAvLyAgICAgICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzICsgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgbWVldHNfcXVvcnVtID0gKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgPj0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fbWV0ID0gYXJjNC5Cb29sKG1lZXRzX3F1b3J1bSkKICAgIC8vICAgICBpZiAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICA8IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgKToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfTk9UX01FVCkKICAgIC8vICAgICBlbGlmICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgID09IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgKToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfTUVUKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9zdGF0dXMgPSBhcmM0LlVJbnQ2NChRVU9SVU1fU1RBVFVTX0VYQ0VFREVEKQogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlID09IDA6CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0VYUElSRUQpCiAgICAvLyAgICAgZWxpZiBub3QgbWVldHNfcXVvcnVtOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICBlbGlmIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgPiAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSAtIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBxdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIlF1ZXVlIGEgc3VjY2VlZGVkIHByb3Bvc2FsIGZvciBleGVjdXRpb24iIiIKICAgIC8vICAgICBzZWxmLl9xdWV1ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcXVldWVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfU1VDQ0VFREVECiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBzdWNjZWVkZWQiCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1FVRVVFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGV4ZWN1dGVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJFeGVjdXRlIGEgcXVldWVkIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgc2VsZi5fZXhlY3V0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZXhlY3V0ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19RVUVVRUQKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHF1ZXVlZCIKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfRVhFQ1VURUQpCiAgICAvLyAgICAgcHJvcG9zYWwuZXhlY3V0ZWRfYXRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB2ZXRvX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiVmV0byBhIHF1ZXVlZCBwcm9wb3NhbCIiIgogICAgLy8gICAgIHNlbGYuX3ZldG9fcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3ZldG9fcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUVVFVUVECiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBxdWV1ZWQiCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfQ0FOQ0VMRUQpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYWN0aXZlX3Byb3Bvc2FsX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgY3VycmVudCBudW1iZXIgb2YgYWN0aXZlIHByb3Bvc2FscyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF90b3RhbF92b3Rlcl9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHVuaXF1ZSB2b3RlcnMiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi50b3RhbF92b3Rlcl9jb3VudCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wYXJ0aWNpcGF0aW9uX3JhdGUoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBjdXJyZW50IHBhcnRpY2lwYXRpb24gcmF0ZSBhcyBhIHBlcmNlbnRhZ2UgKDAtMTAwKSIiIgogICAgLy8gICAgIGlmIHNlbGYudG90YWxfdm90ZXJfY291bnQgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICBwYXJ0aWNpcGF0aW9uX3JhdGUgPSAoCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKiAxMDAKICAgIC8vICAgICApIC8vIHNlbGYudG90YWxfdm90ZXJfY291bnQKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQocGFydGljaXBhdGlvbl9yYXRlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3BhcnRpY2lwYXRpb25fcmF0ZShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgcGFydGljaXBhdGlvbiByYXRlIGZvciBhIHNwZWNpZmljIHByb3Bvc2FsIGFzIGEgcGVyY2VudGFnZSAoMC0xMDApIiIiCiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIGlmIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAgICAgcGFydGljaXBhdGlvbl9yYXRlID0gKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUgKiAxMDAKICAgIC8vICAgICApIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHBhcnRpY2lwYXRpb25fcmF0ZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9lbGlnaWJsZV92b3Rlcl9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiB2b3RlcnMgd2l0aCB2b3RpbmcgcG93ZXIgPiAwIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYudG90YWxfdm90ZXJfY291bnQpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcGFydGljaXBhdGluZ192b3Rlcl9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiB2b3RlcnMgd2hvIGhhdmUgYWN0dWFsbHkgcGFydGljaXBhdGVkIGluIHZvdGluZyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2ZpbmFsaXplZF9wcm9wb3NhbF9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiBwcm9wb3NhbHMgdGhhdCBoYXZlIGJlZW4gZmluYWxpemVkIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2F2ZXJhZ2VfcGFydGljaXBhdGlvbl9wZXJfcHJvcG9zYWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IGF2ZXJhZ2UgcGFydGljaXBhdGlvbiBwb3dlciBwZXIgZmluYWxpemVkIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgaWYgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAgICAgYXZlcmFnZV9wYXJ0aWNpcGF0aW9uID0gKAogICAgLy8gICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KGF2ZXJhZ2VfcGFydGljaXBhdGlvbikKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9hdmVyYWdlX3ZvdGVzX3Blcl9wcm9wb3NhbChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgYXZlcmFnZSBudW1iZXIgb2Ygdm90ZXMgcGVyIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgaWYgc2VsZi5wcm9wb3NhbF9jb3VudCA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vICAgICBhdmVyYWdlX3ZvdGVzID0gc2VsZi52b3RlX2NvdW50IC8vIHNlbGYucHJvcG9zYWxfY291bnQKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoYXZlcmFnZV92b3RlcykKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3Rlcl9pbmZsdWVuY2Vfc2NvcmUoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgaW5mbHVlbmNlIHNjb3JlIGZvciBhIHNwZWNpZmljIHZvdGVyICgwLTEwMCkgYmFzZWQgb24gdm90aW5nIHBvd2VyIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgaWYgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICBpZiBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vIAogICAgLy8gICAgIGluZmx1ZW5jZV9zY29yZSA9ICh2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAqIDEwMCkgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoaW5mbHVlbmNlX3Njb3JlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX2VuZ2FnZW1lbnRfc2NvcmUoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgZW5nYWdlbWVudCBzY29yZSBmb3IgYSBzcGVjaWZpYyB2b3RlciAoMC0xMDApIGJhc2VkIG9uIGFjdHVhbCBwYXJ0aWNpcGF0aW9uIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgaWYgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIGlmIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBhcnRpY2lwYXRpb25fZnJlcXVlbmN5ID0gKAogICAgLy8gICAgICAgICB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkLm5hdGl2ZSAqIDEwMAogICAgLy8gICAgICkgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQKICAgIC8vICAgICB2b3RpbmdfcG93ZXJfd2VpZ2h0ID0gKHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICogMTAwKSAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlcgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBlbmdhZ2VtZW50X3Njb3JlID0gKAogICAgLy8gICAgICAgICBwYXJ0aWNpcGF0aW9uX2ZyZXF1ZW5jeSAqIDcwICsgdm90aW5nX3Bvd2VyX3dlaWdodCAqIDMwCiAgICAvLyAgICAgKSAvLyAxMDAKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoZW5nYWdlbWVudF9zY29yZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGhhc192b3Rlcl9wYXJ0aWNpcGF0ZWRfaW5fcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyCiAgICAvLyApIC0+IGFyYzQuQm9vbDoKICAgIC8vICAgICAiIiJDaGVjayBpZiBhIHZvdGVyIGhhcyBwYXJ0aWNpcGF0ZWQgaW4gYSBzcGVjaWZpYyBwcm9wb3NhbCIiIgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBhcmM0LkJvb2wodm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgPiAwKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX3BhcnRpY2lwYXRpb25fdGltZXN0YW1wKAogICAgLy8gICAgIHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcywgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMgogICAgLy8gKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIHRpbWVzdGFtcCB3aGVuIGEgdm90ZXIgcGFydGljaXBhdGVkIGluIGEgc3BlY2lmaWMgcHJvcG9zYWwiIiIKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQodm90ZXIubGFzdF9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcC5uYXRpdmUpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZXJfcHJvcG9zYWxfY291bnQoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiBwcm9wb3NhbHMgYSB2b3RlciBoYXMgcGFydGljaXBhdGVkIGluIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX2xhc3RfcHJvcG9zYWxfbm9kZShzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBub2RlIG9mIHRoZSBsYXN0IHByb3Bvc2FsIHRoaXMgdm90ZXIgcGFydGljaXBhdGVkIGluIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmKSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBnbG9iYWwgcXVvcnVtIHJlcXVpcmVtZW50IGluIGJhc2lzIHBvaW50cyAoYnBzKSB3aXRoIGJhc2Ugb2YgMTAwMDAiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50MjU2KHNlbGYucXVvcnVtX3JlcXVpcmVtZW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmLCBxdW9ydW1fYnBzOiBhcmM0LlVJbnQyNTYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiU2V0IHRoZSBnbG9iYWwgcXVvcnVtIHJlcXVpcmVtZW50IGluIGJhc2lzIHBvaW50cyAoYnBzKSB3aXRoIGJhc2Ugb2YgMTAwMDAiIiIKICAgIC8vICAgICBzZWxmLl9zZXRfcXVvcnVtX3JlcXVpcmVtZW50KHF1b3J1bV9icHMubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmLCBxdW9ydW1fYnBzOiBCaWdVSW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIlNldCB0aGUgZ2xvYmFsIHF1b3J1bSByZXF1aXJlbWVudCBpbiBiYXNpcyBwb2ludHMgKGJwcykgd2l0aCBiYXNlIG9mIDEwMDAwIiIiCiAgICAvLyAgICAgYXNzZXJ0IHF1b3J1bV9icHMgPD0gMTAwMDAsICJRdW9ydW0gcmVxdWlyZW1lbnQgY2Fubm90IGV4Y2VlZCAxMDAlICgxMDAwMCBicHMpIgogICAgLy8gICAgIHNlbGYucXVvcnVtX3JlcXVpcmVtZW50ID0gcXVvcnVtX2JwcwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3F1b3J1bV90aHJlc2hvbGQoc2VsZikgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgICIiIkdldCB0aGUgY3VycmVudCBxdW9ydW0gdGhyZXNob2xkIGluIHZvdGluZyBwb3dlciB1bml0cyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQyNTYoc2VsZi5fZ2V0X3F1b3J1bV90aHJlc2hvbGQoKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9xdW9ydW1fdGhyZXNob2xkKHNlbGYpIC0+IEJpZ1VJbnQ6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHRoZSBjdXJyZW50IHF1b3J1bSB0aHJlc2hvbGQgaW4gdm90aW5nIHBvd2VyIHVuaXRzIiIiCiAgICAvLyAKICAgIC8vICAgICByZXR1cm4gKHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICogc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQpIC8vIEJpZ1VJbnQoMTAwMDApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjaGVja19wcm9wb3NhbF9xdW9ydW0oc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5Cb29sOgogICAgLy8gICAgICIiIkNoZWNrIGlmIGEgcHJvcG9zYWwgbWVldHMgdGhlIHF1b3J1bSByZXF1aXJlbWVudCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LkJvb2woc2VsZi5fY2hlY2tfcHJvcG9zYWxfcXVvcnVtKHByb3Bvc2FsX25vZGUuYnl0ZXMpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXMoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHF1b3J1bSBzdGF0dXMgZm9yIGEgcHJvcG9zYWw6IDAgPSBub3QgbWV0LCAxID0gbWV0LCAyID0gZXhjZWVkZWQiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXMocHJvcG9zYWxfbm9kZS5ieXRlcykpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1cyhzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgICIiIkdldCBxdW9ydW0gc3RhdHVzIGZvciBhIHByb3Bvc2FsOiAwID0gbm90IG1ldCwgMSA9IG1ldCwgMiA9IGV4Y2VlZGVkIiIiCiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgaWYgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQKICAgIC8vICAgICAgICAgb3IgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQKICAgIC8vICAgICAgICAgb3IgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfRVhQSVJFRAogICAgLy8gICAgICk6CiAgICAvLyAgICAgICAgIHJldHVybiBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzLm5hdGl2ZQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAKICAgIC8vICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICAgICA8IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgICAgICk6CiAgICAvLyAgICAgICAgICAgICByZXR1cm4gVUludDY0KFFVT1JVTV9TVEFUVVNfTk9UX01FVCkKICAgIC8vICAgICAgICAgZWxpZiAoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgICAgID09IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgICAgICk6CiAgICAvLyAgICAgICAgICAgICByZXR1cm4gVUludDY0KFFVT1JVTV9TVEFUVVNfTUVUKQogICAgLy8gICAgICAgICBlbHNlOgogICAgLy8gICAgICAgICAgICAgcmV0dXJuIFVJbnQ2NChRVU9SVU1fU1RBVFVTX0VYQ0VFREVEKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3F1b3J1bV9wcm9ncmVzcyhzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgcXVvcnVtIHByb2dyZXNzIGFzIHBlcmNlbnRhZ2UgKDAtMTAwMDAgYnBzKSBmb3IgYSBwcm9wb3NhbCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzKHByb3Bvc2FsX25vZGUuYnl0ZXMpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBxdW9ydW0gdGhyZXNob2xkIGZvciBhIHNwZWNpZmljIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkKHByb3Bvc2FsX25vZGUuYnl0ZXMpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIHF1b3J1bSB0aHJlc2hvbGQgZm9yIGEgc3BlY2lmaWMgcHJvcG9zYWwiIiIKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgcmV0dXJuIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1cGRhdGVfdG90YWxfdm90aW5nX3Bvd2VyKHNlbGYsIG5ld190b3RhbF9wb3dlcjogYXJjNC5VSW50MjU2KSAtPiBOb25lOgogICAgLy8gICAgICIiIlVwZGF0ZSB0aGUgdG90YWwgdm90aW5nIHBvd2VyICh1c2VkIHdoZW4gdG9rZW4gYmFsYW5jZXMgY2hhbmdlKSIiIgogICAgLy8gICAgIHNlbGYuX3VwZGF0ZV90b3RhbF92b3RpbmdfcG93ZXIobmV3X3RvdGFsX3Bvd2VyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV90b3RhbF92b3RpbmdfcG93ZXIoc2VsZiwgbmV3X3RvdGFsX3Bvd2VyOiBCaWdVSW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIlVwZGF0ZSB0aGUgdG90YWwgdm90aW5nIHBvd2VyIiIiCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBuZXdfdG90YWxfcG93ZXIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICBzZWxmLCBsb2NrdXBfZHVyYXRpb25fc2Vjb25kczogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBib251cyBtdWx0aXBsaWVyIGZvciBhIGdpdmVuIGxvY2t1cCBkdXJhdGlvbiBpbiBzZWNvbmRzIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBzZWxmLl9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIobG9ja3VwX2R1cmF0aW9uX3NlY29uZHMubmF0aXZlKQogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzOiBhcmM0LlVJbnQ2NCkgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBsb2NrdXAgdGllciAoMS01KSBmb3IgYSBnaXZlbiBkdXJhdGlvbiIiIgogICAgLy8gICAgIHRpZXJfaW5mbyA9IHNlbGYuX2dldF9sb2NrdXBfdGllcl9pbmZvKGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzLm5hdGl2ZSkKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQodGllcl9pbmZvWzBdKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBhcmM0LlVJbnQyNTYsCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uX3NlY29uZHM6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHBvdGVudGlhbCB2b3RpbmcgcG93ZXIgZ3JhbnRlZCBmb3IgYSBnaXZlbiBsb2NrdXAgc2NlbmFyaW8iIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBzZWxmLl9jYWxjdWxhdGVfcG90ZW50aWFsX3Bvd2VyX2dyYW50ZWQoCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgICAgICAgICBsb2NrdXBfZHVyYXRpb25fc2Vjb25kcy5uYXRpdmUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfcG90ZW50aWFsX3Bvd2VyX2dyYW50ZWQoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50OiBCaWdVSW50LAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzOiBVSW50NjQsCiAgICAvLyApIC0+IEJpZ1VJbnQ6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHBvdGVudGlhbCB2b3RpbmcgcG93ZXIgZ3JhbnRlZCBmb3IgYSBnaXZlbiBsb2NrdXAgc2NlbmFyaW8iIiIKICAgIC8vICAgICBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllciA9IHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uX3NlY29uZHMKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAgICAgICAgICogKHBvd2VyX3NvdXJjZS5wb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSArIGxvY2t1cF9ib251c19tdWx0aXBsaWVyKQogICAgLy8gICAgICkgLy8gQmlnVUludCgxMDAwMCkKICAgIC8vICAgICByZXR1cm4gcG93ZXJfZ3JhbnRlZAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uKHNlbGYsIHRpZXI6IGFyYzQuVUludDY0KSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG1pbmltdW0gZHVyYXRpb24gcmVxdWlyZWQgZm9yIGEgc3BlY2lmaWMgbG9ja3VwIHRpZXIiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uKHRpZXIubmF0aXZlKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9kdXJhdGlvbihzZWxmLCB0aWVyOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG1pbmltdW0gZHVyYXRpb24gcmVxdWlyZWQgZm9yIGEgc3BlY2lmaWMgbG9ja3VwIHRpZXIiIiIKICAgIC8vICAgICBpZiB0aWVyID09IDE6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX1RJRVJfMV9EVVJBVElPTikKICAgIC8vICAgICBlbGlmIHRpZXIgPT0gMjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfVElFUl8yX0RVUkFUSU9OKQogICAgLy8gICAgIGVsaWYgdGllciA9PSAzOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9USUVSXzNfRFVSQVRJT04pCiAgICAvLyAgICAgZWxpZiB0aWVyID09IDQ6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX1RJRVJfNF9EVVJBVElPTikKICAgIC8vICAgICBlbGlmIHRpZXIgPT0gNToKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfVElFUl81X0RVUkFUSU9OKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9sb2NrdXBfdGllcl9ib251cyhzZWxmLCB0aWVyOiBhcmM0LlVJbnQ2NCkgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBib251cyBtdWx0aXBsaWVyIGZvciBhIHNwZWNpZmljIGxvY2t1cCB0aWVyIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9sb2NrdXBfdGllcl9ib251cyh0aWVyLm5hdGl2ZSkpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfYm9udXMoc2VsZiwgdGllcjogVUludDY0KSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBib251cyBtdWx0aXBsaWVyIGZvciBhIHNwZWNpZmljIGxvY2t1cCB0aWVyIiIiCiAgICAvLyAgICAgaWYgdGllciA9PSAxOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpCiAgICAvLyAgICAgZWxpZiB0aWVyID09IDI6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikKICAgIC8vICAgICBlbGlmIHRpZXIgPT0gMzoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgLy8gICAgIGVsaWYgdGllciA9PSA0OgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpCiAgICAvLyAgICAgZWxpZiB0aWVyID09IDU6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDEwMDAwKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX2xvY2tfaW5mbygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgY29tcHJlaGVuc2l2ZSBsb2NrdXAgaW5mb3JtYXRpb24gZm9yIGEgcG93ZXIgbG9jayIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgc2VsZi5fZ2V0X3Bvd2VyX2xvY2tfaW5mbygKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfbG9ja19pbmZvKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgICIiIkdldCBjb21wcmVoZW5zaXZlIGxvY2t1cCBpbmZvcm1hdGlvbiBmb3IgYSBwb3dlciBsb2NrIiIiCiAgICAvLyAgICAgcG93ZXJfbG9jayA9IHNlbGYuX2dldF9wb3dlcl9sb2NrKHBvd2VyX3NvdXJjZV9pZCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkKICAgIC8vICAgICBpZiBwb3dlcl9sb2NrLnBvd2VyX3NvdXJjZV9pZC5uYXRpdmUgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAgICAgcmVtYWluaW5nX3RpbWUgPSAoCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXAubmF0aXZlIC0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBpZiByZW1haW5pbmdfdGltZSA8PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICB0aWVyX2luZm8gPSBzZWxmLl9nZXRfbG9ja3VwX3RpZXJfaW5mbyhwb3dlcl9sb2NrLmxvY2t1cF9kdXJhdGlvbi5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIHRpZXJfaW5mb1swXQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX3F1b3J1bV9wcm9ncmVzcyhzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gQmlnVUludDoKICAgIC8vICAgICAiIiJHZXQgcXVvcnVtIHByb2dyZXNzIGFzIHBlcmNlbnRhZ2UgKDAtMTAwMDAgYnBzKSBmb3IgYSBwcm9wb3NhbCIiIgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDk3CiAgICAvLyBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIGFzc2VydCAvLyBQcm9wb3NhbCBkb2VzIG5vdCBleGlzdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ5OAogICAgLy8gcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X3Byb3Bvc2FsCiAgICBkdXAKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0OTkKICAgIC8vIGlmIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlID09IDA6CiAgICBpbnQgODI0CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMAogICAgPT0KICAgIGJ6IF9nZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUwMAogICAgLy8gcmV0dXJuIEJpZ1VJbnQoMTAwMDApCiAgICBieXRlIDB4MjcxMAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1MDMKICAgIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSAqIDEwMDAwCiAgICBmcmFtZV9kaWcgMQogICAgZHVwCiAgICBpbnQgNjgwCiAgICBpbnQgMzIKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnl0ZSAweDI3MTAKICAgIGIqCiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTA0CiAgICAvLyApIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICBpbnQgODI0CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTAyLTE1MDQKICAgIC8vIHByb2dyZXNzID0gKAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZSAqIDEwMDAwCiAgICAvLyApIC8vIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICBpdG9iCiAgICBiLwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1MDYKICAgIC8vIGlmIHByb2dyZXNzID4gMTAwMDA6CiAgICBieXRlIDB4MjcxMAogICAgYj4KICAgIGJ6IF9nZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzX2FmdGVyX2lmX2Vsc2VANAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUwNwogICAgLy8gcHJvZ3Jlc3MgPSBCaWdVSW50KDEwMDAwKQogICAgYnl0ZSAweDI3MTAKICAgIGZyYW1lX2J1cnkgMAoKX2dldF9wcm9wb3NhbF9xdW9ydW1fcHJvZ3Jlc3NfYWZ0ZXJfaWZfZWxzZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTUwOAogICAgLy8gcmV0dXJuIHByb2dyZXNzCiAgICBmcmFtZV9kaWcgMAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmdldF9wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzYyLTEzNjMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzY1CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQocHJvcG9zYWxfbm9kZS5ieXRlcykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9nZXRfcHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZChwcm9wb3NhbF9ub2RlOiBieXRlcykgLT4gdWludDY0OgpfZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzY2LTEzNjcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNjkKICAgIC8vIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjYxMAogICAgLy8gc2VsZi5wcm9wb3NhbHMgPSBCb3hNYXAoQnl0ZXMzMiwgUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJwXyIpCiAgICBieXRlIDB4NzA1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjEwLTEzNzAKICAgIC8vICAgICBzZWxmLnByb3Bvc2FscyA9IEJveE1hcChCeXRlczMyLCBQcm9wb3NhbCwga2V5X3ByZWZpeD1iInBfIikKICAgIC8vICAgICBzZWxmLnZvdGVzID0gQm94TWFwKEJ5dGVzNjQsIFVJbnQ2NCwga2V5X3ByZWZpeD1iIiIpCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzID0gQm94TWFwKAogICAgLy8gICAgICAgICBVSW50NjQsIFBvd2VyU291cmNlLCBrZXlfcHJlZml4PWIicV8iCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYucG93ZXJfbG9ja3MgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzNjQsIFBvd2VyTG9jaywga2V5X3ByZWZpeD1iImxfIgogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYWRkX3Bvd2VyX3NvdXJjZSgKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2FkZF9wb3dlcl9zb3VyY2UocG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfbXVsdGlwbGllci5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9hZGRfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl9tdWx0aXBsaWVyOiBVSW50NjQKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfc291cmNlX2lkIG5vdCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgYWxyZWFkeSBleGlzdHMiCiAgICAvLyAgICAgc2VsZi5wb3dlcl9zb3VyY2VzW3Bvd2VyX3NvdXJjZV9pZF0gPSBQb3dlclNvdXJjZSgKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQocG93ZXJfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0KSAtPiBQb3dlclNvdXJjZToKICAgIC8vICAgICByZXR1cm4gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Bvd2VyX3NvdXJjZShzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCkgLT4gUG93ZXJTb3VyY2U6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYucG93ZXJfc291cmNlcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1wb3dlcl9zb3VyY2VfaWQsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfaWQ9YXJjNC5VSW50NjQoMCksIHBvd2VyX211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCkKICAgIC8vICAgICAgICAgKSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIoc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJDYWxjdWxhdGUgdGhlIGJvbnVzIG11bHRpcGxpZXIgYmFzZWQgb24gbG9ja3VwIGR1cmF0aW9uIiIiCiAgICAvLyAgICAgaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzVfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl80X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzQpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzJfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMikKICAgIC8vICAgICBlbHNlOgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzEpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbG9ja3VwX3RpZXJfaW5mbyhzZWxmLCBsb2NrdXBfZHVyYXRpb246IFVJbnQ2NCkgLT4gdHVwbGVbVUludDY0LCBVSW50NjRdOgogICAgLy8gICAgICIiIkdldCBsb2NrdXAgdGllciBpbmZvcm1hdGlvbjogKHRpZXJfbnVtYmVyLCBib251c19tdWx0aXBsaWVyKSIiIgogICAgLy8gICAgIGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl81X0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCg1KSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzUpKQogICAgLy8gICAgIGVsaWYgbG9ja3VwX2R1cmF0aW9uID49IExPQ0tVUF9USUVSXzRfRFVSQVRJT046CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDQpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkpCiAgICAvLyAgICAgZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfM19EVVJBVElPTjoKICAgIC8vICAgICAgICAgcmV0dXJuIChVSW50NjQoMyksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKSkKICAgIC8vICAgICBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8yX0RVUkFUSU9OOgogICAgLy8gICAgICAgICByZXR1cm4gKFVJbnQ2NCgyKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHJldHVybiAoVUludDY0KDEpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB1cGRhdGVfcG93ZXJfc291cmNlKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IGFyYzQuVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fdXBkYXRlX3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VwZGF0ZV9wb3dlcl9zb3VyY2UoCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsIHBvd2VyX211bHRpcGxpZXI6IFVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGFzc2VydCBwb3dlcl9zb3VyY2VfaWQgaW4gc2VsZi5wb3dlcl9zb3VyY2VzLCAiUG93ZXIgc291cmNlIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHNlbGYucG93ZXJfc291cmNlc1twb3dlcl9zb3VyY2VfaWRdID0gUG93ZXJTb3VyY2UoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZD1hcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICAgICBwb3dlcl9tdWx0aXBsaWVyPWFyYzQuVUludDY0KHBvd2VyX211bHRpcGxpZXIpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgbG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2xvY2tfcG93ZXIoCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9sb2NrX3Bvd2VyKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCA+IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIkNhbm5vdCBsb2NrIHBvd2VyIGluIHRoZSBwYXN0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX3VubG9ja190aW1lc3RhbXAgPj0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9XRUVLCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgbXVzdCBiZSBhdCBsZWFzdCAxIHdlZWsiCiAgICAvLyAKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb24gPSBwb3dlcl91bmxvY2tfdGltZXN0YW1wIC0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllciA9IHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uCiAgICAvLyAgICAgKQogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcG93ZXJfc291cmNlID0gc2VsZi5fZ2V0X3Bvd2VyX3NvdXJjZShwb3dlcl9zb3VyY2VfaWQpCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgbm90IGluIHNlbGYucG93ZXJfbG9ja3MsICJQb3dlciBsb2NrIGFscmVhZHkgZXhpc3RzIgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwb3dlcl9ncmFudGVkID0gKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAgICAgICAgICogKHBvd2VyX3NvdXJjZS5wb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSArIGxvY2t1cF9ib251c19tdWx0aXBsaWVyKQogICAgLy8gICAgICkgLy8gQmlnVUludCgxMDAwMCkKICAgIC8vICAgICBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XSA9IFBvd2VyTG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9hbW91bnQ9YXJjNC5VSW50MjU2KHBvd2VyX3NvdXJjZV9hbW91bnQpLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKSwKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX293bmVyPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgcG93ZXJfZ3JhbnRlZD1hcmM0LlVJbnQyNTYocG93ZXJfZ3JhbnRlZCksCiAgICAvLyAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NChsb2NrdXBfZHVyYXRpb24pLAogICAgLy8gICAgICAgICBsb2NrdXBfYm9udXNfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NChsb2NrdXBfYm9udXNfbXVsdGlwbGllciksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlckZyb20sCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQyNTYocG93ZXJfc291cmNlX2Ftb3VudCksCiAgICAvLyAgICAgICAgIGFwcF9pZD1BcHBsaWNhdGlvbihwb3dlcl9zb3VyY2VfaWQpLAogICAgLy8gICAgICkKICAgIC8vICAgICBuZXdfdm90ZV9wb3dlciA9IHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gICAgIHZvdGVyLnZvdGVyX2FkZHJlc3MgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICB2b3Rlci52b3RlX3Bvd2VyID0gYXJjNC5VSW50MjU2KG5ld192b3RlX3Bvd2VyKQogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICsgcG93ZXJfZ3JhbnRlZAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX2xvY2soCiAgICAvLyAgICAgc2VsZiwgcG93ZXJfc291cmNlX2lkOiBhcmM0LlVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gUG93ZXJMb2NrOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfbG9jaygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IFBvd2VyTG9jazoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wb3dlcl9sb2Nrcy5nZXQoCiAgICAvLyAgICAgICAgIGtleT1CeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgICAgICBhcmM0LlVJbnQ2NChwb3dlcl9zb3VyY2VfaWQpLmJ5dGVzCiAgICAvLyAgICAgICAgICAgICArIGFyYzQuVUludDY0KHBvd2VyX3VubG9ja190aW1lc3RhbXApLmJ5dGVzCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9UG93ZXJMb2NrKAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcG93ZXJfc291cmNlX2Ftb3VudD1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9zb3VyY2VfdW5sb2NrX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBvd2VyX3NvdXJjZV9vd25lcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBwb3dlcl9ncmFudGVkPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9kdXJhdGlvbj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGxvY2t1cF9ib251c19tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHVubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3VubG9ja19wb3dlcihwb3dlcl9zb3VyY2VfaWQubmF0aXZlLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wLm5hdGl2ZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3VubG9ja19wb3dlcigKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IFVJbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogVUludDY0CiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgYXNzZXJ0IHBvd2VyX3NvdXJjZV9pZCBpbiBzZWxmLnBvd2VyX3NvdXJjZXMsICJQb3dlciBzb3VyY2UgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9ja19rZXkgPSBCeXRlczY0LmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KHBvd2VyX3NvdXJjZV9pZCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChwb3dlcl91bmxvY2tfdGltZXN0YW1wKS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgcG93ZXJfbG9ja19rZXkgaW4gc2VsZi5wb3dlcl9sb2NrcywgIlBvd2VyIGxvY2sgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcG93ZXJfbG9jayA9IHNlbGYuX2dldF9wb3dlcl9sb2NrKHBvd2VyX3NvdXJjZV9pZCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcCkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXAubmF0aXZlIDw9IEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wCiAgICAvLyAgICAgKSwgIlBvd2VyIGxvY2sgaXMgbm90IHlldCB1bmxvY2tlZCIKICAgIC8vIAogICAgLy8gICAgIHBvd2VyX293bmVyID0gcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIubmF0aXZlCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIocG93ZXJfb3duZXIpCiAgICAvLyAgICAgcG93ZXJfZ3JhbnRlZCA9IHBvd2VyX2xvY2sucG93ZXJfZ3JhbnRlZC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHBvd2VyX2dyYW50ZWQgPD0gcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApLCAiTm90IGVub3VnaCB2b3RpbmcgcG93ZXIiCiAgICAvLyAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgcG93ZXJfb3duZXJfdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgLSBwb3dlcl9ncmFudGVkCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYudm90ZXJzW3Bvd2VyX293bmVyXSA9IHBvd2VyX293bmVyX3ZvdGVyLmNvcHkoKQogICAgLy8gCiAgICAvLyAgICAgc2VsZi50b3RhbF92b3RpbmdfcG93ZXIgPSBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciAtIHBvd2VyX2dyYW50ZWQKICAgIC8vIAogICAgLy8gICAgIGFyYzQuYWJpX2NhbGwoCiAgICAvLyAgICAgICAgIEFSQzIwMFRva2VuSW50ZXJmYWNlLmFyYzIwMF90cmFuc2ZlciwKICAgIC8vICAgICAgICAgcG93ZXJfbG9jay5wb3dlcl9zb3VyY2Vfb3duZXIsCiAgICAvLyAgICAgICAgIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX2Ftb3VudCwKICAgIC8vICAgICAgICAgYXBwX2lkPUFwcGxpY2F0aW9uKHBvd2VyX3NvdXJjZV9pZCksCiAgICAvLyAgICAgKQogICAgLy8gICAgIGRlbCBzZWxmLnBvd2VyX2xvY2tzW3Bvd2VyX2xvY2tfa2V5XQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWxfbm9kZSgKICAgIC8vICAgICBzZWxmLCBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzNTEyCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLmJ5dGVzLCBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9wcm9wb3NhbF9ub2RlKAogICAgLy8gICAgIHNlbGYsIHByb3Bvc2FsX3RpdGxlOiBCeXRlcywgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5zaGEyNTYocHJvcG9zYWxfdGl0bGUgKyBwcm9wb3NhbF9kZXNjcmlwdGlvbikpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBQcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5wcm9wb3NhbHMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICBkZWZhdWx0PVByb3Bvc2FsKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhvcC5iemVybyg2NCkpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhvcC5iemVybyg1MTIpKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF90b3RhbF92b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc192b3Rlcz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3RvdGFsX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3llc19wb3dlcj1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgdm90aW5nX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHZvdGluZ19lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aW9uX2hhc2g9Qnl0ZXMzMi5mcm9tX2J5dGVzKG9wLmJ6ZXJvKDMyKSksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBleGVjdXRpb25fdHhuX2lkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWxfYWN0aXZhdGlvbl90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fbWV0PWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9xdW9ydW1fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3RlKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF92b3RlKHByb3Bvc2FsX25vZGUuYnl0ZXMsIGFjY291bnQubmF0aXZlKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMsCiAgICAvLyAgICAgYWNjb3VudDogQWNjb3VudCwKICAgIC8vICkgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLnZvdGVzLmdldCgKICAgIC8vICAgICAgICAga2V5PUJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgYWNjb3VudC5ieXRlcyksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9VUludDY0KDIpLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHByb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXM2NCwKICAgIC8vICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbjogQnl0ZXM1MTIsCiAgICAvLyAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIHByb3Bvc2FsX3N0YXJ0X3RpbWVzdGFtcDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3Byb3Bvc2UoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsX3RpdGxlLmJ5dGVzLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9kZXNjcmlwdGlvbi5ieXRlcywKICAgIC8vICAgICAgICAgcHJvcG9zYWxfY2F0ZWdvcnlfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3Byb3Bvc2UoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF90aXRsZTogQnl0ZXMsCiAgICAvLyAgICAgcHJvcG9zYWxfZGVzY3JpcHRpb246IEJ5dGVzLAogICAgLy8gICAgIHByb3Bvc2FsX2NhdGVnb3J5X2lkOiBVSW50NjQsCiAgICAvLyAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZSA9IHNlbGYuX2dldF9wcm9wb3NhbF9ub2RlKHByb3Bvc2FsX3RpdGxlLCBwcm9wb3NhbF9kZXNjcmlwdGlvbikKICAgIC8vICAgICBhc3NlcnQgcHJvcG9zYWxfbm9kZSBub3QgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBJRCBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIHByb3Bvc2FsX2luZGV4ID0gc2VsZi5wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9pbmRleCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2luZGV4KQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19QRU5ESU5HKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2VyID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfdGl0bGUgPSBCeXRlczY0LmZyb21fYnl0ZXMocHJvcG9zYWxfdGl0bGUpCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfZGVzY3JpcHRpb24gPSBCeXRlczUxMi5mcm9tX2J5dGVzKHByb3Bvc2FsX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9jYXRlZ29yeV9pZCA9IGFyYzQuVUludDY0KHByb3Bvc2FsX2NhdGVnb3J5X2lkKQogICAgLy8gICAgIHByb3Bvc2FsLmNyZWF0ZWRfYXRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX3N0YXJ0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbF9zdGFydF90aW1lc3RhbXAgKyBTRUNPTkRTX1BFUl9EQVkKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwudm90aW5nX2VuZF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICAgICAgcHJvcG9zYWxfc3RhcnRfdGltZXN0YW1wICsgU0VDT05EU19QRVJfV0VFSyArIFNFQ09ORFNfUEVSX0RBWQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQgPSBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcXVvcnVtX3RocmVzaG9sZCgpKQogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbF9jb3VudCA9IHByb3Bvc2FsX2luZGV4CiAgICAvLyAgICAgYXJjNC5lbWl0KAogICAgLy8gICAgICAgICBQcm9wb3NhbENyZWF0ZWQoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbF9ub2RlPXByb3Bvc2FsX25vZGUsCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIHByb3Bvc2FsX25vZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGFjdGl2YXRlX3Byb3Bvc2FsKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9hY3RpdmF0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYWN0aXZhdGVfcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUEVORElORwogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgcGVuZGluZyIKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnZvdGluZ19zdGFydF90aW1lc3RhbXAubmF0aXZlID4gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiVm90aW5nIHBlcmlvZCBoYXMgbm90IHN0YXJ0ZWQgeWV0IgogICAgLy8gCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoVHhuLnNlbmRlcikKICAgIC8vICAgICBhc3NlcnQgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPiAwLCAiWW91IGhhdmUgbm8gdm90aW5nIHBvd2VyIgogICAgLy8gCiAgICAvLyAgICAgbmV3X2FjdGl2YXRpb25fcG93ZXIgPSAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fcG93ZXIubmF0aXZlICsgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfYWN0aXZhdGlvbl9wb3dlciA9IGFyYzQuVUludDI1NihuZXdfYWN0aXZhdGlvbl9wb3dlcikKICAgIC8vIAogICAgLy8gICAgIGlmIG5ld19hY3RpdmF0aW9uX3Bvd2VyID49IHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQ6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX2FjdGl2YXRpb25fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgICAgICBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19BQ1RJVkUpCiAgICAvLyAKICAgIC8vICAgICAgICAgc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCArIDEKICAgIC8vIAogICAgLy8gICAgIHNlbGYucHJvcG9zYWxzW19wcm9wb3NhbF9ub2RlXSA9IHByb3Bvc2FsLmNvcHkoKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2FzdF92b3RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMiwKICAgIC8vICAgICBzdXBwb3J0OiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9jYXN0X3ZvdGUocHJvcG9zYWxfbm9kZS5ieXRlcywgc3VwcG9ydC5uYXRpdmUpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9jYXN0X3ZvdGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBwcm9wb3NhbF9ub2RlOiBCeXRlcywKICAgIC8vICAgICBzdXBwb3J0OiBVSW50NjQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICB2b3RlX2tleSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlICsgVHhuLnNlbmRlci5ieXRlcykKICAgIC8vICAgICBhc3NlcnQgdm90ZV9rZXkgbm90IGluIHNlbGYudm90ZXMsICJZb3UgaGF2ZSBhbHJlYWR5IHZvdGVkIgogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKFR4bi5zZW5kZXIpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgc3VwcG9ydCA8IDIsICJJbnZhbGlkIHZvdGUiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdLnByb3Bvc2FsX3N0YXR1cyA9PSBQUk9QT1NBTF9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBhY3RpdmUiCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdLnZvdGluZ19lbmRfdGltZXN0YW1wLm5hdGl2ZQogICAgLy8gICAgICAgICA+PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcAogICAgLy8gICAgICksICJWb3RpbmcgaGFzIGVuZGVkIgogICAgLy8gCiAgICAvLyAgICAgc2VsZi52b3Rlc1t2b3RlX2tleV0gPSBzdXBwb3J0CiAgICAvLyAKICAgIC8vICAgICB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlICsgMQogICAgLy8gICAgICkKICAgIC8vICAgICB2b3Rlci5sYXN0X3BhcnRpY2lwYXRpb25fdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgdm90ZXIudm90ZV90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICB2b3Rlci5sYXN0X3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudm90ZXJzW1R4bi5zZW5kZXJdID0gdm90ZXIuY29weSgpCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChfcHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3RlcyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF92b3Rlcy5uYXRpdmUgKyAxCiAgICAvLyAgICAgKQogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3RlcyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF95ZXNfdm90ZXMubmF0aXZlICsgc3VwcG9ydAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICkKICAgIC8vICAgICBpZiBzdXBwb3J0ID09IDE6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc19wb3dlciA9IGFyYzQuVUludDI1NigKICAgIC8vICAgICAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3llc19wb3dlci5uYXRpdmUgKyB2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIAogICAgLy8gICAgIHNlbGYudm90ZV9jb3VudCA9IHNlbGYudm90ZV9jb3VudCArIDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHJlamVjdF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIkNoZWNrIGlmIGEgcGVuZGluZyBwcm9wb3NhbCBzaG91bGQgYmUgcmVqZWN0ZWQgZHVlIHRvIGluc3VmZmljaWVudCBhY3RpdmF0aW9uIHZvdGVzIiIiCiAgICAvLyAgICAgc2VsZi5fcmVqZWN0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUuYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9yZWplY3RfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSAhPSBQUk9QT1NBTF9TVEFUVVNfUEVORElORzoKICAgIC8vICAgICAgICAgcmV0dXJuCiAgICAvLyAKICAgIC8vICAgICBpZiBwcm9wb3NhbC52b3Rpbmdfc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSA8PSBHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcDoKICAgIC8vIAogICAgLy8gICAgICAgICBpZiBwcm9wb3NhbC5wcm9wb3NhbF9hY3RpdmF0aW9uX3Bvd2VyLm5hdGl2ZSA8IHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQ6CiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQpCiAgICAvLyAgICAgICAgICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNhbmNlbF9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2NhbmNlbF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FuY2VsX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19QRU5ESU5HCiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBwZW5kaW5nIgogICAgLy8gICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19DQU5DRUxFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGZpbmFsaXplX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiRmluYWxpemUgYSBwcm9wb3NhbCBhZnRlciB2b3RpbmcgcGVyaW9kIGVuZHMiIiIKICAgIC8vIAogICAgLy8gICAgIHBhc3MKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2ZpbmFsaXplX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzKSAtPiBOb25lOgogICAgLy8gICAgIF9wcm9wb3NhbF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKHByb3Bvc2FsX25vZGUpCiAgICAvLyAgICAgYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICAvLyAgICAgcHJvcG9zYWwgPSBzZWxmLl9nZXRfcHJvcG9zYWwocHJvcG9zYWxfbm9kZSkKICAgIC8vIAogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cy5uYXRpdmUgPT0gUFJPUE9TQUxfU1RBVFVTX0FDVElWRQogICAgLy8gICAgICksICJQcm9wb3NhbCBpcyBub3QgYWN0aXZlIgogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwudm90aW5nX2VuZF90aW1lc3RhbXAubmF0aXZlIDwgR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIC8vICAgICApLCAiVm90aW5nIHBlcmlvZCBoYXMgbm90IGVuZGVkIgogICAgLy8gCiAgICAvLyAgICAgc2VsZi5hY3RpdmVfcHJvcG9zYWxfY291bnQgPSBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCAtIDEKICAgIC8vIAogICAgLy8gICAgIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID0gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgKyAxCiAgICAvLyAgICAgc2VsZi50b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyID0gKAogICAgLy8gICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgKyBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlID4gMDoKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgICAgIGVzdGltYXRlZF91bmlxdWVfdm90ZXJzID0gcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgPSAoCiAgICAvLyAgICAgICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzICsgZXN0aW1hdGVkX3VuaXF1ZV92b3RlcnMKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgbWVldHNfcXVvcnVtID0gKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgPj0gcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3RocmVzaG9sZC5uYXRpdmUKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fbWV0ID0gYXJjNC5Cb29sKG1lZXRzX3F1b3J1bSkKICAgIC8vICAgICBpZiAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3Bvd2VyLm5hdGl2ZQogICAgLy8gICAgICAgICA8IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgKToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfTk9UX01FVCkKICAgIC8vICAgICBlbGlmICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgID09IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgKToKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfcXVvcnVtX3N0YXR1cyA9IGFyYzQuVUludDY0KFFVT1JVTV9TVEFUVVNfTUVUKQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV9zdGF0dXMgPSBhcmM0LlVJbnQ2NChRVU9SVU1fU1RBVFVTX0VYQ0VFREVEKQogICAgLy8gCiAgICAvLyAgICAgaWYgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfdm90ZXMubmF0aXZlID09IDA6CiAgICAvLyAKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX0VYUElSRUQpCiAgICAvLyAgICAgZWxpZiBub3QgbWVldHNfcXVvcnVtOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19ERUZFQVRFRCkKICAgIC8vICAgICBlbGlmIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUgPiAoCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3RvdGFsX3ZvdGVzLm5hdGl2ZSAtIHByb3Bvc2FsLnByb3Bvc2FsX3llc192b3Rlcy5uYXRpdmUKICAgIC8vICAgICApOgogICAgLy8gCiAgICAvLyAgICAgICAgIHByb3Bvc2FsLnByb3Bvc2FsX3N0YXR1cyA9IGFyYzQuVUludDY0KFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQpCiAgICAvLyAgICAgZWxzZToKICAgIC8vIAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBxdWV1ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgLy8gICAgICIiIlF1ZXVlIGEgc3VjY2VlZGVkIHByb3Bvc2FsIGZvciBleGVjdXRpb24iIiIKICAgIC8vICAgICBzZWxmLl9xdWV1ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcXVldWVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfU1VDQ0VFREVECiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBzdWNjZWVkZWQiCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzID0gYXJjNC5VSW50NjQoUFJPUE9TQUxfU1RBVFVTX1FVRVVFRCkKICAgIC8vICAgICBzZWxmLnByb3Bvc2Fsc1tfcHJvcG9zYWxfbm9kZV0gPSBwcm9wb3NhbC5jb3B5KCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGV4ZWN1dGVfcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gTm9uZToKICAgIC8vICAgICAiIiJFeGVjdXRlIGEgcXVldWVkIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgc2VsZi5fZXhlY3V0ZV9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZXhlY3V0ZV9wcm9wb3NhbChzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gTm9uZToKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICAvLyAKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19RVUVVRUQKICAgIC8vICAgICApLCAiUHJvcG9zYWwgaXMgbm90IHF1ZXVlZCIKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfRVhFQ1VURUQpCiAgICAvLyAgICAgcHJvcG9zYWwuZXhlY3V0ZWRfYXRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB2ZXRvX3Byb3Bvc2FsKHNlbGYsIHByb3Bvc2FsX25vZGU6IEJ5dGVzMzIpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiVmV0byBhIHF1ZXVlZCBwcm9wb3NhbCIiIgogICAgLy8gICAgIHNlbGYuX3ZldG9fcHJvcG9zYWwocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3ZldG9fcHJvcG9zYWwoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IE5vbmU6CiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfUVVFVUVECiAgICAvLyAgICAgKSwgIlByb3Bvc2FsIGlzIG5vdCBxdWV1ZWQiCiAgICAvLyAKICAgIC8vIAogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMgPSBhcmM0LlVJbnQ2NChQUk9QT1NBTF9TVEFUVVNfQ0FOQ0VMRUQpCiAgICAvLyAgICAgc2VsZi5wcm9wb3NhbHNbX3Byb3Bvc2FsX25vZGVdID0gcHJvcG9zYWwuY29weSgpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYWN0aXZlX3Byb3Bvc2FsX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICIiIkdldCB0aGUgY3VycmVudCBudW1iZXIgb2YgYWN0aXZlIHByb3Bvc2FscyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF90b3RhbF92b3Rlcl9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHVuaXF1ZSB2b3RlcnMiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi50b3RhbF92b3Rlcl9jb3VudCkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9wYXJ0aWNpcGF0aW9uX3JhdGUoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBjdXJyZW50IHBhcnRpY2lwYXRpb24gcmF0ZSBhcyBhIHBlcmNlbnRhZ2UgKDAtMTAwKSIiIgogICAgLy8gICAgIGlmIHNlbGYudG90YWxfdm90ZXJfY291bnQgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICBwYXJ0aWNpcGF0aW9uX3JhdGUgPSAoCiAgICAvLyAgICAgICAgIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgKiAxMDAKICAgIC8vICAgICApIC8vIHNlbGYudG90YWxfdm90ZXJfY291bnQKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQocGFydGljaXBhdGlvbl9yYXRlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3BhcnRpY2lwYXRpb25fcmF0ZShzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgcGFydGljaXBhdGlvbiByYXRlIGZvciBhIHNwZWNpZmljIHByb3Bvc2FsIGFzIGEgcGVyY2VudGFnZSAoMC0xMDApIiIiCiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZS5ieXRlcykKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlLmJ5dGVzKQogICAgLy8gICAgIGlmIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAgICAgcGFydGljaXBhdGlvbl9yYXRlID0gKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUgKiAxMDAKICAgIC8vICAgICApIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHBhcnRpY2lwYXRpb25fcmF0ZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9lbGlnaWJsZV92b3Rlcl9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiB2b3RlcnMgd2l0aCB2b3RpbmcgcG93ZXIgPiAwIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYudG90YWxfdm90ZXJfY291bnQpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfcGFydGljaXBhdGluZ192b3Rlcl9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiB2b3RlcnMgd2hvIGhhdmUgYWN0dWFsbHkgcGFydGljaXBhdGVkIGluIHZvdGluZyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2ZpbmFsaXplZF9wcm9wb3NhbF9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiBwcm9wb3NhbHMgdGhhdCBoYXZlIGJlZW4gZmluYWxpemVkIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X2F2ZXJhZ2VfcGFydGljaXBhdGlvbl9wZXJfcHJvcG9zYWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IGF2ZXJhZ2UgcGFydGljaXBhdGlvbiBwb3dlciBwZXIgZmluYWxpemVkIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgaWYgc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAgICAgYXZlcmFnZV9wYXJ0aWNpcGF0aW9uID0gKAogICAgLy8gICAgICAgICBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQKICAgIC8vICAgICApCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KGF2ZXJhZ2VfcGFydGljaXBhdGlvbikKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9hdmVyYWdlX3ZvdGVzX3Blcl9wcm9wb3NhbChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgYXZlcmFnZSBudW1iZXIgb2Ygdm90ZXMgcGVyIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgaWYgc2VsZi5wcm9wb3NhbF9jb3VudCA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vICAgICBhdmVyYWdlX3ZvdGVzID0gc2VsZi52b3RlX2NvdW50IC8vIHNlbGYucHJvcG9zYWxfY291bnQKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoYXZlcmFnZV92b3RlcykKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF92b3Rlcl9pbmZsdWVuY2Vfc2NvcmUoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgaW5mbHVlbmNlIHNjb3JlIGZvciBhIHNwZWNpZmljIHZvdGVyICgwLTEwMCkgYmFzZWQgb24gdm90aW5nIHBvd2VyIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgaWYgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vICAgICBpZiBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9PSAwOgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoMCkKICAgIC8vIAogICAgLy8gICAgIGluZmx1ZW5jZV9zY29yZSA9ICh2b3Rlci52b3RlX3Bvd2VyLm5hdGl2ZSAqIDEwMCkgLy8gc2VsZi50b3RhbF92b3RpbmdfcG93ZXIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoaW5mbHVlbmNlX3Njb3JlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX2VuZ2FnZW1lbnRfc2NvcmUoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgZW5nYWdlbWVudCBzY29yZSBmb3IgYSBzcGVjaWZpYyB2b3RlciAoMC0xMDApIGJhc2VkIG9uIGFjdHVhbCBwYXJ0aWNpcGF0aW9uIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgaWYgdm90ZXIudm90ZV9wb3dlci5uYXRpdmUgPT0gMDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KDApCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIGlmIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID09IDA6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NCgwKQogICAgLy8gCiAgICAvLyAKICAgIC8vIAogICAgLy8gICAgIHBhcnRpY2lwYXRpb25fZnJlcXVlbmN5ID0gKAogICAgLy8gICAgICAgICB2b3Rlci5wcm9wb3NhbHNfcGFydGljaXBhdGVkLm5hdGl2ZSAqIDEwMAogICAgLy8gICAgICkgLy8gc2VsZi5maW5hbGl6ZWRfcHJvcG9zYWxfY291bnQKICAgIC8vICAgICB2b3RpbmdfcG93ZXJfd2VpZ2h0ID0gKHZvdGVyLnZvdGVfcG93ZXIubmF0aXZlICogMTAwKSAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlcgogICAgLy8gCiAgICAvLyAKICAgIC8vICAgICBlbmdhZ2VtZW50X3Njb3JlID0gKAogICAgLy8gICAgICAgICBwYXJ0aWNpcGF0aW9uX2ZyZXF1ZW5jeSAqIDcwICsgdm90aW5nX3Bvd2VyX3dlaWdodCAqIDMwCiAgICAvLyAgICAgKSAvLyAxMDAKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoZW5nYWdlbWVudF9zY29yZSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGhhc192b3Rlcl9wYXJ0aWNpcGF0ZWRfaW5fcHJvcG9zYWwoCiAgICAvLyAgICAgc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyCiAgICAvLyApIC0+IGFyYzQuQm9vbDoKICAgIC8vICAgICAiIiJDaGVjayBpZiBhIHZvdGVyIGhhcyBwYXJ0aWNpcGF0ZWQgaW4gYSBzcGVjaWZpYyBwcm9wb3NhbCIiIgogICAgLy8gICAgIHZvdGVyID0gc2VsZi5fZ2V0X3ZvdGVyKGFjY291bnQubmF0aXZlKQogICAgLy8gICAgIHJldHVybiBhcmM0LkJvb2wodm90ZXIucHJvcG9zYWxzX3BhcnRpY2lwYXRlZC5uYXRpdmUgPiAwKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX3BhcnRpY2lwYXRpb25fdGltZXN0YW1wKAogICAgLy8gICAgIHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcywgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMgogICAgLy8gKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIHRpbWVzdGFtcCB3aGVuIGEgdm90ZXIgcGFydGljaXBhdGVkIGluIGEgc3BlY2lmaWMgcHJvcG9zYWwiIiIKICAgIC8vICAgICB2b3RlciA9IHNlbGYuX2dldF92b3RlcihhY2NvdW50Lm5hdGl2ZSkKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQodm90ZXIubGFzdF9wYXJ0aWNpcGF0aW9uX3RpbWVzdGFtcC5uYXRpdmUpCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfdm90ZXJfcHJvcG9zYWxfY291bnQoc2VsZiwgYWNjb3VudDogYXJjNC5BZGRyZXNzKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIG51bWJlciBvZiBwcm9wb3NhbHMgYSB2b3RlciBoYXMgcGFydGljaXBhdGVkIGluIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHZvdGVyLnByb3Bvc2Fsc19wYXJ0aWNpcGF0ZWQubmF0aXZlKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyX2xhc3RfcHJvcG9zYWxfbm9kZShzZWxmLCBhY2NvdW50OiBhcmM0LkFkZHJlc3MpIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBub2RlIG9mIHRoZSBsYXN0IHByb3Bvc2FsIHRoaXMgdm90ZXIgcGFydGljaXBhdGVkIGluIiIiCiAgICAvLyAgICAgdm90ZXIgPSBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICAvLyAgICAgcmV0dXJuIHZvdGVyLmxhc3RfcHJvcG9zYWxfbm9kZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmKSAtPiBhcmM0LlVJbnQyNTY6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBnbG9iYWwgcXVvcnVtIHJlcXVpcmVtZW50IGluIGJhc2lzIHBvaW50cyAoYnBzKSB3aXRoIGJhc2Ugb2YgMTAwMDAiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50MjU2KHNlbGYucXVvcnVtX3JlcXVpcmVtZW50KQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmLCBxdW9ydW1fYnBzOiBhcmM0LlVJbnQyNTYpIC0+IE5vbmU6CiAgICAvLyAgICAgIiIiU2V0IHRoZSBnbG9iYWwgcXVvcnVtIHJlcXVpcmVtZW50IGluIGJhc2lzIHBvaW50cyAoYnBzKSB3aXRoIGJhc2Ugb2YgMTAwMDAiIiIKICAgIC8vICAgICBzZWxmLl9zZXRfcXVvcnVtX3JlcXVpcmVtZW50KHF1b3J1bV9icHMubmF0aXZlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc2V0X3F1b3J1bV9yZXF1aXJlbWVudChzZWxmLCBxdW9ydW1fYnBzOiBCaWdVSW50KSAtPiBOb25lOgogICAgLy8gICAgICIiIlNldCB0aGUgZ2xvYmFsIHF1b3J1bSByZXF1aXJlbWVudCBpbiBiYXNpcyBwb2ludHMgKGJwcykgd2l0aCBiYXNlIG9mIDEwMDAwIiIiCiAgICAvLyAgICAgYXNzZXJ0IHF1b3J1bV9icHMgPD0gMTAwMDAsICJRdW9ydW0gcmVxdWlyZW1lbnQgY2Fubm90IGV4Y2VlZCAxMDAlICgxMDAwMCBicHMpIgogICAgLy8gICAgIHNlbGYucXVvcnVtX3JlcXVpcmVtZW50ID0gcXVvcnVtX2JwcwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3F1b3J1bV90aHJlc2hvbGQoc2VsZikgLT4gYXJjNC5VSW50MjU2OgogICAgLy8gICAgICIiIkdldCB0aGUgY3VycmVudCBxdW9ydW0gdGhyZXNob2xkIGluIHZvdGluZyBwb3dlciB1bml0cyIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQyNTYoc2VsZi5fZ2V0X3F1b3J1bV90aHJlc2hvbGQoKSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9xdW9ydW1fdGhyZXNob2xkKHNlbGYpIC0+IEJpZ1VJbnQ6CiAgICAvLyAgICAgIiIiQ2FsY3VsYXRlIHRoZSBjdXJyZW50IHF1b3J1bSB0aHJlc2hvbGQgaW4gdm90aW5nIHBvd2VyIHVuaXRzIiIiCiAgICAvLyAKICAgIC8vICAgICByZXR1cm4gKHNlbGYudG90YWxfdm90aW5nX3Bvd2VyICogc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQpIC8vIEJpZ1VJbnQoMTAwMDApCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBjaGVja19wcm9wb3NhbF9xdW9ydW0oc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5Cb29sOgogICAgLy8gICAgICIiIkNoZWNrIGlmIGEgcHJvcG9zYWwgbWVldHMgdGhlIHF1b3J1bSByZXF1aXJlbWVudCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LkJvb2woc2VsZi5fY2hlY2tfcHJvcG9zYWxfcXVvcnVtKHByb3Bvc2FsX25vZGUuYnl0ZXMpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXMoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHF1b3J1bSBzdGF0dXMgZm9yIGEgcHJvcG9zYWw6IDAgPSBub3QgbWV0LCAxID0gbWV0LCAyID0gZXhjZWVkZWQiIiIKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3Byb3Bvc2FsX3F1b3J1bV9zdGF0dXMocHJvcG9zYWxfbm9kZS5ieXRlcykpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcHJvcG9zYWxfcXVvcnVtX3N0YXR1cyhzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgICIiIkdldCBxdW9ydW0gc3RhdHVzIGZvciBhIHByb3Bvc2FsOiAwID0gbm90IG1ldCwgMSA9IG1ldCwgMiA9IGV4Y2VlZGVkIiIiCiAgICAvLyAgICAgX3Byb3Bvc2FsX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMocHJvcG9zYWxfbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX3Byb3Bvc2FsX25vZGUgaW4gc2VsZi5wcm9wb3NhbHMsICJQcm9wb3NhbCBkb2VzIG5vdCBleGlzdCIKICAgIC8vICAgICBwcm9wb3NhbCA9IHNlbGYuX2dldF9wcm9wb3NhbChwcm9wb3NhbF9ub2RlKQogICAgLy8gCiAgICAvLyAgICAgaWYgKAogICAgLy8gICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF9zdGF0dXMubmF0aXZlID09IFBST1BPU0FMX1NUQVRVU19TVUNDRUVERUQKICAgIC8vICAgICAgICAgb3IgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfREVGRUFURUQKICAgIC8vICAgICAgICAgb3IgcHJvcG9zYWwucHJvcG9zYWxfc3RhdHVzLm5hdGl2ZSA9PSBQUk9QT1NBTF9TVEFUVVNfRVhQSVJFRAogICAgLy8gICAgICk6CiAgICAvLyAgICAgICAgIHJldHVybiBwcm9wb3NhbC5wcm9wb3NhbF9xdW9ydW1fc3RhdHVzLm5hdGl2ZQogICAgLy8gICAgIGVsc2U6CiAgICAvLyAKICAgIC8vICAgICAgICAgaWYgKAogICAgLy8gICAgICAgICAgICAgcHJvcG9zYWwucHJvcG9zYWxfdG90YWxfcG93ZXIubmF0aXZlCiAgICAvLyAgICAgICAgICAgICA8IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgICAgICk6CiAgICAvLyAgICAgICAgICAgICByZXR1cm4gVUludDY0KFFVT1JVTV9TVEFUVVNfTk9UX01FVCkKICAgIC8vICAgICAgICAgZWxpZiAoCiAgICAvLyAgICAgICAgICAgICBwcm9wb3NhbC5wcm9wb3NhbF90b3RhbF9wb3dlci5uYXRpdmUKICAgIC8vICAgICAgICAgICAgID09IHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICAvLyAgICAgICAgICk6CiAgICAvLyAgICAgICAgICAgICByZXR1cm4gVUludDY0KFFVT1JVTV9TVEFUVVNfTUVUKQogICAgLy8gICAgICAgICBlbHNlOgogICAgLy8gICAgICAgICAgICAgcmV0dXJuIFVJbnQ2NChRVU9SVU1fU1RBVFVTX0VYQ0VFREVEKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3F1b3J1bV9wcm9ncmVzcyhzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgcXVvcnVtIHByb2dyZXNzIGFzIHBlcmNlbnRhZ2UgKDAtMTAwMDAgYnBzKSBmb3IgYSBwcm9wb3NhbCIiIgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcHJvcG9zYWxfcXVvcnVtX3Byb2dyZXNzKHByb3Bvc2FsX25vZGUuYnl0ZXMpKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMzMikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgIiIiR2V0IHRoZSBxdW9ydW0gdGhyZXNob2xkIGZvciBhIHNwZWNpZmljIHByb3Bvc2FsIiIiCiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9wcm9wb3NhbF9xdW9ydW1fdGhyZXNob2xkKHByb3Bvc2FsX25vZGUuYnl0ZXMpKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Byb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQoc2VsZiwgcHJvcG9zYWxfbm9kZTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiJHZXQgdGhlIHF1b3J1bSB0aHJlc2hvbGQgZm9yIGEgc3BlY2lmaWMgcHJvcG9zYWwiIiIKICAgIC8vICAgICBfcHJvcG9zYWxfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhwcm9wb3NhbF9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfcHJvcG9zYWxfbm9kZSBpbiBzZWxmLnByb3Bvc2FscywgIlByb3Bvc2FsIGRvZXMgbm90IGV4aXN0IgogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGJveF9sZW4KICAgIGNvdmVyIDEKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM3MAogICAgLy8gYXNzZXJ0IF9wcm9wb3NhbF9ub2RlIGluIHNlbGYucHJvcG9zYWxzLCAiUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QiCiAgICBhc3NlcnQgLy8gUHJvcG9zYWwgZG9lcyBub3QgZXhpc3QKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzNzEKICAgIC8vIHByb3Bvc2FsID0gc2VsZi5fZ2V0X3Byb3Bvc2FsKHByb3Bvc2FsX25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9wcm9wb3NhbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM3MgogICAgLy8gcmV0dXJuIHByb3Bvc2FsLnByb3Bvc2FsX3F1b3J1bV90aHJlc2hvbGQubmF0aXZlCiAgICBpbnQgODI0CiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmdldF9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihsb2NrdXBfZHVyYXRpb25fc2Vjb25kczogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfbG9ja3VwX2JvbnVzX211bHRpcGxpZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzgxLTEzODQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICBzZWxmLCBsb2NrdXBfZHVyYXRpb25fc2Vjb25kczogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzODcKICAgIC8vIHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcihsb2NrdXBfZHVyYXRpb25fc2Vjb25kcy5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGNhbGxzdWIgX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM4Ni0xMzg4CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgc2VsZi5fY2FsY3VsYXRlX2xvY2t1cF9ib251c19tdWx0aXBsaWVyKGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzLm5hdGl2ZSkKICAgIC8vICkKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X2xvY2t1cF90aWVyX2luZm8obG9ja3VwX2R1cmF0aW9uX3NlY29uZHM6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X2xvY2t1cF90aWVyX2luZm86CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzg5LTEzOTAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGdldF9sb2NrdXBfdGllcl9pbmZvKHNlbGYsIGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzOiBhcmM0LlVJbnQ2NCkgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjEzOTIKICAgIC8vIHRpZXJfaW5mbyA9IHNlbGYuX2dldF9sb2NrdXBfdGllcl9pbmZvKGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzLm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgY2FsbHN1YiBfZ2V0X2xvY2t1cF90aWVyX2luZm8KICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTM5MwogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHRpZXJfaW5mb1swXSkKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuX2dldF9sb2NrdXBfdGllcl9pbmZvKGxvY2t1cF9kdXJhdGlvbjogdWludDY0KSAtPiB1aW50NjQsIHVpbnQ2NDoKX2dldF9sb2NrdXBfdGllcl9pbmZvOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjU3LTY1OAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2xvY2t1cF90aWVyX2luZm8oc2VsZiwgbG9ja3VwX2R1cmF0aW9uOiBVSW50NjQpIC0+IHR1cGxlW1VJbnQ2NCwgVUludDY0XToKICAgIHByb3RvIDEgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjYwCiAgICAvLyBpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNV9EVVJBVElPTjoKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDMxNDQ5NjAwCiAgICA+PQogICAgYnogX2dldF9sb2NrdXBfdGllcl9pbmZvX2Vsc2VfYm9keUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2NjEKICAgIC8vIHJldHVybiAoVUludDY0KDUpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNSkpCiAgICBpbnQgNQogICAgaW50IDEwMDAwCiAgICByZXRzdWIKCl9nZXRfbG9ja3VwX3RpZXJfaW5mb19lbHNlX2JvZHlAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY2MgogICAgLy8gZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfNF9EVVJBVElPTjoKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDE1NzI0ODAwCiAgICA+PQogICAgYnogX2dldF9sb2NrdXBfdGllcl9pbmZvX2Vsc2VfYm9keUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2NjMKICAgIC8vIHJldHVybiAoVUludDY0KDQpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkpCiAgICBpbnQgNAogICAgaW50IDUwMDAKICAgIHJldHN1YgoKX2dldF9sb2NrdXBfdGllcl9pbmZvX2Vsc2VfYm9keUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjY0CiAgICAvLyBlbGlmIGxvY2t1cF9kdXJhdGlvbiA+PSBMT0NLVVBfVElFUl8zX0RVUkFUSU9OOgogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgNzI1NzYwMAogICAgPj0KICAgIGJ6IF9nZXRfbG9ja3VwX3RpZXJfaW5mb19lbHNlX2JvZHlANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjY1CiAgICAvLyByZXR1cm4gKFVJbnQ2NCgzKSwgVUludDY0KExPQ0tVUF9CT05VU19USUVSXzMpKQogICAgaW50IDMKICAgIGludCAyNTAwCiAgICByZXRzdWIKCl9nZXRfbG9ja3VwX3RpZXJfaW5mb19lbHNlX2JvZHlANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY2NgogICAgLy8gZWxpZiBsb2NrdXBfZHVyYXRpb24gPj0gTE9DS1VQX1RJRVJfMl9EVVJBVElPTjoKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDI0MTkyMDAKICAgID49CiAgICBieiBfZ2V0X2xvY2t1cF90aWVyX2luZm9fZWxzZV9ib2R5QDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjY2NwogICAgLy8gcmV0dXJuIChVSW50NjQoMiksIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8yKSkKICAgIGludCAyCiAgICBpbnQgMTAwMAogICAgcmV0c3ViCgpfZ2V0X2xvY2t1cF90aWVyX2luZm9fZWxzZV9ib2R5QDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2NjkKICAgIC8vIHJldHVybiAoVUludDY0KDEpLCBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkpCiAgICBpbnQgMQogICAgaW50IDAKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkKHBvd2VyX3NvdXJjZV9pZDogYnl0ZXMsIHBvd2VyX3NvdXJjZV9hbW91bnQ6IGJ5dGVzLCBsb2NrdXBfZHVyYXRpb25fc2Vjb25kczogYnl0ZXMpIC0+IGJ5dGVzOgpjYWxjdWxhdGVfcG90ZW50aWFsX3Bvd2VyX2dyYW50ZWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxMzk0LTE0MDAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNhbGN1bGF0ZV9wb3RlbnRpYWxfcG93ZXJfZ3JhbnRlZCgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogYXJjNC5VSW50MjU2LAogICAgLy8gICAgIGxvY2t1cF9kdXJhdGlvbl9zZWNvbmRzOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gYXJjNC5VSW50MjU2OgogICAgcHJvdG8gMyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDA0CiAgICAvLyBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLAogICAgZnJhbWVfZGlnIC0zCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDA2CiAgICAvLyBsb2NrdXBfZHVyYXRpb25fc2Vjb25kcy5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0MDMtMTQwNwogICAgLy8gc2VsZi5fY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkKAogICAgLy8gICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudC5uYXRpdmUsCiAgICAvLyAgICAgbG9ja3VwX2R1cmF0aW9uX3NlY29uZHMubmF0aXZlLAogICAgLy8gKQogICAgdW5jb3ZlciAxCiAgICBmcmFtZV9kaWcgLTIKICAgIHVuY292ZXIgMgogICAgY2FsbHN1YiBfY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDAyLTE0MDgKICAgIC8vIHJldHVybiBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgc2VsZi5fY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkKAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfaWQubmF0aXZlLAogICAgLy8gICAgICAgICBwb3dlcl9zb3VyY2VfYW1vdW50Lm5hdGl2ZSwKICAgIC8vICAgICAgICAgbG9ja3VwX2R1cmF0aW9uX3NlY29uZHMubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9jYWxjdWxhdGVfcG90ZW50aWFsX3Bvd2VyX2dyYW50ZWQocG93ZXJfc291cmNlX2lkOiB1aW50NjQsIHBvd2VyX3NvdXJjZV9hbW91bnQ6IGJ5dGVzLCBsb2NrdXBfZHVyYXRpb25fc2Vjb25kczogdWludDY0KSAtPiBieXRlczoKX2NhbGN1bGF0ZV9wb3RlbnRpYWxfcG93ZXJfZ3JhbnRlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0MDktMTQxNQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2FsY3VsYXRlX3BvdGVudGlhbF9wb3dlcl9ncmFudGVkKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkOiBVSW50NjQsCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2Ftb3VudDogQmlnVUludCwKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb25fc2Vjb25kczogVUludDY0LAogICAgLy8gKSAtPiBCaWdVSW50OgogICAgcHJvdG8gMyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDE3CiAgICAvLyBwb3dlcl9zb3VyY2UgPSBzZWxmLl9nZXRfcG93ZXJfc291cmNlKHBvd2VyX3NvdXJjZV9pZCkKICAgIGZyYW1lX2RpZyAtMwogICAgY2FsbHN1YiBfZ2V0X3Bvd2VyX3NvdXJjZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQxOC0xNDIwCiAgICAvLyBsb2NrdXBfYm9udXNfbXVsdGlwbGllciA9IHNlbGYuX2NhbGN1bGF0ZV9sb2NrdXBfYm9udXNfbXVsdGlwbGllcigKICAgIC8vICAgICBsb2NrdXBfZHVyYXRpb25fc2Vjb25kcwogICAgLy8gKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9jYWxjdWxhdGVfbG9ja3VwX2JvbnVzX211bHRpcGxpZXIKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0MjQKICAgIC8vICogKHBvd2VyX3NvdXJjZS5wb3dlcl9tdWx0aXBsaWVyLm5hdGl2ZSArIGxvY2t1cF9ib251c19tdWx0aXBsaWVyKQogICAgaW50IDgKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHVuY292ZXIgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQyMy0xNDI0CiAgICAvLyBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAqIChwb3dlcl9zb3VyY2UucG93ZXJfbXVsdGlwbGllci5uYXRpdmUgKyBsb2NrdXBfYm9udXNfbXVsdGlwbGllcikKICAgIGl0b2IKICAgIGZyYW1lX2RpZyAtMgogICAgdW5jb3ZlciAxCiAgICBiKgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQyNQogICAgLy8gKSAvLyBCaWdVSW50KDEwMDAwKQogICAgYnl0ZSAweDI3MTAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0MjItMTQyNQogICAgLy8gcG93ZXJfZ3JhbnRlZCA9ICgKICAgIC8vICAgICBwb3dlcl9zb3VyY2VfYW1vdW50CiAgICAvLyAgICAgKiAocG93ZXJfc291cmNlLnBvd2VyX211bHRpcGxpZXIubmF0aXZlICsgbG9ja3VwX2JvbnVzX211bHRpcGxpZXIpCiAgICAvLyApIC8vIEJpZ1VJbnQoMTAwMDApCiAgICBiLwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQyNgogICAgLy8gcmV0dXJuIHBvd2VyX2dyYW50ZWQKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uKHRpZXI6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQyNy0xNDI4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfbG9ja3VwX3RpZXJfZHVyYXRpb24oc2VsZiwgdGllcjogYXJjNC5VSW50NjQpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDMwCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uKHRpZXIubmF0aXZlKSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgY2FsbHN1YiBfZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9nZXRfbG9ja3VwX3RpZXJfZHVyYXRpb24odGllcjogdWludDY0KSAtPiB1aW50NjQ6Cl9nZXRfbG9ja3VwX3RpZXJfZHVyYXRpb246CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDMxLTE0MzIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9kdXJhdGlvbihzZWxmLCB0aWVyOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQzNAogICAgLy8gaWYgdGllciA9PSAxOgogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMQogICAgPT0KICAgIGJ6IF9nZXRfbG9ja3VwX3RpZXJfZHVyYXRpb25fZWxzZV9ib2R5QDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0MzUKICAgIC8vIHJldHVybiBVSW50NjQoTE9DS1VQX1RJRVJfMV9EVVJBVElPTikKICAgIGludCA2MDQ4MDAKICAgIHJldHN1YgoKX2dldF9sb2NrdXBfdGllcl9kdXJhdGlvbl9lbHNlX2JvZHlAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0MzYKICAgIC8vIGVsaWYgdGllciA9PSAyOgogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMgogICAgPT0KICAgIGJ6IF9nZXRfbG9ja3VwX3RpZXJfZHVyYXRpb25fZWxzZV9ib2R5QDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0MzcKICAgIC8vIHJldHVybiBVSW50NjQoTE9DS1VQX1RJRVJfMl9EVVJBVElPTikKICAgIGludCAyNDE5MjAwCiAgICByZXRzdWIKCl9nZXRfbG9ja3VwX3RpZXJfZHVyYXRpb25fZWxzZV9ib2R5QDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDM4CiAgICAvLyBlbGlmIHRpZXIgPT0gMzoKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDMKICAgID09CiAgICBieiBfZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uX2Vsc2VfYm9keUA2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDM5CiAgICAvLyByZXR1cm4gVUludDY0KExPQ0tVUF9USUVSXzNfRFVSQVRJT04pCiAgICBpbnQgNzI1NzYwMAogICAgcmV0c3ViCgpfZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uX2Vsc2VfYm9keUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ0MAogICAgLy8gZWxpZiB0aWVyID09IDQ6CiAgICBmcmFtZV9kaWcgLTEKICAgIGludCA0CiAgICA9PQogICAgYnogX2dldF9sb2NrdXBfdGllcl9kdXJhdGlvbl9lbHNlX2JvZHlAOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ0MQogICAgLy8gcmV0dXJuIFVJbnQ2NChMT0NLVVBfVElFUl80X0RVUkFUSU9OKQogICAgaW50IDE1NzI0ODAwCiAgICByZXRzdWIKCl9nZXRfbG9ja3VwX3RpZXJfZHVyYXRpb25fZWxzZV9ib2R5QDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDQyCiAgICAvLyBlbGlmIHRpZXIgPT0gNToKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDUKICAgID09CiAgICBieiBfZ2V0X2xvY2t1cF90aWVyX2R1cmF0aW9uX2Vsc2VfYm9keUAxMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ0MwogICAgLy8gcmV0dXJuIFVJbnQ2NChMT0NLVVBfVElFUl81X0RVUkFUSU9OKQogICAgaW50IDMxNDQ5NjAwCiAgICByZXRzdWIKCl9nZXRfbG9ja3VwX3RpZXJfZHVyYXRpb25fZWxzZV9ib2R5QDEwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ0NQogICAgLy8gcmV0dXJuIFVJbnQ2NCgwKQogICAgaW50IDAKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkdvdmVybmFuY2UuZ2V0X2xvY2t1cF90aWVyX2JvbnVzKHRpZXI6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X2xvY2t1cF90aWVyX2JvbnVzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ0Ni0xNDQ3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfbG9ja3VwX3RpZXJfYm9udXMoc2VsZiwgdGllcjogYXJjNC5VSW50NjQpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDQ5CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2xvY2t1cF90aWVyX2JvbnVzKHRpZXIubmF0aXZlKSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgY2FsbHN1YiBfZ2V0X2xvY2t1cF90aWVyX2JvbnVzCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLl9nZXRfbG9ja3VwX3RpZXJfYm9udXModGllcjogdWludDY0KSAtPiB1aW50NjQ6Cl9nZXRfbG9ja3VwX3RpZXJfYm9udXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDUwLTE0NTEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9sb2NrdXBfdGllcl9ib251cyhzZWxmLCB0aWVyOiBVSW50NjQpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ1MwogICAgLy8gaWYgdGllciA9PSAxOgogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMQogICAgPT0KICAgIGJ6IF9nZXRfbG9ja3VwX3RpZXJfYm9udXNfZWxzZV9ib2R5QDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0NTQKICAgIC8vIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfMSkKICAgIGludCAwCiAgICByZXRzdWIKCl9nZXRfbG9ja3VwX3RpZXJfYm9udXNfZWxzZV9ib2R5QDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDU1CiAgICAvLyBlbGlmIHRpZXIgPT0gMjoKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDIKICAgID09CiAgICBieiBfZ2V0X2xvY2t1cF90aWVyX2JvbnVzX2Vsc2VfYm9keUA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDU2CiAgICAvLyByZXR1cm4gVUludDY0KExPQ0tVUF9CT05VU19USUVSXzIpCiAgICBpbnQgMTAwMAogICAgcmV0c3ViCgpfZ2V0X2xvY2t1cF90aWVyX2JvbnVzX2Vsc2VfYm9keUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ1NwogICAgLy8gZWxpZiB0aWVyID09IDM6CiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAzCiAgICA9PQogICAgYnogX2dldF9sb2NrdXBfdGllcl9ib251c19lbHNlX2JvZHlANgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ1OAogICAgLy8gcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl8zKQogICAgaW50IDI1MDAKICAgIHJldHN1YgoKX2dldF9sb2NrdXBfdGllcl9ib251c19lbHNlX2JvZHlANjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0NTkKICAgIC8vIGVsaWYgdGllciA9PSA0OgogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgNAogICAgPT0KICAgIGJ6IF9nZXRfbG9ja3VwX3RpZXJfYm9udXNfZWxzZV9ib2R5QDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0NjAKICAgIC8vIHJldHVybiBVSW50NjQoTE9DS1VQX0JPTlVTX1RJRVJfNCkKICAgIGludCA1MDAwCiAgICByZXRzdWIKCl9nZXRfbG9ja3VwX3RpZXJfYm9udXNfZWxzZV9ib2R5QDg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDYxCiAgICAvLyBlbGlmIHRpZXIgPT0gNToKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDUKICAgID09CiAgICBieiBfZ2V0X2xvY2t1cF90aWVyX2JvbnVzX2Vsc2VfYm9keUAxMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ2MgogICAgLy8gcmV0dXJuIFVJbnQ2NChMT0NLVVBfQk9OVVNfVElFUl81KQogICAgaW50IDEwMDAwCiAgICByZXRzdWIKCl9nZXRfbG9ja3VwX3RpZXJfYm9udXNfZWxzZV9ib2R5QDEwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ2NAogICAgLy8gcmV0dXJuIFVJbnQ2NCgxMDAwMCkKICAgIGludCAxMDAwMAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5nZXRfcG93ZXJfbG9ja19pbmZvKHBvd2VyX3NvdXJjZV9pZDogYnl0ZXMsIHBvd2VyX3VubG9ja190aW1lc3RhbXA6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3Bvd2VyX2xvY2tfaW5mbzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0NjUtMTQ2OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3Bvd2VyX2xvY2tfaW5mbygKICAgIC8vICAgICBzZWxmLCBwb3dlcl9zb3VyY2VfaWQ6IGFyYzQuVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ3MgogICAgLy8gcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDcxLTE0NzMKICAgIC8vIHNlbGYuX2dldF9wb3dlcl9sb2NrX2luZm8oCiAgICAvLyAgICAgcG93ZXJfc291cmNlX2lkLm5hdGl2ZSwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcC5uYXRpdmUKICAgIC8vICkKICAgIGNhbGxzdWIgX2dldF9wb3dlcl9sb2NrX2luZm8KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0NzAtMTQ3NAogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KAogICAgLy8gICAgIHNlbGYuX2dldF9wb3dlcl9sb2NrX2luZm8oCiAgICAvLyAgICAgICAgIHBvd2VyX3NvdXJjZV9pZC5uYXRpdmUsIHBvd2VyX3VubG9ja190aW1lc3RhbXAubmF0aXZlCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZS5fZ2V0X3Bvd2VyX2xvY2tfaW5mbyhwb3dlcl9zb3VyY2VfaWQ6IHVpbnQ2NCwgcG93ZXJfdW5sb2NrX3RpbWVzdGFtcDogdWludDY0KSAtPiB1aW50NjQ6Cl9nZXRfcG93ZXJfbG9ja19pbmZvOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ3NS0xNDc4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcG93ZXJfbG9ja19pbmZvKAogICAgLy8gICAgIHNlbGYsIHBvd2VyX3NvdXJjZV9pZDogVUludDY0LCBwb3dlcl91bmxvY2tfdGltZXN0YW1wOiBVSW50NjQKICAgIC8vICkgLT4gVUludDY0OgogICAgcHJvdG8gMiAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDgwCiAgICAvLyBwb3dlcl9sb2NrID0gc2VsZi5fZ2V0X3Bvd2VyX2xvY2socG93ZXJfc291cmNlX2lkLCBwb3dlcl91bmxvY2tfdGltZXN0YW1wKQogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9wb3dlcl9sb2NrCiAgICBkdXAKICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0ODEKICAgIC8vIGlmIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX2lkLm5hdGl2ZSA9PSAwOgogICAgaW50IDAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAwCiAgICA9PQogICAgYnogX2dldF9wb3dlcl9sb2NrX2luZm9fYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDgyCiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgdW5jb3ZlciAxCiAgICByZXRzdWIKCl9nZXRfcG93ZXJfbG9ja19pbmZvX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0ODUKICAgIC8vIHBvd2VyX2xvY2sucG93ZXJfc291cmNlX3VubG9ja190aW1lc3RhbXAubmF0aXZlIC0gR2xvYmFsLmxhdGVzdF90aW1lc3RhbXAKICAgIGZyYW1lX2RpZyAwCiAgICBpbnQgNDAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGdsb2JhbCBMYXRlc3RUaW1lc3RhbXAKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE0ODgKICAgIC8vIGlmIHJlbWFpbmluZ190aW1lIDw9IDA6CiAgICBpbnQgMAogICAgPD0KICAgIGJ6IF9nZXRfcG93ZXJfbG9ja19pbmZvX2FmdGVyX2lmX2Vsc2VANAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ4OQogICAgLy8gcmV0dXJuIFVJbnQ2NCgwKQogICAgaW50IDAKICAgIHVuY292ZXIgMQogICAgcmV0c3ViCgpfZ2V0X3Bvd2VyX2xvY2tfaW5mb19hZnRlcl9pZl9lbHNlQDQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNDkxCiAgICAvLyB0aWVyX2luZm8gPSBzZWxmLl9nZXRfbG9ja3VwX3RpZXJfaW5mbyhwb3dlcl9sb2NrLmxvY2t1cF9kdXJhdGlvbi5uYXRpdmUpCiAgICBmcmFtZV9kaWcgMAogICAgaW50IDExMgogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgY2FsbHN1YiBfZ2V0X2xvY2t1cF90aWVyX2luZm8KICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTQ5MgogICAgLy8gcmV0dXJuIHRpZXJfaW5mb1swXQogICAgdW5jb3ZlciAxCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5Hb3Zlcm5hbmNlLmdldF92b3RlcihhY2NvdW50OiBieXRlcykgLT4gYnl0ZXM6CmdldF92b3RlcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1MjAtMTUyMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ2V0X3ZvdGVyKHNlbGYsIGFjY291bnQ6IGFyYzQuQWRkcmVzcykgLT4gVm90ZXI6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1MjIKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfdm90ZXIoYWNjb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF92b3RlcgogICAgcmV0c3ViCgoKLy8gX19tYWluX18uR292ZXJuYW5jZUludGVyZmFjZS5jaGVja19wcm9wb3NhbF9hY3RpdmF0aW9uKHByb3Bvc2FsX25vZGU6IGJ5dGVzKSAtPiB2b2lkOgpjaGVja19wcm9wb3NhbF9hY3RpdmF0aW9uOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTk4LTE5OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2hlY2tfcHJvcG9zYWxfYWN0aXZhdGlvbihzZWxmLCBwcm9wb3NhbF9ub2RlOiBCeXRlczMyKSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICByZXRzdWIKCgovLyBfX21haW5fXy5FbGVjdGlvbi5nZXRfZWxlY3Rpb25fbm9kZShlbGVjdGlvbl90aXRsZTogYnl0ZXMsIGVsZWN0aW9uX2Rlc2NyaXB0aW9uOiBieXRlcykgLT4gYnl0ZXM6CmdldF9lbGVjdGlvbl9ub2RlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MzU4LTM2MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2VsZWN0aW9uX25vZGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBlbGVjdGlvbl90aXRsZTogQnl0ZXM2NCwKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbjogQnl0ZXM1MTIsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM2NAogICAgLy8gcmV0dXJuIHNlbGYuX2dldF9lbGVjdGlvbl9ub2RlKGVsZWN0aW9uX3RpdGxlLmJ5dGVzLCBlbGVjdGlvbl9kZXNjcmlwdGlvbi5ieXRlcykKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfZWxlY3Rpb25fbm9kZQogICAgcmV0c3ViCgoKLy8gX19tYWluX18uRWxlY3Rpb24uX2dldF9lbGVjdGlvbl9ub2RlKGVsZWN0aW9uX3RpdGxlOiBieXRlcywgZWxlY3Rpb25fZGVzY3JpcHRpb246IGJ5dGVzKSAtPiBieXRlczoKX2dldF9lbGVjdGlvbl9ub2RlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MzY1LTM3MAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2VsZWN0aW9uX25vZGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBlbGVjdGlvbl90aXRsZTogQnl0ZXMsCiAgICAvLyAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb246IEJ5dGVzLAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgcHJvdG8gMiAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNzEKICAgIC8vIHJldHVybiBCeXRlczMyLmZyb21fYnl0ZXMob3Auc2hhMjU2KGVsZWN0aW9uX3RpdGxlICsgZWxlY3Rpb25fZGVzY3JpcHRpb24pKQogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5FbGVjdGlvbi5nZXRfZWxlY3Rpb24oZWxlY3Rpb25fbm9kZTogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfZWxlY3Rpb246CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNzItMzc2CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfZWxlY3Rpb24oCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlOiBCeXRlczMyLAogICAgLy8gKSAtPiBFbGVjdGlvblByb3Bvc2FsOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNzcKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfZWxlY3Rpb24oZWxlY3Rpb25fbm9kZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X2VsZWN0aW9uCiAgICBwb3AKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkVsZWN0aW9uLl9nZXRfZWxlY3Rpb24oZWxlY3Rpb25fbm9kZTogYnl0ZXMpIC0+IGJ5dGVzLCBieXRlczoKX2dldF9lbGVjdGlvbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM3OC0zODIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9lbGVjdGlvbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU6IEJ5dGVzMzIsCiAgICAvLyApIC0+IEVsZWN0aW9uUHJvcG9zYWw6CiAgICBwcm90byAxIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM4OAogICAgLy8gcHJvcG9zZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozODUtMzk4CiAgICAvLyBkZWZhdWx0PUVsZWN0aW9uUHJvcG9zYWwoCiAgICAvLyAgICAgZWxlY3Rpb25faW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICBlbGVjdGlvbl90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDY0KSksCiAgICAvLyAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNTEyKSksCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDMyKSksCiAgICAvLyAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdm90ZXM9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBieXRlIDB4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozODYKICAgIC8vIGVsZWN0aW9uX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM4NS0zOTgKICAgIC8vIGRlZmF1bHQ9RWxlY3Rpb25Qcm9wb3NhbCgKICAgIC8vICAgICBlbGVjdGlvbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNjQpKSwKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA1MTIpKSwKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogMzIpKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Mzg3CiAgICAvLyBlbGVjdGlvbl9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Mzg1LTM5OAogICAgLy8gZGVmYXVsdD1FbGVjdGlvblByb3Bvc2FsKAogICAgLy8gICAgIGVsZWN0aW9uX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA2NCkpLAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDUxMikpLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiAzMikpLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3ZvdGVzPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Mzg5CiAgICAvLyBlbGVjdGlvbl90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDY0KSksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM4NS0zOTgKICAgIC8vIGRlZmF1bHQ9RWxlY3Rpb25Qcm9wb3NhbCgKICAgIC8vICAgICBlbGVjdGlvbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNjQpKSwKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA1MTIpKSwKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogMzIpKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MzkwCiAgICAvLyBlbGVjdGlvbl9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA1MTIpKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozODUtMzk4CiAgICAvLyBkZWZhdWx0PUVsZWN0aW9uUHJvcG9zYWwoCiAgICAvLyAgICAgZWxlY3Rpb25faW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICBlbGVjdGlvbl90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDY0KSksCiAgICAvLyAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNTEyKSksCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDMyKSksCiAgICAvLyAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdm90ZXM9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM5MQogICAgLy8gZWxlY3Rpb25fbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDMyKSksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Mzg1LTM5OAogICAgLy8gZGVmYXVsdD1FbGVjdGlvblByb3Bvc2FsKAogICAgLy8gICAgIGVsZWN0aW9uX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA2NCkpLAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDUxMikpLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiAzMikpLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3ZvdGVzPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozOTIKICAgIC8vIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM4NS0zOTgKICAgIC8vIGRlZmF1bHQ9RWxlY3Rpb25Qcm9wb3NhbCgKICAgIC8vICAgICBlbGVjdGlvbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNjQpKSwKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA1MTIpKSwKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogMzIpKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MzkzCiAgICAvLyBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Mzg1LTM5OAogICAgLy8gZGVmYXVsdD1FbGVjdGlvblByb3Bvc2FsKAogICAgLy8gICAgIGVsZWN0aW9uX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA2NCkpLAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDUxMikpLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiAzMikpLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3ZvdGVzPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozOTQKICAgIC8vIGVsZWN0aW9uX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Mzg1LTM5OAogICAgLy8gZGVmYXVsdD1FbGVjdGlvblByb3Bvc2FsKAogICAgLy8gICAgIGVsZWN0aW9uX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA2NCkpLAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDUxMikpLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiAzMikpLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3ZvdGVzPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozOTUKICAgIC8vIGVuZG9yc2VtZW50X2NvdW50PWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM4NS0zOTgKICAgIC8vIGRlZmF1bHQ9RWxlY3Rpb25Qcm9wb3NhbCgKICAgIC8vICAgICBlbGVjdGlvbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNjQpKSwKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA1MTIpKSwKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogMzIpKSwKICAgIC8vICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Mzk2CiAgICAvLyBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6Mzg1LTM5OAogICAgLy8gZGVmYXVsdD1FbGVjdGlvblByb3Bvc2FsKAogICAgLy8gICAgIGVsZWN0aW9uX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXR1cz1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA2NCkpLAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uPUJ5dGVzNTEyLmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDUxMikpLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiAzMikpLAogICAgLy8gICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3ZvdGVzPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozOTcKICAgIC8vIGVuZG9yc2VtZW50X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozODUtMzk4CiAgICAvLyBkZWZhdWx0PUVsZWN0aW9uUHJvcG9zYWwoCiAgICAvLyAgICAgZWxlY3Rpb25faW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHByb3Bvc2VyPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICBlbGVjdGlvbl90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDY0KSksCiAgICAvLyAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNTEyKSksCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDMyKSksCiAgICAvLyAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdm90ZXM9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM1MAogICAgLy8gQnl0ZXMzMiwgRWxlY3Rpb25Qcm9wb3NhbCwga2V5X3ByZWZpeD1iImVfIgogICAgYnl0ZSAweDY1NWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM4My0zOTkKICAgIC8vIHJldHVybiBzZWxmLmVsZWN0aW9ucy5nZXQoCiAgICAvLyAgICAga2V5PWVsZWN0aW9uX25vZGUsCiAgICAvLyAgICAgZGVmYXVsdD1FbGVjdGlvblByb3Bvc2FsKAogICAgLy8gICAgICAgICBlbGVjdGlvbl9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgZWxlY3Rpb25fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGVsZWN0aW9uX3RpdGxlPUJ5dGVzNjQuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNjQpKSwKICAgIC8vICAgICAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNTEyKSksCiAgICAvLyAgICAgICAgIGVsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiAzMikpLAogICAgLy8gICAgICAgICBjcmVhdGVkX2F0X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBlbmRvcnNlbWVudF9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgZW5kb3JzZW1lbnRfdm90ZXM9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgKSwKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICBib3hfZ2V0CiAgICBjb3ZlciAxCiAgICB1bmNvdmVyIDIKICAgIHVuY292ZXIgMQogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIGZyYW1lX2RpZyAtMQogICAgcmV0c3ViCgoKLy8gX19tYWluX18uRWxlY3Rpb24ucHJvcG9zZV9lbGVjdGlvbihlbGVjdGlvbl90aXRsZTogYnl0ZXMsIGVsZWN0aW9uX2Rlc2NyaXB0aW9uOiBieXRlcywgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wOiBieXRlcywgZWxlY3Rpb25fZW5kX3RpbWVzdGFtcDogYnl0ZXMpIC0+IGJ5dGVzOgpwcm9wb3NlX2VsZWN0aW9uOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDAwLTQwNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZV9lbGVjdGlvbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0MTIKICAgIC8vIGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQxMwogICAgLy8gZWxlY3Rpb25fZW5kX3RpbWVzdGFtcC5uYXRpdmUsCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQwOS00MTQKICAgIC8vIHNlbGYuX3Byb3Bvc2VfZWxlY3Rpb24oCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb24uYnl0ZXMsCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICB1bmNvdmVyIDMKICAgIHVuY292ZXIgMwogICAgY2FsbHN1YiBfcHJvcG9zZV9lbGVjdGlvbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDA4LTQxNQogICAgLy8gcmV0dXJuIEJ5dGVzMzIuZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9wcm9wb3NlX2VsZWN0aW9uKAogICAgLy8gICAgICAgICBlbGVjdGlvbl90aXRsZS5ieXRlcywKICAgIC8vICAgICAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb24uYnl0ZXMsCiAgICAvLyAgICAgICAgIGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICkKICAgIC8vICkKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkVsZWN0aW9uLl9wcm9wb3NlX2VsZWN0aW9uKGVsZWN0aW9uX3RpdGxlOiBieXRlcywgZWxlY3Rpb25fZGVzY3JpcHRpb246IGJ5dGVzLCBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA6IHVpbnQ2NCwgZWxlY3Rpb25fZW5kX3RpbWVzdGFtcDogdWludDY0KSAtPiBieXRlczoKX3Byb3Bvc2VfZWxlY3Rpb246CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0MTYtNDIzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9wcm9wb3NlX2VsZWN0aW9uKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGU6IEJ5dGVzLAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uOiBCeXRlcywKICAgIC8vICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0MjQKICAgIC8vIGVsZWN0aW9uX25vZGUgPSBzZWxmLl9nZXRfZWxlY3Rpb25fbm9kZShlbGVjdGlvbl90aXRsZSwgZWxlY3Rpb25fZGVzY3JpcHRpb24pCiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgY2FsbHN1YiBfZ2V0X2VsZWN0aW9uX25vZGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM1MAogICAgLy8gQnl0ZXMzMiwgRWxlY3Rpb25Qcm9wb3NhbCwga2V5X3ByZWZpeD1iImVfIgogICAgYnl0ZSAweDY1NWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM1MC00MjUKICAgIC8vICAgICAgICAgQnl0ZXMzMiwgRWxlY3Rpb25Qcm9wb3NhbCwga2V5X3ByZWZpeD1iImVfIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLmVuZG9yc2VtZW50cyA9IEJveE1hcCgKICAgIC8vICAgICAgICAgQnl0ZXMzMiwgYm9vbCwga2V5X3ByZWZpeD1iImRfIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLmNhbmRpZGF0ZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzMzIsIEVuZG9yc2VtZW50LCBrZXlfcHJlZml4PWIiY18iCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2VsZWN0aW9uX25vZGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBlbGVjdGlvbl90aXRsZTogQnl0ZXM2NCwKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbjogQnl0ZXM1MTIsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9lbGVjdGlvbl9ub2RlKGVsZWN0aW9uX3RpdGxlLmJ5dGVzLCBlbGVjdGlvbl9kZXNjcmlwdGlvbi5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9lbGVjdGlvbl9ub2RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGU6IEJ5dGVzLAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uOiBCeXRlcywKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1NihlbGVjdGlvbl90aXRsZSArIGVsZWN0aW9uX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9lbGVjdGlvbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU6IEJ5dGVzMzIsCiAgICAvLyApIC0+IEVsZWN0aW9uUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9lbGVjdGlvbihlbGVjdGlvbl9ub2RlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2VsZWN0aW9uKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZTogQnl0ZXMzMiwKICAgIC8vICkgLT4gRWxlY3Rpb25Qcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5lbGVjdGlvbnMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9ZWxlY3Rpb25fbm9kZSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1FbGVjdGlvblByb3Bvc2FsKAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25faW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDY0KSksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA1MTIpKSwKICAgIC8vICAgICAgICAgICAgIGVsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiAzMikpLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgZW5kb3JzZW1lbnRfY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZV9lbGVjdGlvbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBCeXRlczMyLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX3Byb3Bvc2VfZWxlY3Rpb24oCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl90aXRsZS5ieXRlcywKICAgIC8vICAgICAgICAgICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICAgICAgICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZV9lbGVjdGlvbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyAgICAgZWxlY3Rpb25fZW5kX3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlID0gc2VsZi5fZ2V0X2VsZWN0aW9uX25vZGUoZWxlY3Rpb25fdGl0bGUsIGVsZWN0aW9uX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBlbGVjdGlvbl9ub2RlIG5vdCBpbiBzZWxmLmVsZWN0aW9ucywgIkVsZWN0aW9uIElEIGFscmVhZHkgZXhpc3RzIgogICAgZGlnIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0MjUKICAgIC8vIGFzc2VydCBlbGVjdGlvbl9ub2RlIG5vdCBpbiBzZWxmLmVsZWN0aW9ucywgIkVsZWN0aW9uIElEIGFscmVhZHkgZXhpc3RzIgogICAgYXNzZXJ0IC8vIEVsZWN0aW9uIElEIGFscmVhZHkgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0MjYKICAgIC8vIGVsZWN0aW9uID0gc2VsZi5fZ2V0X2VsZWN0aW9uKGVsZWN0aW9uX25vZGUpCiAgICBjYWxsc3ViIF9nZXRfZWxlY3Rpb24KICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQyNwogICAgLy8gZWxlY3Rpb25faW5kZXggPSBzZWxmLmVsZWN0aW9uX2NvdW50ICsgMQogICAgaW50IDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM0NwogICAgLy8gc2VsZi5lbGVjdGlvbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJlbGVjdGlvbl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQyNwogICAgLy8gZWxlY3Rpb25faW5kZXggPSBzZWxmLmVsZWN0aW9uX2NvdW50ICsgMQogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLmVsZWN0aW9uX2NvdW50IGV4aXN0cwogICAgaW50IDEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQyOAogICAgLy8gZWxlY3Rpb24uZWxlY3Rpb25faW5kZXggPSBhcmM0LlVJbnQ2NChlbGVjdGlvbl9pbmRleCkKICAgIGR1cAogICAgaXRvYgogICAgdW5jb3ZlciAyCiAgICBpbnQgMAogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDI5LTQzMQogICAgLy8gZWxlY3Rpb24uZWxlY3Rpb25fc3RhdHVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgRUxFQ1RJT05fU1RBVFVTX0FDVElWRQogICAgLy8gKQogICAgaW50IDgKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAxCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDMyCiAgICAvLyBlbGVjdGlvbi5wcm9wb3NlciA9IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKQogICAgdHhuIFNlbmRlcgogICAgY292ZXIgMQogICAgaW50IDE2CiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0MzMKICAgIC8vIGVsZWN0aW9uLmVsZWN0aW9uX3RpdGxlID0gQnl0ZXM2NC5mcm9tX2J5dGVzKGVsZWN0aW9uX3RpdGxlKQogICAgZnJhbWVfZGlnIC00CiAgICBjb3ZlciAxCiAgICBpbnQgNDgKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQzNAogICAgLy8gZWxlY3Rpb24uZWxlY3Rpb25fbm9kZSA9IGVsZWN0aW9uX25vZGUuY29weSgpCiAgICBkaWcgMgogICAgdW5jb3ZlciAxCiAgICBpbnQgNjI0CiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0MzUKICAgIC8vIGVsZWN0aW9uLmVsZWN0aW9uX2Rlc2NyaXB0aW9uID0gQnl0ZXM1MTIuZnJvbV9ieXRlcyhlbGVjdGlvbl9kZXNjcmlwdGlvbikKICAgIGZyYW1lX2RpZyAtMwogICAgY292ZXIgMQogICAgaW50IDExMgogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDM2CiAgICAvLyBlbGVjdGlvbi5jcmVhdGVkX2F0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KEdsb2JhbC5sYXRlc3RfdGltZXN0YW1wKQogICAgZ2xvYmFsIExhdGVzdFRpbWVzdGFtcAogICAgaXRvYgogICAgdW5jb3ZlciAxCiAgICBpbnQgNjU2CiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0MzcKICAgIC8vIGVsZWN0aW9uLmVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcCkKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgdW5jb3ZlciAxCiAgICBpbnQgNjY0CiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0MzgKICAgIC8vIGVsZWN0aW9uLmVsZWN0aW9uX2VuZF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChlbGVjdGlvbl9lbmRfdGltZXN0YW1wKQogICAgZnJhbWVfZGlnIC0xCiAgICBpdG9iCiAgICB1bmNvdmVyIDEKICAgIGludCA2NzIKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM1MAogICAgLy8gQnl0ZXMzMiwgRWxlY3Rpb25Qcm9wb3NhbCwga2V5X3ByZWZpeD1iImVfIgogICAgYnl0ZSAweDY1NWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQzOQogICAgLy8gc2VsZi5lbGVjdGlvbnNbZWxlY3Rpb25fbm9kZV0gPSBlbGVjdGlvbi5jb3B5KCkKICAgIGRpZyAzCiAgICBjb25jYXQKICAgIHVuY292ZXIgMQogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MzQ3CiAgICAvLyBzZWxmLmVsZWN0aW9uX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgImVsZWN0aW9uX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDQwCiAgICAvLyBzZWxmLmVsZWN0aW9uX2NvdW50ID0gZWxlY3Rpb25faW5kZXgKICAgIHVuY292ZXIgMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ0MQogICAgLy8gYXJjNC5lbWl0KEVsZWN0aW9uQ3JlYXRlZChlbGVjdGlvbl9ub2RlPWVsZWN0aW9uX25vZGUpKQogICAgYnl0ZSAweAogICAgZGlnIDEKICAgIGNvbmNhdAogICAgbWV0aG9kICJFbGVjdGlvbkNyZWF0ZWQoYnl0ZVszMl0pIgogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDQyCiAgICAvLyByZXR1cm4gZWxlY3Rpb25fbm9kZS5ieXRlcwogICAgcmV0c3ViCgoKLy8gX19tYWluX18uRWxlY3Rpb24uZW5kb3JzZV9jYW5kaWRhdGVzKGVsZWN0aW9uX25vZGU6IGJ5dGVzLCBjYW5kaWRhdGVfbm9kZV8xOiBieXRlcywgY2FuZGlkYXRlX25vZGVfMjogYnl0ZXMsIGNhbmRpZGF0ZV9ub2RlXzM6IGJ5dGVzLCBjYW5kaWRhdGVfbm9kZV80OiBieXRlcywgY2FuZGlkYXRlX25vZGVfNTogYnl0ZXMpIC0+IHZvaWQ6CmVuZG9yc2VfY2FuZGlkYXRlczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ0My00NTIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGVuZG9yc2VfY2FuZGlkYXRlcygKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU6IEJ5dGVzMzIsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMTogQnl0ZXMzMiwKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV8yOiBCeXRlczMyLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzM6IEJ5dGVzMzIsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfNDogQnl0ZXMzMiwKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV81OiBCeXRlczMyLAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gNiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0NTMKICAgIC8vIGVuc3VyZV9idWRnZXQoMTAwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICBpbnQgMTAwMDAKICAgIGludCAwCiAgICBjYWxsc3ViIGVuc3VyZV9idWRnZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ1NS00NjMKICAgIC8vIHNlbGYuX2VuZG9yc2VfY2FuZGlkYXRlcygKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlLmJ5dGVzLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzEuYnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMi5ieXRlcywKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV8zLmJ5dGVzLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzQuYnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfNS5ieXRlcywKICAgIC8vICAgICB2b3RlX3Bvd2VyLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC02CiAgICBmcmFtZV9kaWcgLTUKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgLTIKICAgIGZyYW1lX2RpZyAtMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDU0CiAgICAvLyB2b3RlX3Bvd2VyID0gQmlnVUludCgxKQogICAgYnl0ZSAweDAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0NTUtNDYzCiAgICAvLyBzZWxmLl9lbmRvcnNlX2NhbmRpZGF0ZXMoCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZS5ieXRlcywKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV8xLmJ5dGVzLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzIuYnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMy5ieXRlcywKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV80LmJ5dGVzLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzUuYnl0ZXMsCiAgICAvLyAgICAgdm90ZV9wb3dlciwKICAgIC8vICkKICAgIGNhbGxzdWIgX2VuZG9yc2VfY2FuZGlkYXRlcwogICAgcmV0c3ViCgoKLy8gYWxnb3B5LmVuc3VyZV9idWRnZXQocmVxdWlyZWRfYnVkZ2V0OiB1aW50NjQsIGZlZV9zb3VyY2U6IHVpbnQ2NCkgLT4gdm9pZDoKZW5zdXJlX2J1ZGdldDoKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToxMS0xNwogICAgcHJvdG8gMiAwCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MTgKICAgIGZyYW1lX2RpZyAtMgogICAgaW50IDEwCiAgICArCgplbnN1cmVfYnVkZ2V0X3doaWxlX3RvcEAxOgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjE5CiAgICBnbG9iYWwgT3Bjb2RlQnVkZ2V0CiAgICBmcmFtZV9kaWcgMAogICAgdW5jb3ZlciAxCiAgICA+CiAgICBieiBlbnN1cmVfYnVkZ2V0X2FmdGVyX3doaWxlQDcKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyMAogICAgaXR4bl9iZWdpbgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjIxCiAgICBpbnQgYXBwbAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjIyCiAgICBpbnQgRGVsZXRlQXBwbGljYXRpb24KICAgIGl0eG5fZmllbGQgT25Db21wbGV0aW9uCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjMKICAgIGJ5dGUgMHgwNjgxMDEKICAgIGl0eG5fZmllbGQgQXBwcm92YWxQcm9ncmFtCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjQKICAgIGJ5dGUgMHgwNjgxMDEKICAgIGl0eG5fZmllbGQgQ2xlYXJTdGF0ZVByb2dyYW0KICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyNgogICAgaW50IDAKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyOAogICAgaW50IDEKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyNS0yOQogICAgZnJhbWVfZGlnIC0xCiAgICBtYXRjaCBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlXzBAMyBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlXzFANAogICAgYiBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlX2RlZmF1bHRANQoKZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8wQDM6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjcKICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgYiBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlX25leHRANgoKZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8xQDQ6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjkKICAgIGdsb2JhbCBNaW5UeG5GZWUKICAgIGl0eG5fZmllbGQgRmVlCiAgICBiIGVuc3VyZV9idWRnZXRfc3dpdGNoX2Nhc2VfbmV4dEA2CgplbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlX2RlZmF1bHRANToKCmVuc3VyZV9idWRnZXRfc3dpdGNoX2Nhc2VfbmV4dEA2OgogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjMwCiAgICBpdHhuX3N1Ym1pdAogICAgYiBlbnN1cmVfYnVkZ2V0X3doaWxlX3RvcEAxCgplbnN1cmVfYnVkZ2V0X2FmdGVyX3doaWxlQDc6CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5FbGVjdGlvbi5fZW5kb3JzZV9jYW5kaWRhdGVzKGVsZWN0aW9uX25vZGU6IGJ5dGVzLCBjYW5kaWRhdGVfbm9kZV8xOiBieXRlcywgY2FuZGlkYXRlX25vZGVfMjogYnl0ZXMsIGNhbmRpZGF0ZV9ub2RlXzM6IGJ5dGVzLCBjYW5kaWRhdGVfbm9kZV80OiBieXRlcywgY2FuZGlkYXRlX25vZGVfNTogYnl0ZXMsIHZvdGVfcG93ZXI6IGJ5dGVzKSAtPiB2b2lkOgpfZW5kb3JzZV9jYW5kaWRhdGVzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDY0LTQ3NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZW5kb3JzZV9jYW5kaWRhdGVzKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZTogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMTogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMjogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMzogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfNDogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfNTogQnl0ZXMsCiAgICAvLyAgICAgdm90ZV9wb3dlcjogQmlnVUludCwKICAgIC8vICkgLT4gTm9uZToKICAgIHByb3RvIDcgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDc1CiAgICAvLyBfZWxlY3Rpb25fbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhlbGVjdGlvbl9ub2RlKQogICAgZnJhbWVfZGlnIC03CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNTAKICAgIC8vIEJ5dGVzMzIsIEVsZWN0aW9uUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJlXyIKICAgIGJ5dGUgMHg2NTVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNTAtNDc2CiAgICAvLyAgICAgICAgIEJ5dGVzMzIsIEVsZWN0aW9uUHJvcG9zYWwsIGtleV9wcmVmaXg9YiJlXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5lbmRvcnNlbWVudHMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzMzIsIGJvb2wsIGtleV9wcmVmaXg9YiJkXyIKICAgIC8vICAgICApCiAgICAvLyAgICAgc2VsZi5jYW5kaWRhdGVzID0gQm94TWFwKAogICAgLy8gICAgICAgICBCeXRlczMyLCBFbmRvcnNlbWVudCwga2V5X3ByZWZpeD1iImNfIgogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9lbGVjdGlvbl9ub2RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGU6IEJ5dGVzNjQsCiAgICAvLyAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb246IEJ5dGVzNTEyLAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfZWxlY3Rpb25fbm9kZShlbGVjdGlvbl90aXRsZS5ieXRlcywgZWxlY3Rpb25fZGVzY3JpcHRpb24uYnl0ZXMpCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfZWxlY3Rpb25fbm9kZSgKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIEJ5dGVzMzIuZnJvbV9ieXRlcyhvcC5zaGEyNTYoZWxlY3Rpb25fdGl0bGUgKyBlbGVjdGlvbl9kZXNjcmlwdGlvbikpCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfZWxlY3Rpb24oCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlOiBCeXRlczMyLAogICAgLy8gKSAtPiBFbGVjdGlvblByb3Bvc2FsOgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfZWxlY3Rpb24oZWxlY3Rpb25fbm9kZSkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9lbGVjdGlvbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU6IEJ5dGVzMzIsCiAgICAvLyApIC0+IEVsZWN0aW9uUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuZWxlY3Rpb25zLmdldCgKICAgIC8vICAgICAgICAga2V5PWVsZWN0aW9uX25vZGUsCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9RWxlY3Rpb25Qcm9wb3NhbCgKICAgIC8vICAgICAgICAgICAgIGVsZWN0aW9uX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25fc3RhdHVzPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgcHJvcG9zZXI9YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25fdGl0bGU9Qnl0ZXM2NC5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA2NCkpLAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb249Qnl0ZXM1MTIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogNTEyKSksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcyhiIlx4MDAiICogMzIpKSwKICAgIC8vICAgICAgICAgICAgIGNyZWF0ZWRfYXRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25fZW5kX3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIGVuZG9yc2VtZW50X2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgZW5kb3JzZW1lbnRfdm90ZXM9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgICAgICAgICAgZW5kb3JzZW1lbnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHByb3Bvc2VfZWxlY3Rpb24oCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBlbGVjdGlvbl90aXRsZTogQnl0ZXM2NCwKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbjogQnl0ZXM1MTIsCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wOiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKAogICAgLy8gICAgICAgICBzZWxmLl9wcm9wb3NlX2VsZWN0aW9uKAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25fdGl0bGUuYnl0ZXMsCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbi5ieXRlcywKICAgIC8vICAgICAgICAgICAgIGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcC5uYXRpdmUsCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3Byb3Bvc2VfZWxlY3Rpb24oCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBlbGVjdGlvbl90aXRsZTogQnl0ZXMsCiAgICAvLyAgICAgZWxlY3Rpb25fZGVzY3JpcHRpb246IEJ5dGVzLAogICAgLy8gICAgIGVsZWN0aW9uX3N0YXJ0X3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXA6IFVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZSA9IHNlbGYuX2dldF9lbGVjdGlvbl9ub2RlKGVsZWN0aW9uX3RpdGxlLCBlbGVjdGlvbl9kZXNjcmlwdGlvbikKICAgIC8vICAgICBhc3NlcnQgZWxlY3Rpb25fbm9kZSBub3QgaW4gc2VsZi5lbGVjdGlvbnMsICJFbGVjdGlvbiBJRCBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICBlbGVjdGlvbiA9IHNlbGYuX2dldF9lbGVjdGlvbihlbGVjdGlvbl9ub2RlKQogICAgLy8gICAgIGVsZWN0aW9uX2luZGV4ID0gc2VsZi5lbGVjdGlvbl9jb3VudCArIDEKICAgIC8vICAgICBlbGVjdGlvbi5lbGVjdGlvbl9pbmRleCA9IGFyYzQuVUludDY0KGVsZWN0aW9uX2luZGV4KQogICAgLy8gICAgIGVsZWN0aW9uLmVsZWN0aW9uX3N0YXR1cyA9IGFyYzQuVUludDY0KAogICAgLy8gICAgICAgICBFTEVDVElPTl9TVEFUVVNfQUNUSVZFCiAgICAvLyAgICAgKQogICAgLy8gICAgIGVsZWN0aW9uLnByb3Bvc2VyID0gYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpCiAgICAvLyAgICAgZWxlY3Rpb24uZWxlY3Rpb25fdGl0bGUgPSBCeXRlczY0LmZyb21fYnl0ZXMoZWxlY3Rpb25fdGl0bGUpCiAgICAvLyAgICAgZWxlY3Rpb24uZWxlY3Rpb25fbm9kZSA9IGVsZWN0aW9uX25vZGUuY29weSgpCiAgICAvLyAgICAgZWxlY3Rpb24uZWxlY3Rpb25fZGVzY3JpcHRpb24gPSBCeXRlczUxMi5mcm9tX2J5dGVzKGVsZWN0aW9uX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGVsZWN0aW9uLmNyZWF0ZWRfYXRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoR2xvYmFsLmxhdGVzdF90aW1lc3RhbXApCiAgICAvLyAgICAgZWxlY3Rpb24uZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wID0gYXJjNC5VSW50NjQoZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wKQogICAgLy8gICAgIGVsZWN0aW9uLmVsZWN0aW9uX2VuZF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChlbGVjdGlvbl9lbmRfdGltZXN0YW1wKQogICAgLy8gICAgIHNlbGYuZWxlY3Rpb25zW2VsZWN0aW9uX25vZGVdID0gZWxlY3Rpb24uY29weSgpCiAgICAvLyAgICAgc2VsZi5lbGVjdGlvbl9jb3VudCA9IGVsZWN0aW9uX2luZGV4CiAgICAvLyAgICAgYXJjNC5lbWl0KEVsZWN0aW9uQ3JlYXRlZChlbGVjdGlvbl9ub2RlPWVsZWN0aW9uX25vZGUpKQogICAgLy8gICAgIHJldHVybiBlbGVjdGlvbl9ub2RlLmJ5dGVzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBlbmRvcnNlX2NhbmRpZGF0ZXMoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlOiBCeXRlczMyLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzE6IEJ5dGVzMzIsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMjogQnl0ZXMzMiwKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV8zOiBCeXRlczMyLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzQ6IEJ5dGVzMzIsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfNTogQnl0ZXMzMiwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBlbnN1cmVfYnVkZ2V0KDEwMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KQogICAgLy8gICAgIHZvdGVfcG93ZXIgPSBCaWdVSW50KDEpCiAgICAvLyAgICAgc2VsZi5fZW5kb3JzZV9jYW5kaWRhdGVzKAogICAgLy8gICAgICAgICBlbGVjdGlvbl9ub2RlLmJ5dGVzLAogICAgLy8gICAgICAgICBjYW5kaWRhdGVfbm9kZV8xLmJ5dGVzLAogICAgLy8gICAgICAgICBjYW5kaWRhdGVfbm9kZV8yLmJ5dGVzLAogICAgLy8gICAgICAgICBjYW5kaWRhdGVfbm9kZV8zLmJ5dGVzLAogICAgLy8gICAgICAgICBjYW5kaWRhdGVfbm9kZV80LmJ5dGVzLAogICAgLy8gICAgICAgICBjYW5kaWRhdGVfbm9kZV81LmJ5dGVzLAogICAgLy8gICAgICAgICB2b3RlX3Bvd2VyLAogICAgLy8gICAgICkKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2VuZG9yc2VfY2FuZGlkYXRlcygKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU6IEJ5dGVzLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzE6IEJ5dGVzLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzI6IEJ5dGVzLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzM6IEJ5dGVzLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzQ6IEJ5dGVzLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzU6IEJ5dGVzLAogICAgLy8gICAgIHZvdGVfcG93ZXI6IEJpZ1VJbnQsCiAgICAvLyApIC0+IE5vbmU6CiAgICAvLyAgICAgX2VsZWN0aW9uX25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMoZWxlY3Rpb25fbm9kZSkKICAgIC8vICAgICBhc3NlcnQgX2VsZWN0aW9uX25vZGUgaW4gc2VsZi5lbGVjdGlvbnMsICJFbGVjdGlvbiBkb2VzIG5vdCBleGlzdCIKICAgIGRpZyAxCiAgICBjb25jYXQKICAgIGJveF9sZW4KICAgIGNvdmVyIDEKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDc2CiAgICAvLyBhc3NlcnQgX2VsZWN0aW9uX25vZGUgaW4gc2VsZi5lbGVjdGlvbnMsICJFbGVjdGlvbiBkb2VzIG5vdCBleGlzdCIKICAgIGFzc2VydCAvLyBFbGVjdGlvbiBkb2VzIG5vdCBleGlzdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDc3CiAgICAvLyBlbGVjdGlvbiA9IHNlbGYuX2dldF9lbGVjdGlvbihfZWxlY3Rpb25fbm9kZSkKICAgIGNhbGxzdWIgX2dldF9lbGVjdGlvbgogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0NzkKICAgIC8vIG9wLnNoYTI1NihlbGVjdGlvbl9ub2RlICsgVHhuLnNlbmRlci5ieXRlcykKICAgIHR4biBTZW5kZXIKICAgIGZyYW1lX2RpZyAtNwogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIHNoYTI1NgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDc4LTQ4MAogICAgLy8gZW5kb3JzZW1lbnRfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcygKICAgIC8vICAgICBvcC5zaGEyNTYoZWxlY3Rpb25fbm9kZSArIFR4bi5zZW5kZXIuYnl0ZXMpCiAgICAvLyApCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM1MwogICAgLy8gQnl0ZXMzMiwgYm9vbCwga2V5X3ByZWZpeD1iImRfIgogICAgYnl0ZSAweDY0NWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM1My00ODEKICAgIC8vICAgICAgICAgQnl0ZXMzMiwgYm9vbCwga2V5X3ByZWZpeD1iImRfIgogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLmNhbmRpZGF0ZXMgPSBCb3hNYXAoCiAgICAvLyAgICAgICAgIEJ5dGVzMzIsIEVuZG9yc2VtZW50LCBrZXlfcHJlZml4PWIiY18iCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2VsZWN0aW9uX25vZGUoCiAgICAvLyAgICAgc2VsZiwKICAgIC8vICAgICBlbGVjdGlvbl90aXRsZTogQnl0ZXM2NCwKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbjogQnl0ZXM1MTIsCiAgICAvLyApIC0+IEJ5dGVzMzI6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9lbGVjdGlvbl9ub2RlKGVsZWN0aW9uX3RpdGxlLmJ5dGVzLCBlbGVjdGlvbl9kZXNjcmlwdGlvbi5ieXRlcykKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9lbGVjdGlvbl9ub2RlKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZWxlY3Rpb25fdGl0bGU6IEJ5dGVzLAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uOiBCeXRlcywKICAgIC8vICkgLT4gQnl0ZXMzMjoKICAgIC8vICAgICByZXR1cm4gQnl0ZXMzMi5mcm9tX2J5dGVzKG9wLnNoYTI1NihlbGVjdGlvbl90aXRsZSArIGVsZWN0aW9uX2Rlc2NyaXB0aW9uKSkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9lbGVjdGlvbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU6IEJ5dGVzMzIsCiAgICAvLyApIC0+IEVsZWN0aW9uUHJvcG9zYWw6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9lbGVjdGlvbihlbGVjdGlvbl9ub2RlKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2VsZWN0aW9uKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZTogQnl0ZXMzMiwKICAgIC8vICkgLT4gRWxlY3Rpb25Qcm9wb3NhbDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5lbGVjdGlvbnMuZ2V0KAogICAgLy8gICAgICAgICBrZXk9ZWxlY3Rpb25fbm9kZSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1FbGVjdGlvblByb3Bvc2FsKAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25faW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9zdGF0dXM9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwcm9wb3Nlcj1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl90aXRsZT1CeXRlczY0LmZyb21fYnl0ZXMoQnl0ZXMoYiJceDAwIiAqIDY0KSksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbj1CeXRlczUxMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiA1MTIpKSwKICAgIC8vICAgICAgICAgICAgIGVsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKGIiXHgwMCIgKiAzMikpLAogICAgLy8gICAgICAgICAgICAgY3JlYXRlZF9hdF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl9lbmRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgZW5kb3JzZW1lbnRfY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgICAgICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgcHJvcG9zZV9lbGVjdGlvbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlOiBCeXRlczY0LAogICAgLy8gICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uOiBCeXRlczUxMiwKICAgIC8vICAgICBlbGVjdGlvbl9zdGFydF90aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXA6IGFyYzQuVUludDY0LAogICAgLy8gKSAtPiBCeXRlczMyOgogICAgLy8gICAgIHJldHVybiBCeXRlczMyLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIHNlbGYuX3Byb3Bvc2VfZWxlY3Rpb24oCiAgICAvLyAgICAgICAgICAgICBlbGVjdGlvbl90aXRsZS5ieXRlcywKICAgIC8vICAgICAgICAgICAgIGVsZWN0aW9uX2Rlc2NyaXB0aW9uLmJ5dGVzLAogICAgLy8gICAgICAgICAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wLm5hdGl2ZSwKICAgIC8vICAgICAgICAgICAgIGVsZWN0aW9uX2VuZF90aW1lc3RhbXAubmF0aXZlLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfcHJvcG9zZV9lbGVjdGlvbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX3RpdGxlOiBCeXRlcywKICAgIC8vICAgICBlbGVjdGlvbl9kZXNjcmlwdGlvbjogQnl0ZXMsCiAgICAvLyAgICAgZWxlY3Rpb25fc3RhcnRfdGltZXN0YW1wOiBVSW50NjQsCiAgICAvLyAgICAgZWxlY3Rpb25fZW5kX3RpbWVzdGFtcDogVUludDY0LAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlID0gc2VsZi5fZ2V0X2VsZWN0aW9uX25vZGUoZWxlY3Rpb25fdGl0bGUsIGVsZWN0aW9uX2Rlc2NyaXB0aW9uKQogICAgLy8gICAgIGFzc2VydCBlbGVjdGlvbl9ub2RlIG5vdCBpbiBzZWxmLmVsZWN0aW9ucywgIkVsZWN0aW9uIElEIGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgIGVsZWN0aW9uID0gc2VsZi5fZ2V0X2VsZWN0aW9uKGVsZWN0aW9uX25vZGUpCiAgICAvLyAgICAgZWxlY3Rpb25faW5kZXggPSBzZWxmLmVsZWN0aW9uX2NvdW50ICsgMQogICAgLy8gICAgIGVsZWN0aW9uLmVsZWN0aW9uX2luZGV4ID0gYXJjNC5VSW50NjQoZWxlY3Rpb25faW5kZXgpCiAgICAvLyAgICAgZWxlY3Rpb24uZWxlY3Rpb25fc3RhdHVzID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgICAgIEVMRUNUSU9OX1NUQVRVU19BQ1RJVkUKICAgIC8vICAgICApCiAgICAvLyAgICAgZWxlY3Rpb24ucHJvcG9zZXIgPSBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcikKICAgIC8vICAgICBlbGVjdGlvbi5lbGVjdGlvbl90aXRsZSA9IEJ5dGVzNjQuZnJvbV9ieXRlcyhlbGVjdGlvbl90aXRsZSkKICAgIC8vICAgICBlbGVjdGlvbi5lbGVjdGlvbl9ub2RlID0gZWxlY3Rpb25fbm9kZS5jb3B5KCkKICAgIC8vICAgICBlbGVjdGlvbi5lbGVjdGlvbl9kZXNjcmlwdGlvbiA9IEJ5dGVzNTEyLmZyb21fYnl0ZXMoZWxlY3Rpb25fZGVzY3JpcHRpb24pCiAgICAvLyAgICAgZWxlY3Rpb24uY3JlYXRlZF9hdF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChHbG9iYWwubGF0ZXN0X3RpbWVzdGFtcCkKICAgIC8vICAgICBlbGVjdGlvbi5lbGVjdGlvbl9zdGFydF90aW1lc3RhbXAgPSBhcmM0LlVJbnQ2NChlbGVjdGlvbl9zdGFydF90aW1lc3RhbXApCiAgICAvLyAgICAgZWxlY3Rpb24uZWxlY3Rpb25fZW5kX3RpbWVzdGFtcCA9IGFyYzQuVUludDY0KGVsZWN0aW9uX2VuZF90aW1lc3RhbXApCiAgICAvLyAgICAgc2VsZi5lbGVjdGlvbnNbZWxlY3Rpb25fbm9kZV0gPSBlbGVjdGlvbi5jb3B5KCkKICAgIC8vICAgICBzZWxmLmVsZWN0aW9uX2NvdW50ID0gZWxlY3Rpb25faW5kZXgKICAgIC8vICAgICBhcmM0LmVtaXQoRWxlY3Rpb25DcmVhdGVkKGVsZWN0aW9uX25vZGU9ZWxlY3Rpb25fbm9kZSkpCiAgICAvLyAgICAgcmV0dXJuIGVsZWN0aW9uX25vZGUuYnl0ZXMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGVuZG9yc2VfY2FuZGlkYXRlcygKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGVsZWN0aW9uX25vZGU6IEJ5dGVzMzIsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMTogQnl0ZXMzMiwKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV8yOiBCeXRlczMyLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzM6IEJ5dGVzMzIsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfNDogQnl0ZXMzMiwKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV81OiBCeXRlczMyLAogICAgLy8gKSAtPiBOb25lOgogICAgLy8gICAgIGVuc3VyZV9idWRnZXQoMTAwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpCiAgICAvLyAgICAgdm90ZV9wb3dlciA9IEJpZ1VJbnQoMSkKICAgIC8vICAgICBzZWxmLl9lbmRvcnNlX2NhbmRpZGF0ZXMoCiAgICAvLyAgICAgICAgIGVsZWN0aW9uX25vZGUuYnl0ZXMsCiAgICAvLyAgICAgICAgIGNhbmRpZGF0ZV9ub2RlXzEuYnl0ZXMsCiAgICAvLyAgICAgICAgIGNhbmRpZGF0ZV9ub2RlXzIuYnl0ZXMsCiAgICAvLyAgICAgICAgIGNhbmRpZGF0ZV9ub2RlXzMuYnl0ZXMsCiAgICAvLyAgICAgICAgIGNhbmRpZGF0ZV9ub2RlXzQuYnl0ZXMsCiAgICAvLyAgICAgICAgIGNhbmRpZGF0ZV9ub2RlXzUuYnl0ZXMsCiAgICAvLyAgICAgICAgIHZvdGVfcG93ZXIsCiAgICAvLyAgICAgKQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZW5kb3JzZV9jYW5kaWRhdGVzKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZTogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMTogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMjogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfMzogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfNDogQnl0ZXMsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfNTogQnl0ZXMsCiAgICAvLyAgICAgdm90ZV9wb3dlcjogQmlnVUludCwKICAgIC8vICkgLT4gTm9uZToKICAgIC8vICAgICBfZWxlY3Rpb25fbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhlbGVjdGlvbl9ub2RlKQogICAgLy8gICAgIGFzc2VydCBfZWxlY3Rpb25fbm9kZSBpbiBzZWxmLmVsZWN0aW9ucywgIkVsZWN0aW9uIGRvZXMgbm90IGV4aXN0IgogICAgLy8gICAgIGVsZWN0aW9uID0gc2VsZi5fZ2V0X2VsZWN0aW9uKF9lbGVjdGlvbl9ub2RlKQogICAgLy8gICAgIGVuZG9yc2VtZW50X25vZGUgPSBCeXRlczMyLmZyb21fYnl0ZXMoCiAgICAvLyAgICAgICAgIG9wLnNoYTI1NihlbGVjdGlvbl9ub2RlICsgVHhuLnNlbmRlci5ieXRlcykKICAgIC8vICAgICApCiAgICAvLyAgICAgYXNzZXJ0IGVuZG9yc2VtZW50X25vZGUgbm90IGluIHNlbGYuZW5kb3JzZW1lbnRzLCAiRW5kb3JzZW1lbnQgYWxyZWFkeSBleGlzdHMiCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgYm94X2xlbgogICAgY292ZXIgMQogICAgcG9wCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0ODEKICAgIC8vIGFzc2VydCBlbmRvcnNlbWVudF9ub2RlIG5vdCBpbiBzZWxmLmVuZG9yc2VtZW50cywgIkVuZG9yc2VtZW50IGFscmVhZHkgZXhpc3RzIgogICAgYXNzZXJ0IC8vIEVuZG9yc2VtZW50IGFscmVhZHkgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0ODMKICAgIC8vIGVsZWN0aW9uLmVsZWN0aW9uX3N0YXR1cyA9PSBFTEVDVElPTl9TVEFUVVNfQUNUSVZFCiAgICBpbnQgOAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDEKICAgIGI9PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDgyLTQ4NAogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBlbGVjdGlvbi5lbGVjdGlvbl9zdGF0dXMgPT0gRUxFQ1RJT05fU1RBVFVTX0FDVElWRQogICAgLy8gKSwgIkVsZWN0aW9uIGlzIG5vdCBwZW5kaW5nIgogICAgYXNzZXJ0IC8vIEVsZWN0aW9uIGlzIG5vdCBwZW5kaW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0ODYKICAgIC8vIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfMgogICAgZnJhbWVfZGlnIC02CiAgICBmcmFtZV9kaWcgLTUKICAgICE9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0ODYtNDk1CiAgICAvLyBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzIKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzMKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzMKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8zICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8zICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV80ICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIGJ6IF9lbmRvcnNlX2NhbmRpZGF0ZXNfYm9vbF9mYWxzZUAxMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDg3CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICBmcmFtZV9kaWcgLTYKICAgIGZyYW1lX2RpZyAtNAogICAgIT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ4Ni00OTUKICAgIC8vIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfMgogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfMwogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfMwogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzMgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzMgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzQgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgYnogX2VuZG9yc2VfY2FuZGlkYXRlc19ib29sX2ZhbHNlQDExCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0ODgKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIGZyYW1lX2RpZyAtNgogICAgZnJhbWVfZGlnIC0zCiAgICAhPQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDg2LTQ5NQogICAgLy8gY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV8yCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMyAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMyAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfNCAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICBieiBfZW5kb3JzZV9jYW5kaWRhdGVzX2Jvb2xfZmFsc2VAMTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ4OQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgZnJhbWVfZGlnIC02CiAgICBmcmFtZV9kaWcgLTIKICAgICE9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0ODYtNDk1CiAgICAvLyBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzIKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzMKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzMKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8zICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8zICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV80ICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIGJ6IF9lbmRvcnNlX2NhbmRpZGF0ZXNfYm9vbF9mYWxzZUAxMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDkwCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICBmcmFtZV9kaWcgLTUKICAgIGZyYW1lX2RpZyAtNAogICAgIT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ4Ni00OTUKICAgIC8vIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfMgogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfMwogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfMwogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzMgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzMgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzQgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgYnogX2VuZG9yc2VfY2FuZGlkYXRlc19ib29sX2ZhbHNlQDExCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0OTEKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIGZyYW1lX2RpZyAtNQogICAgZnJhbWVfZGlnIC0zCiAgICAhPQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDg2LTQ5NQogICAgLy8gY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV8yCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMyAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMyAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfNCAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICBieiBfZW5kb3JzZV9jYW5kaWRhdGVzX2Jvb2xfZmFsc2VAMTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ5MgogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgZnJhbWVfZGlnIC01CiAgICBmcmFtZV9kaWcgLTIKICAgICE9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0ODYtNDk1CiAgICAvLyBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzIKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzMKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzMKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8zICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8zICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV80ICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIGJ6IF9lbmRvcnNlX2NhbmRpZGF0ZXNfYm9vbF9mYWxzZUAxMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDkzCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMyAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICBmcmFtZV9kaWcgLTQKICAgIGZyYW1lX2RpZyAtMwogICAgIT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ4Ni00OTUKICAgIC8vIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfMgogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfMwogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfMwogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzMgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzMgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzQgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgYnogX2VuZG9yc2VfY2FuZGlkYXRlc19ib29sX2ZhbHNlQDExCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0OTQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8zICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0yCiAgICAhPQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDg2LTQ5NQogICAgLy8gY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV8yCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMyAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfMyAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICAvLyBhbmQgY2FuZGlkYXRlX25vZGVfNCAhPSBjYW5kaWRhdGVfbm9kZV81CiAgICBieiBfZW5kb3JzZV9jYW5kaWRhdGVzX2Jvb2xfZmFsc2VAMTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ5NQogICAgLy8gYW5kIGNhbmRpZGF0ZV9ub2RlXzQgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgLTIKICAgICE9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo0ODYtNDk1CiAgICAvLyBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzIKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzMKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzMKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8zICE9IGNhbmRpZGF0ZV9ub2RlXzQKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV8zICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vIGFuZCBjYW5kaWRhdGVfbm9kZV80ICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIGJ6IF9lbmRvcnNlX2NhbmRpZGF0ZXNfYm9vbF9mYWxzZUAxMQogICAgaW50IDEKICAgIGIgX2VuZG9yc2VfY2FuZGlkYXRlc19ib29sX21lcmdlQDEyCgpfZW5kb3JzZV9jYW5kaWRhdGVzX2Jvb2xfZmFsc2VAMTE6CiAgICBpbnQgMAoKX2VuZG9yc2VfY2FuZGlkYXRlc19ib29sX21lcmdlQDEyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NDg1LTQ5NgogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzIKICAgIC8vICAgICBhbmQgY2FuZGlkYXRlX25vZGVfMSAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICAvLyAgICAgYW5kIGNhbmRpZGF0ZV9ub2RlXzEgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gICAgIGFuZCBjYW5kaWRhdGVfbm9kZV8xICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vICAgICBhbmQgY2FuZGlkYXRlX25vZGVfMiAhPSBjYW5kaWRhdGVfbm9kZV8zCiAgICAvLyAgICAgYW5kIGNhbmRpZGF0ZV9ub2RlXzIgIT0gY2FuZGlkYXRlX25vZGVfNAogICAgLy8gICAgIGFuZCBjYW5kaWRhdGVfbm9kZV8yICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vICAgICBhbmQgY2FuZGlkYXRlX25vZGVfMyAhPSBjYW5kaWRhdGVfbm9kZV80CiAgICAvLyAgICAgYW5kIGNhbmRpZGF0ZV9ub2RlXzMgIT0gY2FuZGlkYXRlX25vZGVfNQogICAgLy8gICAgIGFuZCBjYW5kaWRhdGVfbm9kZV80ICE9IGNhbmRpZGF0ZV9ub2RlXzUKICAgIC8vICksICJDYW5kaWRhdGVzIGFyZSBub3QgdW5pcXVlIgogICAgYXNzZXJ0IC8vIENhbmRpZGF0ZXMgYXJlIG5vdCB1bmlxdWUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjQ5Ny01MDEKICAgIC8vIHNlbGYuX2luY3JlbWVudF9jYW5kaWRhdGVfZW5kb3JzZW1lbnQoCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZSwKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV8xLAogICAgLy8gICAgIHZvdGVfcG93ZXIsCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTcKICAgIGZyYW1lX2RpZyAtNgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfY2FuZGlkYXRlX2VuZG9yc2VtZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1MDItNTA0CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfY2FuZGlkYXRlX2VuZG9yc2VtZW50KAogICAgLy8gICAgIGVsZWN0aW9uX25vZGUsIGNhbmRpZGF0ZV9ub2RlXzIsIHZvdGVfcG93ZXIKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNwogICAgZnJhbWVfZGlnIC01CiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2luY3JlbWVudF9jYW5kaWRhdGVfZW5kb3JzZW1lbnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjUwNS01MDkKICAgIC8vIHNlbGYuX2luY3JlbWVudF9jYW5kaWRhdGVfZW5kb3JzZW1lbnQoCiAgICAvLyAgICAgZWxlY3Rpb25fbm9kZSwKICAgIC8vICAgICBjYW5kaWRhdGVfbm9kZV8zLAogICAgLy8gICAgIHZvdGVfcG93ZXIsCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTcKICAgIGZyYW1lX2RpZyAtNAogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfY2FuZGlkYXRlX2VuZG9yc2VtZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1MTAtNTE0CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfY2FuZGlkYXRlX2VuZG9yc2VtZW50KAogICAgLy8gICAgIGVsZWN0aW9uX25vZGUsCiAgICAvLyAgICAgY2FuZGlkYXRlX25vZGVfNCwKICAgIC8vICAgICB2b3RlX3Bvd2VyLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC03CiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfaW5jcmVtZW50X2NhbmRpZGF0ZV9lbmRvcnNlbWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTE1LTUxOQogICAgLy8gc2VsZi5faW5jcmVtZW50X2NhbmRpZGF0ZV9lbmRvcnNlbWVudCgKICAgIC8vICAgICBlbGVjdGlvbl9ub2RlLAogICAgLy8gICAgIGNhbmRpZGF0ZV9ub2RlXzUsCiAgICAvLyAgICAgdm90ZV9wb3dlciwKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtNwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2luY3JlbWVudF9jYW5kaWRhdGVfZW5kb3JzZW1lbnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjUyMAogICAgLy8gc2VsZi5faW5jcmVtZW50X2VsZWN0aW9uX2VuZG9yc2VtZW50KGVsZWN0aW9uX25vZGUsIHZvdGVfcG93ZXIpCiAgICBmcmFtZV9kaWcgLTcKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfaW5jcmVtZW50X2VsZWN0aW9uX2VuZG9yc2VtZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNTMKICAgIC8vIEJ5dGVzMzIsIGJvb2wsIGtleV9wcmVmaXg9YiJkXyIKICAgIGJ5dGUgMHg2NDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1MjEKICAgIC8vIHNlbGYuZW5kb3JzZW1lbnRzW2VuZG9yc2VtZW50X25vZGVdID0gVHJ1ZQogICAgZnJhbWVfZGlnIDAKICAgIGNvbmNhdAogICAgaW50IDEKICAgIGl0b2IKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIF9fbWFpbl9fLkVsZWN0aW9uLl9pbmNyZW1lbnRfY2FuZGlkYXRlX2VuZG9yc2VtZW50KGVsZWN0aW9uX25vZGU6IGJ5dGVzLCBjYW5kaWRhdGVfbm9kZTogYnl0ZXMsIHZvdGVfcG93ZXI6IGJ5dGVzKSAtPiB2b2lkOgpfaW5jcmVtZW50X2NhbmRpZGF0ZV9lbmRvcnNlbWVudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjUzNS01MzgKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9jYW5kaWRhdGVfZW5kb3JzZW1lbnQoCiAgICAvLyAgICAgc2VsZiwgZWxlY3Rpb25fbm9kZTogQnl0ZXMsIGNhbmRpZGF0ZV9ub2RlOiBCeXRlcywgdm90ZV9wb3dlcjogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMyAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1MzkKICAgIC8vIGVuZG9yc2VtZW50X25vZGUgPSBvcC5zaGEyNTYoZWxlY3Rpb25fbm9kZSArIGNhbmRpZGF0ZV9ub2RlKQogICAgZnJhbWVfZGlnIC0zCiAgICBmcmFtZV9kaWcgLTIKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NDAKICAgIC8vIGVuZG9yc2VtZW50ID0gc2VsZi5fZ2V0X2NhbmRpZGF0ZV9lbmRvcnNlbWVudChlbmRvcnNlbWVudF9ub2RlKQogICAgZHVwCiAgICBjYWxsc3ViIF9nZXRfY2FuZGlkYXRlX2VuZG9yc2VtZW50CiAgICBjb3ZlciAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NDIKICAgIC8vIGVuZG9yc2VtZW50LmVuZG9yc2VtZW50X25vZGUgPSBfZW5kb3JzZW1lbnRfbm9kZS5jb3B5KCkKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBpbnQgMAogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTQzCiAgICAvLyBlbmRvcnNlbWVudC5lbmRvcnNlbWVudF9lbGVjdGlvbl9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKGVsZWN0aW9uX25vZGUpCiAgICBmcmFtZV9kaWcgLTMKICAgIGNvdmVyIDEKICAgIGludCAzMgogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTQ0CiAgICAvLyBlbmRvcnNlbWVudC5lbmRvcnNlbWVudF9jYW5kaWRhdGVfbm9kZSA9IEJ5dGVzMzIuZnJvbV9ieXRlcyhjYW5kaWRhdGVfbm9kZSkKICAgIGZyYW1lX2RpZyAtMgogICAgY292ZXIgMQogICAgaW50IDY0CiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NDYKICAgIC8vIGVuZG9yc2VtZW50LmVuZG9yc2VtZW50X2NvdW50Lm5hdGl2ZSArIFVJbnQ2NCgxKQogICAgZHVwCiAgICBpbnQgOTYKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAxCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NDUtNTQ3CiAgICAvLyBlbmRvcnNlbWVudC5lbmRvcnNlbWVudF9jb3VudCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGVuZG9yc2VtZW50LmVuZG9yc2VtZW50X2NvdW50Lm5hdGl2ZSArIFVJbnQ2NCgxKQogICAgLy8gKQogICAgaXRvYgogICAgdW5jb3ZlciAxCiAgICBpbnQgOTYKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU0OQogICAgLy8gZW5kb3JzZW1lbnQuZW5kb3JzZW1lbnRfdm90ZXMubmF0aXZlICsgdm90ZV9wb3dlcgogICAgZHVwCiAgICBpbnQgMTA0CiAgICBpbnQgMzIKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZnJhbWVfZGlnIC0xCiAgICBiKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTQ4LTU1MAogICAgLy8gZW5kb3JzZW1lbnQuZW5kb3JzZW1lbnRfdm90ZXMgPSBhcmM0LlVJbnQyNTYoCiAgICAvLyAgICAgZW5kb3JzZW1lbnQuZW5kb3JzZW1lbnRfdm90ZXMubmF0aXZlICsgdm90ZV9wb3dlcgogICAgLy8gKQogICAgZHVwCiAgICBsZW4KICAgIGludCAzMgogICAgPD0KICAgIGFzc2VydCAvLyBvdmVyZmxvdwogICAgaW50IDMyCiAgICBiemVybwogICAgYnwKICAgIHVuY292ZXIgMQogICAgaW50IDEwNAogICAgdW5jb3ZlciAyCiAgICByZXBsYWNlMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MzU2CiAgICAvLyBCeXRlczMyLCBFbmRvcnNlbWVudCwga2V5X3ByZWZpeD1iImNfIgogICAgYnl0ZSAweDYzNWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU1MQogICAgLy8gc2VsZi5jYW5kaWRhdGVzW19lbmRvcnNlbWVudF9ub2RlXSA9IGVuZG9yc2VtZW50LmNvcHkoKQogICAgdW5jb3ZlciAyCiAgICBjb25jYXQKICAgIHVuY292ZXIgMQogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uRWxlY3Rpb24uX2dldF9jYW5kaWRhdGVfZW5kb3JzZW1lbnQoZW5kb3JzZW1lbnRfbm9kZTogYnl0ZXMpIC0+IGJ5dGVzOgpfZ2V0X2NhbmRpZGF0ZV9lbmRvcnNlbWVudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU1OS01NjAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9jYW5kaWRhdGVfZW5kb3JzZW1lbnQoc2VsZiwgZW5kb3JzZW1lbnRfbm9kZTogQnl0ZXMpIC0+IEVuZG9yc2VtZW50OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NjEKICAgIC8vIF9lbmRvcnNlbWVudF9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKGVuZG9yc2VtZW50X25vZGUpCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU2NQogICAgLy8gZW5kb3JzZW1lbnRfbm9kZT1fZW5kb3JzZW1lbnRfbm9kZS5jb3B5KCksCiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU2NC01NzEKICAgIC8vIGRlZmF1bHQ9RW5kb3JzZW1lbnQoCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfbm9kZT1fZW5kb3JzZW1lbnRfbm9kZS5jb3B5KCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfZWxlY3Rpb25fbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoKGIiXHgwMCIgKiAzMikpKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jYW5kaWRhdGVfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoKGIiXHgwMCIgKiAzMikpKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGJ5dGUgMHgKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NjYKICAgIC8vIGVuZG9yc2VtZW50X2VsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKChiIlx4MDAiICogMzIpKSksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTY0LTU3MQogICAgLy8gZGVmYXVsdD1FbmRvcnNlbWVudCgKICAgIC8vICAgICBlbmRvcnNlbWVudF9ub2RlPV9lbmRvcnNlbWVudF9ub2RlLmNvcHkoKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9lbGVjdGlvbl9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcygoYiJceDAwIiAqIDMyKSkpLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2NhbmRpZGF0ZV9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcygoYiJceDAwIiAqIDMyKSkpLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3ZvdGVzPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NjcKICAgIC8vIGVuZG9yc2VtZW50X2NhbmRpZGF0ZV9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcygoYiJceDAwIiAqIDMyKSkpLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU2NC01NzEKICAgIC8vIGRlZmF1bHQ9RW5kb3JzZW1lbnQoCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfbm9kZT1fZW5kb3JzZW1lbnRfbm9kZS5jb3B5KCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfZWxlY3Rpb25fbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoKGIiXHgwMCIgKiAzMikpKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jYW5kaWRhdGVfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoKGIiXHgwMCIgKiAzMikpKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTY4CiAgICAvLyBlbmRvcnNlbWVudF9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NjQtNTcxCiAgICAvLyBkZWZhdWx0PUVuZG9yc2VtZW50KAogICAgLy8gICAgIGVuZG9yc2VtZW50X25vZGU9X2VuZG9yc2VtZW50X25vZGUuY29weSgpLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2VsZWN0aW9uX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKChiIlx4MDAiICogMzIpKSksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfY2FuZGlkYXRlX25vZGU9Qnl0ZXMzMi5mcm9tX2J5dGVzKEJ5dGVzKChiIlx4MDAiICogMzIpKSksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdm90ZXM9YXJjNC5VSW50MjU2KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3RpbWVzdGFtcD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU2OQogICAgLy8gZW5kb3JzZW1lbnRfdm90ZXM9YXJjNC5VSW50MjU2KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU2NC01NzEKICAgIC8vIGRlZmF1bHQ9RW5kb3JzZW1lbnQoCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfbm9kZT1fZW5kb3JzZW1lbnRfbm9kZS5jb3B5KCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfZWxlY3Rpb25fbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoKGIiXHgwMCIgKiAzMikpKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jYW5kaWRhdGVfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoKGIiXHgwMCIgKiAzMikpKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9jb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF92b3Rlcz1hcmM0LlVJbnQyNTYoMCksCiAgICAvLyAgICAgZW5kb3JzZW1lbnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gKSwKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTcwCiAgICAvLyBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTY0LTU3MQogICAgLy8gZGVmYXVsdD1FbmRvcnNlbWVudCgKICAgIC8vICAgICBlbmRvcnNlbWVudF9ub2RlPV9lbmRvcnNlbWVudF9ub2RlLmNvcHkoKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF9lbGVjdGlvbl9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcygoYiJceDAwIiAqIDMyKSkpLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2NhbmRpZGF0ZV9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcygoYiJceDAwIiAqIDMyKSkpLAogICAgLy8gICAgIGVuZG9yc2VtZW50X2NvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGVuZG9yc2VtZW50X3ZvdGVzPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICBlbmRvcnNlbWVudF90aW1lc3RhbXA9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNTYKICAgIC8vIEJ5dGVzMzIsIEVuZG9yc2VtZW50LCBrZXlfcHJlZml4PWIiY18iCiAgICBieXRlIDB4NjM1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTYyLTU3MgogICAgLy8gcmV0dXJuIHNlbGYuY2FuZGlkYXRlcy5nZXQoCiAgICAvLyAgICAga2V5PV9lbmRvcnNlbWVudF9ub2RlLAogICAgLy8gICAgIGRlZmF1bHQ9RW5kb3JzZW1lbnQoCiAgICAvLyAgICAgICAgIGVuZG9yc2VtZW50X25vZGU9X2VuZG9yc2VtZW50X25vZGUuY29weSgpLAogICAgLy8gICAgICAgICBlbmRvcnNlbWVudF9lbGVjdGlvbl9ub2RlPUJ5dGVzMzIuZnJvbV9ieXRlcyhCeXRlcygoYiJceDAwIiAqIDMyKSkpLAogICAgLy8gICAgICAgICBlbmRvcnNlbWVudF9jYW5kaWRhdGVfbm9kZT1CeXRlczMyLmZyb21fYnl0ZXMoQnl0ZXMoKGIiXHgwMCIgKiAzMikpKSwKICAgIC8vICAgICAgICAgZW5kb3JzZW1lbnRfY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGVuZG9yc2VtZW50X3ZvdGVzPWFyYzQuVUludDI1NigwKSwKICAgIC8vICAgICAgICAgZW5kb3JzZW1lbnRfdGltZXN0YW1wPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICksCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIGNvbmNhdAogICAgYm94X2dldAogICAgY292ZXIgMQogICAgdW5jb3ZlciAyCiAgICB1bmNvdmVyIDEKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5FbGVjdGlvbi5faW5jcmVtZW50X2VsZWN0aW9uX2VuZG9yc2VtZW50KGVsZWN0aW9uX25vZGU6IGJ5dGVzLCB2b3RlX3Bvd2VyOiBieXRlcykgLT4gdm9pZDoKX2luY3JlbWVudF9lbGVjdGlvbl9lbmRvcnNlbWVudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjUyMi01MjUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luY3JlbWVudF9lbGVjdGlvbl9lbmRvcnNlbWVudCgKICAgIC8vICAgICBzZWxmLCBlbGVjdGlvbl9ub2RlOiBCeXRlcywgdm90ZV9wb3dlcjogQmlnVUludAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1MjYKICAgIC8vIF9lbGVjdGlvbl9ub2RlID0gQnl0ZXMzMi5mcm9tX2J5dGVzKGVsZWN0aW9uX25vZGUpCiAgICBmcmFtZV9kaWcgLTIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjUyNwogICAgLy8gZWxlY3Rpb24gPSBzZWxmLl9nZXRfZWxlY3Rpb24oX2VsZWN0aW9uX25vZGUpCiAgICBjYWxsc3ViIF9nZXRfZWxlY3Rpb24KICAgIGNvdmVyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjUyOQogICAgLy8gZWxlY3Rpb24uZW5kb3JzZW1lbnRfY291bnQubmF0aXZlICsgVUludDY0KDEpCiAgICBkdXAKICAgIGludCA2ODAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGludCAxCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1MjgtNTMwCiAgICAvLyBlbGVjdGlvbi5lbmRvcnNlbWVudF9jb3VudCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGVsZWN0aW9uLmVuZG9yc2VtZW50X2NvdW50Lm5hdGl2ZSArIFVJbnQ2NCgxKQogICAgLy8gKQogICAgaXRvYgogICAgdW5jb3ZlciAxCiAgICBpbnQgNjgwCiAgICB1bmNvdmVyIDIKICAgIHJlcGxhY2UzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1MzIKICAgIC8vIGVsZWN0aW9uLmVuZG9yc2VtZW50X3ZvdGVzLm5hdGl2ZSArIHZvdGVfcG93ZXIKICAgIGR1cAogICAgaW50IDY4OAogICAgaW50IDMyCiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGZyYW1lX2RpZyAtMQogICAgYisKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjUzMS01MzMKICAgIC8vIGVsZWN0aW9uLmVuZG9yc2VtZW50X3ZvdGVzID0gYXJjNC5VSW50MjU2KAogICAgLy8gICAgIGVsZWN0aW9uLmVuZG9yc2VtZW50X3ZvdGVzLm5hdGl2ZSArIHZvdGVfcG93ZXIKICAgIC8vICkKICAgIGR1cAogICAgbGVuCiAgICBpbnQgMzIKICAgIDw9CiAgICBhc3NlcnQgLy8gb3ZlcmZsb3cKICAgIGludCAzMgogICAgYnplcm8KICAgIGJ8CiAgICB1bmNvdmVyIDEKICAgIGludCA2ODgKICAgIHVuY292ZXIgMgogICAgcmVwbGFjZTMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM1MAogICAgLy8gQnl0ZXMzMiwgRWxlY3Rpb25Qcm9wb3NhbCwga2V5X3ByZWZpeD1iImVfIgogICAgYnl0ZSAweDY1NWYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjUzNAogICAgLy8gc2VsZi5lbGVjdGlvbnNbX2VsZWN0aW9uX25vZGVdID0gZWxlY3Rpb24uY29weSgpCiAgICB1bmNvdmVyIDIKICAgIGNvbmNhdAogICAgdW5jb3ZlciAxCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBfX21haW5fXy5FbGVjdGlvbi5nZXRfY2FuZGlkYXRlX2VuZG9yc2VtZW50KGVsZWN0aW9uX25vZGU6IGJ5dGVzLCBjYW5kaWRhdGVfbm9kZTogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfY2FuZGlkYXRlX2VuZG9yc2VtZW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTUyLTU1NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2NhbmRpZGF0ZV9lbmRvcnNlbWVudCgKICAgIC8vICAgICBzZWxmLCBlbGVjdGlvbl9ub2RlOiBCeXRlczMyLCBjYW5kaWRhdGVfbm9kZTogQnl0ZXMzMgogICAgLy8gKSAtPiBFbmRvcnNlbWVudDoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTU3CiAgICAvLyBvcC5zaGEyNTYoZWxlY3Rpb25fbm9kZS5ieXRlcyArIGNhbmRpZGF0ZV9ub2RlLmJ5dGVzKQogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NTYtNTU4CiAgICAvLyByZXR1cm4gc2VsZi5fZ2V0X2NhbmRpZGF0ZV9lbmRvcnNlbWVudCgKICAgIC8vICAgICBvcC5zaGEyNTYoZWxlY3Rpb25fbm9kZS5ieXRlcyArIGNhbmRpZGF0ZV9ub2RlLmJ5dGVzKQogICAgLy8gKQogICAgY2FsbHN1YiBfZ2V0X2NhbmRpZGF0ZV9lbmRvcnNlbWVudAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uRWxlY3Rpb24uZ2V0X2VuZG9yc2VtZW50KGVsZWN0aW9uX25vZGU6IGJ5dGVzLCB2b3Rlcl9ub2RlOiBieXRlcykgLT4gYnl0ZXM6CmdldF9lbmRvcnNlbWVudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU3My01NzYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9lbmRvcnNlbWVudCgKICAgIC8vICAgICBzZWxmLCBlbGVjdGlvbl9ub2RlOiBCeXRlczMyLCB2b3Rlcl9ub2RlOiBhcmM0LkFkZHJlc3MKICAgIC8vICkgLT4gYXJjNC5Cb29sOgogICAgcHJvdG8gMiAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1NzgKICAgIC8vIHNlbGYuX2dldF9lbmRvcnNlbWVudChvcC5zaGEyNTYoZWxlY3Rpb25fbm9kZS5ieXRlcyArIHZvdGVyX25vZGUuYnl0ZXMpKQogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICBjYWxsc3ViIF9nZXRfZW5kb3JzZW1lbnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU3Ny01NzkKICAgIC8vIHJldHVybiBhcmM0LkJvb2woCiAgICAvLyAgICAgc2VsZi5fZ2V0X2VuZG9yc2VtZW50KG9wLnNoYTI1NihlbGVjdGlvbl9ub2RlLmJ5dGVzICsgdm90ZXJfbm9kZS5ieXRlcykpCiAgICAvLyApCiAgICBieXRlIDB4MDAKICAgIGludCAwCiAgICB1bmNvdmVyIDIKICAgIHNldGJpdAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uRWxlY3Rpb24uX2dldF9lbmRvcnNlbWVudChlbmRvcnNlbWVudF9ub2RlOiBieXRlcykgLT4gdWludDY0OgpfZ2V0X2VuZG9yc2VtZW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTgwLTU4MQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2VuZG9yc2VtZW50KHNlbGYsIGVuZG9yc2VtZW50X25vZGU6IEJ5dGVzKSAtPiBib29sOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazozNTMKICAgIC8vIEJ5dGVzMzIsIGJvb2wsIGtleV9wcmVmaXg9YiJkXyIKICAgIGJ5dGUgMHg2NDVmCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1ODItNTg1CiAgICAvLyByZXR1cm4gc2VsZi5lbmRvcnNlbWVudHMuZ2V0KAogICAgLy8gICAgIGtleT1CeXRlczMyLmZyb21fYnl0ZXMoZW5kb3JzZW1lbnRfbm9kZSksCiAgICAvLyAgICAgZGVmYXVsdD1GYWxzZSwKICAgIC8vICkKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICBib3hfZ2V0CiAgICBjb3ZlciAxCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1ODQKICAgIC8vIGRlZmF1bHQ9RmFsc2UsCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTgyLTU4NQogICAgLy8gcmV0dXJuIHNlbGYuZW5kb3JzZW1lbnRzLmdldCgKICAgIC8vICAgICBrZXk9Qnl0ZXMzMi5mcm9tX2J5dGVzKGVuZG9yc2VtZW50X25vZGUpLAogICAgLy8gICAgIGRlZmF1bHQ9RmFsc2UsCiAgICAvLyApCiAgICB1bmNvdmVyIDEKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBvcGVuc3VibWFyaW5lLmNvbnRyYWN0cy5hY2Nlc3MuT3duYWJsZS5jb250cmFjdC5Pd25hYmxlLnRyYW5zZmVyKG5ld19vd25lcjogYnl0ZXMpIC0+IHZvaWQ6CnRyYW5zZmVyOgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MzQtMzUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHRyYW5zZmVyKHNlbGYsIG5ld19vd25lcjogYXJjNC5BZGRyZXNzKSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weTozNgogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm11c3QgYmUgb3duZXIiCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjAKICAgIC8vIHNlbGYub3duZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgIm93bmVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MzYKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYub3duZXIsICJtdXN0IGJlIG93bmVyIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLm93bmVyIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBtdXN0IGJlIG93bmVyCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weTozNwogICAgLy8gYXJjNC5lbWl0KE93bmVyc2hpcFRyYW5zZmVycmVkKGFyYzQuQWRkcmVzcyhzZWxmLm93bmVyKSwgbmV3X293bmVyKSkKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weTozNwogICAgLy8gYXJjNC5lbWl0KE93bmVyc2hpcFRyYW5zZmVycmVkKGFyYzQuQWRkcmVzcyhzZWxmLm93bmVyKSwgbmV3X293bmVyKSkKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5vd25lciBleGlzdHMKICAgIGJ5dGUgMHgKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgbWV0aG9kICJPd25lcnNoaXBUcmFuc2ZlcnJlZChhZGRyZXNzLGFkZHJlc3MpIgogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjAKICAgIC8vIHNlbGYub3duZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgIm93bmVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MzgKICAgIC8vIHNlbGYub3duZXIgPSBuZXdfb3duZXIubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIKCgovLyBvcGVuc3VibWFyaW5lLmNvbnRyYWN0cy51cGRhdGUuVXBncmFkZWFibGUuY29udHJhY3QuVXBncmFkZWFibGUuc2V0X3ZlcnNpb24oY29udHJhY3RfdmVyc2lvbjogYnl0ZXMsIGRlcGxveW1lbnRfdmVyc2lvbjogYnl0ZXMpIC0+IHZvaWQ6CnNldF92ZXJzaW9uOgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjgzLTg2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzZXRfdmVyc2lvbigKICAgIC8vICAgICBzZWxmLCBjb250cmFjdF92ZXJzaW9uOiBhcmM0LlVJbnQ2NCwgZGVwbG95bWVudF92ZXJzaW9uOiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBOb25lOgogICAgcHJvdG8gMiAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODcKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYudXBncmFkZXIsICJtdXN0IGJlIHVwZ3JhZGVyIgogICAgdHhuIFNlbmRlcgogICAgaW50IDAKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozNAogICAgLy8gc2VsZi51cGdyYWRlciA9IEFjY291bnQoKQogICAgYnl0ZSAidXBncmFkZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODcKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYudXBncmFkZXIsICJtdXN0IGJlIHVwZ3JhZGVyIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnVwZ3JhZGVyIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBtdXN0IGJlIHVwZ3JhZGVyCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6ODgKICAgIC8vIGFyYzQuZW1pdChWZXJzaW9uVXBkYXRlZChjb250cmFjdF92ZXJzaW9uLCBkZXBsb3ltZW50X3ZlcnNpb24pKQogICAgYnl0ZSAweAogICAgZnJhbWVfZGlnIC0yCiAgICBjb25jYXQKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICBtZXRob2QgIlZlcnNpb25VcGRhdGVkKHVpbnQ2NCx1aW50NjQpIgogICAgdW5jb3ZlciAxCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5Ojg5CiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBjb250cmFjdF92ZXJzaW9uLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0yCiAgICBidG9pCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzEKICAgIC8vIHNlbGYuY29udHJhY3RfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJjb250cmFjdF92ZXJzaW9uIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5Ojg5CiAgICAvLyBzZWxmLmNvbnRyYWN0X3ZlcnNpb24gPSBjb250cmFjdF92ZXJzaW9uLm5hdGl2ZQogICAgdW5jb3ZlciAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjkwCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IGRlcGxveW1lbnRfdmVyc2lvbi5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMyCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJkZXBsb3ltZW50X3ZlcnNpb24iCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTAKICAgIC8vIHNlbGYuZGVwbG95bWVudF92ZXJzaW9uID0gZGVwbG95bWVudF92ZXJzaW9uLm5hdGl2ZQogICAgdW5jb3ZlciAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gb3BlbnN1Ym1hcmluZS5jb250cmFjdHMudXBkYXRlLlVwZ3JhZGVhYmxlLmNvbnRyYWN0LlVwZ3JhZGVhYmxlLmFwcHJvdmVfdXBkYXRlKGFwcHJvdmFsOiBieXRlcykgLT4gdm9pZDoKYXBwcm92ZV91cGRhdGU6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTAxLTEwMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYXBwcm92ZV91cGRhdGUoc2VsZiwgYXBwcm92YWw6IGFyYzQuQm9vbCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwMwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm11c3QgYmUgb3duZXIiCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvYWNjZXNzL093bmFibGUvY29udHJhY3QucHk6MjAKICAgIC8vIHNlbGYub3duZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgIm93bmVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwMwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5vd25lciwgIm11c3QgYmUgb3duZXIiCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIG11c3QgYmUgb3duZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDQKICAgIC8vIGFyYzQuZW1pdChVcGRhdGVBcHByb3ZlZChhcmM0LkFkZHJlc3Moc2VsZi5vd25lciksIGFwcHJvdmFsKSkKICAgIGludCAwCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy9hY2Nlc3MvT3duYWJsZS9jb250cmFjdC5weToyMAogICAgLy8gc2VsZi5vd25lciA9IEFjY291bnQoKQogICAgYnl0ZSAib3duZXIiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA0CiAgICAvLyBhcmM0LmVtaXQoVXBkYXRlQXBwcm92ZWQoYXJjNC5BZGRyZXNzKHNlbGYub3duZXIpLCBhcHByb3ZhbCkpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYub3duZXIgZXhpc3RzCiAgICBieXRlIDB4CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIG1ldGhvZCAiVXBkYXRlQXBwcm92ZWQoYWRkcmVzcyxib29sKSIKICAgIHVuY292ZXIgMQogICAgY29uY2F0CiAgICBsb2cKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMDUKICAgIC8vIHNlbGYudXBkYXRhYmxlID0gYXBwcm92YWwubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAwCiAgICBnZXRiaXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA1CiAgICAvLyBzZWxmLnVwZGF0YWJsZSA9IGFwcHJvdmFsLm5hdGl2ZQogICAgdW5jb3ZlciAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gb3BlbnN1Ym1hcmluZS5jb250cmFjdHMudXBkYXRlLlVwZ3JhZGVhYmxlLmNvbnRyYWN0LlVwZ3JhZGVhYmxlLmdyYW50X3VwZ3JhZGVyKHVwZ3JhZGVyOiBieXRlcykgLT4gdm9pZDoKZ3JhbnRfdXBncmFkZXI6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MTA3LTEwOAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZ3JhbnRfdXBncmFkZXIoc2VsZiwgdXBncmFkZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjEwOQogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcywgIm11c3QgYmUgY3JlYXRvciIKICAgIHR4biBTZW5kZXIKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgPT0KICAgIGFzc2VydCAvLyBtdXN0IGJlIGNyZWF0b3IKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMTAKICAgIC8vIGFyYzQuZW1pdChVcGdyYWRlckdyYW50ZWQoYXJjNC5BZGRyZXNzKHNlbGYudXBncmFkZXIpLCB1cGdyYWRlcikpCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gQWNjb3VudCgpCiAgICBieXRlICJ1cGdyYWRlciIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weToxMTAKICAgIC8vIGFyYzQuZW1pdChVcGdyYWRlckdyYW50ZWQoYXJjNC5BZGRyZXNzKHNlbGYudXBncmFkZXIpLCB1cGdyYWRlcikpCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYudXBncmFkZXIgZXhpc3RzCiAgICBieXRlIDB4CiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgZnJhbWVfZGlnIC0xCiAgICBjb25jYXQKICAgIG1ldGhvZCAiVXBncmFkZXJHcmFudGVkKGFkZHJlc3MsYWRkcmVzcykiCiAgICB1bmNvdmVyIDEKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzQKICAgIC8vIHNlbGYudXBncmFkZXIgPSBBY2NvdW50KCkKICAgIGJ5dGUgInVwZ3JhZGVyIgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjExMQogICAgLy8gc2VsZi51cGdyYWRlciA9IHVwZ3JhZGVyLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgoKLy8gb3BlbnN1Ym1hcmluZS5jb250cmFjdHMudXBkYXRlLlVwZ3JhZGVhYmxlLmNvbnRyYWN0LlVwZ3JhZGVhYmxlLm9uX3VwZGF0ZSgpIC0+IHZvaWQ6Cm9uX3VwZGF0ZToKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5Mi05MwogICAgLy8gQGFyYzQuYmFyZW1ldGhvZChhbGxvd19hY3Rpb25zPVsiVXBkYXRlQXBwbGljYXRpb24iXSkKICAgIC8vIGRlZiBvbl91cGRhdGUoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5Ojk0LTk3CiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgV0FSTklORzogVGhpcyBhcHAgY2FuIGJlIHVwZGF0ZWQgYnkgdGhlIGNyZWF0b3IKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi51cGdyYWRlciwgIm11c3QgYmUgdXBncmFkZXIiCiAgICB0eG4gU2VuZGVyCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gQWNjb3VudCgpCiAgICBieXRlICJ1cGdyYWRlciIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5NC05NwogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIFdBUk5JTkc6IFRoaXMgYXBwIGNhbiBiZSB1cGRhdGVkIGJ5IHRoZSBjcmVhdG9yCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIGFzc2VydCBUeG4uc2VuZGVyID09IHNlbGYudXBncmFkZXIsICJtdXN0IGJlIHVwZ3JhZGVyIgogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBzZWxmLnVwZ3JhZGVyIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBtdXN0IGJlIHVwZ3JhZGVyCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6OTgKICAgIC8vIGFzc2VydCBzZWxmLnVwZGF0YWJsZSA9PSBVSW50NjQoMSksICJub3QgYXBwcm92ZWQiCiAgICBpbnQgMAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMzCiAgICAvLyBzZWxmLnVwZGF0YWJsZSA9IGJvb2woMSkKICAgIGJ5dGUgInVwZGF0YWJsZSIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTo5OAogICAgLy8gYXNzZXJ0IHNlbGYudXBkYXRhYmxlID09IFVJbnQ2NCgxKSwgIm5vdCBhcHByb3ZlZCIKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi51cGRhdGFibGUgZXhpc3RzCiAgICBpbnQgMQogICAgdW5jb3ZlciAxCiAgICA9PQogICAgYXNzZXJ0IC8vIG5vdCBhcHByb3ZlZAogICAgcmV0c3ViCgoKLy8gX19tYWluX18uUG93R292ZXJuYW5jZS5fX2luaXRfXygpIC0+IHZvaWQ6Cl9faW5pdF9fOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU0NgogICAgLy8gZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDgKICAgIC8vIHNlbGYub3duZXIgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL2FjY2Vzcy9Pd25hYmxlL2NvbnRyYWN0LnB5OjIwCiAgICAvLyBzZWxmLm93bmVyID0gQWNjb3VudCgpCiAgICBieXRlICJvd25lciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NDgKICAgIC8vIHNlbGYub3duZXIgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICB1bmNvdmVyIDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL2NvbnRyYWN0cy91cGRhdGUvVXBncmFkZWFibGUvY29udHJhY3QucHk6MzEKICAgIC8vIHNlbGYuY29udHJhY3RfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJjb250cmFjdF92ZXJzaW9uIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU1MAogICAgLy8gc2VsZi5jb250cmFjdF92ZXJzaW9uID0gVUludDY0KCkKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjMyCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBieXRlICJkZXBsb3ltZW50X3ZlcnNpb24iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTUxCiAgICAvLyBzZWxmLmRlcGxveW1lbnRfdmVyc2lvbiA9IFVJbnQ2NCgpCiAgICBpbnQgMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvY29udHJhY3RzL3VwZGF0ZS9VcGdyYWRlYWJsZS9jb250cmFjdC5weTozMwogICAgLy8gc2VsZi51cGRhdGFibGUgPSBib29sKDEpCiAgICBieXRlICJ1cGRhdGFibGUiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTUyCiAgICAvLyBzZWxmLnVwZGF0YWJsZSA9IGJvb2woMSkKICAgIGludCAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU1MwogICAgLy8gc2VsZi51cGdyYWRlciA9IEdsb2JhbC5jcmVhdG9yX2FkZHJlc3MKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS9jb250cmFjdHMvdXBkYXRlL1VwZ3JhZGVhYmxlL2NvbnRyYWN0LnB5OjM0CiAgICAvLyBzZWxmLnVwZ3JhZGVyID0gQWNjb3VudCgpCiAgICBieXRlICJ1cGdyYWRlciIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NTMKICAgIC8vIHNlbGYudXBncmFkZXIgPSBHbG9iYWwuY3JlYXRvcl9hZGRyZXNzCiAgICB1bmNvdmVyIDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1ODkKICAgIC8vIHNlbGYucHJvcG9zYWxfY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAicHJvcG9zYWxfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTU1CiAgICAvLyBzZWxmLnByb3Bvc2FsX2NvdW50ID0gVUludDY0KCkKICAgIGludCAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTkwCiAgICAvLyBzZWxmLnZvdGVfY291bnQgPSBVSW50NjQoKQogICAgYnl0ZSAidm90ZV9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NTYKICAgIC8vIHNlbGYudm90ZV9jb3VudCA9IFVJbnQ2NCgpCiAgICBpbnQgMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5MQogICAgLy8gc2VsZi50cmVhc3VyeV9hcHBfaWQgPSBVSW50NjQoKQogICAgYnl0ZSAidHJlYXN1cnlfYXBwX2lkIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU1NwogICAgLy8gc2VsZi50cmVhc3VyeV9hcHBfaWQgPSBVSW50NjQoKQogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo1OTIKICAgIC8vIHNlbGYudG90YWxfdm90aW5nX3Bvd2VyID0gQmlnVUludCgpCiAgICBieXRlICJ0b3RhbF92b3RpbmdfcG93ZXIiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTU4CiAgICAvLyBzZWxmLnRvdGFsX3ZvdGluZ19wb3dlciA9IEJpZ1VJbnQoKQogICAgYnl0ZSAweAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5MwogICAgLy8gc2VsZi5hY3RpdmF0aW9uX3RocmVzaG9sZCA9IEJpZ1VJbnQoKQogICAgYnl0ZSAiYWN0aXZhdGlvbl90aHJlc2hvbGQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTU5LTE1NjEKICAgIC8vIHNlbGYuYWN0aXZhdGlvbl90aHJlc2hvbGQgPSBCaWdVSW50KAogICAgLy8gICAgIDEwMDAgKiAxMCoqNgogICAgLy8gKQogICAgYnl0ZSAweDNiOWFjYTAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTk0CiAgICAvLyBzZWxmLnF1b3J1bV9yZXF1aXJlbWVudCA9ICgKICAgIGJ5dGUgInF1b3J1bV9yZXF1aXJlbWVudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NjItMTU2NAogICAgLy8gc2VsZi5xdW9ydW1fcmVxdWlyZW1lbnQgPSBCaWdVSW50KAogICAgLy8gICAgIDQwMDAKICAgIC8vICkKICAgIGJ5dGUgMHgwZmEwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NTk3CiAgICAvLyBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJhY3RpdmVfcHJvcG9zYWxfY291bnQiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTY1CiAgICAvLyBzZWxmLmFjdGl2ZV9wcm9wb3NhbF9jb3VudCA9IFVJbnQ2NCgpCiAgICBpbnQgMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjU5OAogICAgLy8gc2VsZi50b3RhbF92b3Rlcl9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJ0b3RhbF92b3Rlcl9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NjYKICAgIC8vIHNlbGYudG90YWxfdm90ZXJfY291bnQgPSBVSW50NjQoKQogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDAKICAgIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID0gKAogICAgYnl0ZSAiZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU2OQogICAgLy8gVUludDY0KCkKICAgIGludCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTY4LTE1NzAKICAgIC8vIHNlbGYuZmluYWxpemVkX3Byb3Bvc2FsX2NvdW50ID0gKAogICAgLy8gICAgIFVJbnQ2NCgpCiAgICAvLyApCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6NjAzCiAgICAvLyBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpb25fcG93ZXIgPSAoCiAgICBieXRlICJ0b3RhbF9wYXJ0aWNpcGF0aW9uX3Bvd2VyIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU3MgogICAgLy8gQmlnVUludCgpCiAgICBieXRlIDB4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTcxLTE1NzMKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGlvbl9wb3dlciA9ICgKICAgIC8vICAgICBCaWdVSW50KCkKICAgIC8vICkKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazo2MDYKICAgIC8vIHNlbGYudG90YWxfcGFydGljaXBhdGluZ192b3RlcnMgPSAoCiAgICBieXRlICJ0b3RhbF9wYXJ0aWNpcGF0aW5nX3ZvdGVycyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NzUKICAgIC8vIFVJbnQ2NCgpCiAgICBpbnQgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU3NC0xNTc2CiAgICAvLyBzZWxmLnRvdGFsX3BhcnRpY2lwYXRpbmdfdm90ZXJzID0gKAogICAgLy8gICAgIFVJbnQ2NCgpCiAgICAvLyApCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MzQ3CiAgICAvLyBzZWxmLmVsZWN0aW9uX2NvdW50ID0gVUludDY0KCkKICAgIGJ5dGUgImVsZWN0aW9uX2NvdW50IgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weS5iYWs6MTU3OAogICAgLy8gc2VsZi5lbGVjdGlvbl9jb3VudCA9IFVJbnQ2NCgpCiAgICBpbnQgMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjM0OAogICAgLy8gc2VsZi5lbmRvcnNlbWVudF9jb3VudCA9IFVJbnQ2NCgpCiAgICBieXRlICJlbmRvcnNlbWVudF9jb3VudCIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHkuYmFrOjE1NzkKICAgIC8vIHNlbGYuZW5kb3JzZW1lbnRfY291bnQgPSBVSW50NjQoKQogICAgaW50IDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICByZXRzdWIK",
    "clear": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpfX21haW5fXy5Qb3dHb3Zlcm5hbmNlLmNsZWFyX3N0YXRlX3Byb2dyYW06CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5LmJhazoxNTQ1CiAgICAvLyBjbGFzcyBQb3dHb3Zlcm5hbmNlKEdvdmVybmFuY2UsIEVsZWN0aW9uLCBPd25hYmxlLCBVcGdyYWRlYWJsZSk6CiAgICBpbnQgMQogICAgcmV0dXJuCg=="
  },
  "state": {
    "global": {
      "num_byte_slices": 6,
      "num_uints": 12
    },
    "local": {
      "num_byte_slices": 0,
      "num_uints": 0
    }
  },
  "schema": {
    "global": {
      "declared": {
        "activation_threshold": {
          "type": "bytes",
          "key": "activation_threshold"
        },
        "active_proposal_count": {
          "type": "uint64",
          "key": "active_proposal_count"
        },
        "contract_version": {
          "type": "uint64",
          "key": "contract_version"
        },
        "deployment_version": {
          "type": "uint64",
          "key": "deployment_version"
        },
        "election_count": {
          "type": "uint64",
          "key": "election_count"
        },
        "endorsement_count": {
          "type": "uint64",
          "key": "endorsement_count"
        },
        "finalized_proposal_count": {
          "type": "uint64",
          "key": "finalized_proposal_count"
        },
        "owner": {
          "type": "bytes",
          "key": "owner"
        },
        "proposal_count": {
          "type": "uint64",
          "key": "proposal_count"
        },
        "quorum_requirement": {
          "type": "bytes",
          "key": "quorum_requirement"
        },
        "total_participating_voters": {
          "type": "uint64",
          "key": "total_participating_voters"
        },
        "total_participation_power": {
          "type": "bytes",
          "key": "total_participation_power"
        },
        "total_voter_count": {
          "type": "uint64",
          "key": "total_voter_count"
        },
        "total_voting_power": {
          "type": "bytes",
          "key": "total_voting_power"
        },
        "treasury_app_id": {
          "type": "uint64",
          "key": "treasury_app_id"
        },
        "updatable": {
          "type": "uint64",
          "key": "updatable"
        },
        "upgrader": {
          "type": "bytes",
          "key": "upgrader"
        },
        "vote_count": {
          "type": "uint64",
          "key": "vote_count"
        }
      },
      "reserved": {}
    },
    "local": {
      "declared": {},
      "reserved": {}
    }
  },
  "contract": {
    "name": "PowGovernance",
    "methods": [
      {
        "name": "bootstrap",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "veto_proposal",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Veto a queued proposal - only owner can veto"
      },
      {
        "name": "execute_proposal",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Execute a queued proposal - only owner can execute"
      },
      {
        "name": "queue_proposal",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Queue a succeeded proposal for execution - only owner can queue"
      },
      {
        "name": "finalize_proposal",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Finalize a proposal after voting period ends - only owner can finalize"
      },
      {
        "name": "cancel_proposal",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Cancel a pending proposal - only owner can cancel"
      },
      {
        "name": "set_quorum_requirement",
        "args": [
          {
            "type": "uint256",
            "name": "quorum_bps"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Set the global quorum requirement - only owner can set"
      },
      {
        "name": "update_total_voting_power",
        "args": [
          {
            "type": "uint256",
            "name": "new_total_power"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Update the total voting power - only owner can update"
      },
      {
        "name": "add_power_source",
        "args": [
          {
            "type": "uint64",
            "name": "power_source_id"
          },
          {
            "type": "uint64",
            "name": "power_multiplier"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "get_power_source",
        "args": [
          {
            "type": "uint64",
            "name": "power_source_id"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "(uint64,uint64)"
        }
      },
      {
        "name": "update_power_source",
        "args": [
          {
            "type": "uint64",
            "name": "power_source_id"
          },
          {
            "type": "uint64",
            "name": "power_multiplier"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "lock_power",
        "args": [
          {
            "type": "uint64",
            "name": "power_source_id"
          },
          {
            "type": "uint256",
            "name": "power_source_amount"
          },
          {
            "type": "uint64",
            "name": "power_unlock_timestamp"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "get_power_lock",
        "args": [
          {
            "type": "uint64",
            "name": "power_source_id"
          },
          {
            "type": "uint64",
            "name": "power_unlock_timestamp"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "(uint64,uint256,uint64,address,uint256,uint64,uint64)"
        }
      },
      {
        "name": "unlock_power",
        "args": [
          {
            "type": "uint64",
            "name": "power_source_id"
          },
          {
            "type": "uint64",
            "name": "power_unlock_timestamp"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "get_proposal_node",
        "args": [
          {
            "type": "byte[64]",
            "name": "proposal_title"
          },
          {
            "type": "byte[512]",
            "name": "proposal_description"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[32]"
        }
      },
      {
        "name": "get_proposal",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256)"
        }
      },
      {
        "name": "get_vote",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          },
          {
            "type": "address",
            "name": "account"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        }
      },
      {
        "name": "propose",
        "args": [
          {
            "type": "byte[64]",
            "name": "proposal_title"
          },
          {
            "type": "byte[512]",
            "name": "proposal_description"
          },
          {
            "type": "uint64",
            "name": "proposal_category_id"
          },
          {
            "type": "uint64",
            "name": "proposal_start_timestamp"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[32]"
        }
      },
      {
        "name": "activate_proposal",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "cast_vote",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          },
          {
            "type": "uint64",
            "name": "support"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "reject_proposal",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        },
        "desc": "Check if a pending proposal should be rejected due to insufficient activation votes"
      },
      {
        "name": "get_active_proposal_count",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the current number of active proposals"
      },
      {
        "name": "get_total_voter_count",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the current number of unique voters"
      },
      {
        "name": "get_participation_rate",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the current participation rate as a percentage (0-100)"
      },
      {
        "name": "get_proposal_participation_rate",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get participation rate for a specific proposal as a percentage (0-100)"
      },
      {
        "name": "get_eligible_voter_count",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the number of voters with voting power > 0"
      },
      {
        "name": "get_participating_voter_count",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the number of voters who have actually participated in voting"
      },
      {
        "name": "get_finalized_proposal_count",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the number of proposals that have been finalized"
      },
      {
        "name": "get_average_participation_per_proposal",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get average participation power per finalized proposal"
      },
      {
        "name": "get_average_votes_per_proposal",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get average number of votes per proposal"
      },
      {
        "name": "get_voter_influence_score",
        "args": [
          {
            "type": "address",
            "name": "account"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get influence score for a specific voter (0-100) based on voting power"
      },
      {
        "name": "get_voter_engagement_score",
        "args": [
          {
            "type": "address",
            "name": "account"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get engagement score for a specific voter (0-100) based on actual participation"
      },
      {
        "name": "has_voter_participated_in_proposal",
        "args": [
          {
            "type": "address",
            "name": "account"
          },
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "bool"
        },
        "desc": "Check if a voter has participated in a specific proposal"
      },
      {
        "name": "get_voter_participation_timestamp",
        "args": [
          {
            "type": "address",
            "name": "account"
          },
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the timestamp when a voter participated in a specific proposal"
      },
      {
        "name": "get_voter_proposal_count",
        "args": [
          {
            "type": "address",
            "name": "account"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the number of proposals a voter has participated in"
      },
      {
        "name": "get_voter_last_proposal_node",
        "args": [
          {
            "type": "address",
            "name": "account"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[32]"
        },
        "desc": "Get the node of the last proposal this voter participated in"
      },
      {
        "name": "get_quorum_requirement",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint256"
        },
        "desc": "Get the global quorum requirement in basis points (bps) with base of 10000"
      },
      {
        "name": "get_quorum_threshold",
        "args": [],
        "readonly": false,
        "returns": {
          "type": "uint256"
        },
        "desc": "Get the current quorum threshold in voting power units"
      },
      {
        "name": "check_proposal_quorum",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "bool"
        },
        "desc": "Check if a proposal meets the quorum requirement"
      },
      {
        "name": "get_proposal_quorum_status",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get quorum status for a proposal: 0 = not met, 1 = met, 2 = exceeded"
      },
      {
        "name": "get_proposal_quorum_progress",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get quorum progress as percentage (0-10000 bps) for a proposal"
      },
      {
        "name": "get_proposal_quorum_threshold",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the quorum threshold for a specific proposal"
      },
      {
        "name": "get_lockup_bonus_multiplier",
        "args": [
          {
            "type": "uint64",
            "name": "lockup_duration_seconds"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the bonus multiplier for a given lockup duration in seconds"
      },
      {
        "name": "get_lockup_tier_info",
        "args": [
          {
            "type": "uint64",
            "name": "lockup_duration_seconds"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the lockup tier (1-5) for a given duration"
      },
      {
        "name": "calculate_potential_power_granted",
        "args": [
          {
            "type": "uint64",
            "name": "power_source_id"
          },
          {
            "type": "uint256",
            "name": "power_source_amount"
          },
          {
            "type": "uint64",
            "name": "lockup_duration_seconds"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint256"
        },
        "desc": "Calculate potential voting power granted for a given lockup scenario"
      },
      {
        "name": "get_lockup_tier_duration",
        "args": [
          {
            "type": "uint64",
            "name": "tier"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the minimum duration required for a specific lockup tier"
      },
      {
        "name": "get_lockup_tier_bonus",
        "args": [
          {
            "type": "uint64",
            "name": "tier"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get the bonus multiplier for a specific lockup tier"
      },
      {
        "name": "get_power_lock_info",
        "args": [
          {
            "type": "uint64",
            "name": "power_source_id"
          },
          {
            "type": "uint64",
            "name": "power_unlock_timestamp"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "uint64"
        },
        "desc": "Get comprehensive lockup information for a power lock"
      },
      {
        "name": "get_voter",
        "args": [
          {
            "type": "address",
            "name": "account"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "(address,uint256,uint64,uint64,uint64,byte[32])"
        }
      },
      {
        "name": "check_proposal_activation",
        "args": [
          {
            "type": "byte[32]",
            "name": "proposal_node"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "get_election_node",
        "args": [
          {
            "type": "byte[64]",
            "name": "election_title"
          },
          {
            "type": "byte[512]",
            "name": "election_description"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "byte[32]"
        }
      },
      {
        "name": "get_election",
        "args": [
          {
            "type": "byte[32]",
            "name": "election_node"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64)"
        }
      },
      {
        "name": "propose_election",
        "args": [
          {
            "type": "byte[64]",
            "name": "election_title"
          },
          {
            "type": "byte[512]",
            "name": "election_description"
          },
          {
            "type": "uint64",
            "name": "election_start_timestamp"
          },
          {
            "type": "uint64",
            "name": "election_end_timestamp"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "byte[32]"
        }
      },
      {
        "name": "endorse_candidates",
        "args": [
          {
            "type": "byte[32]",
            "name": "election_node"
          },
          {
            "type": "byte[32]",
            "name": "candidate_node_1"
          },
          {
            "type": "byte[32]",
            "name": "candidate_node_2"
          },
          {
            "type": "byte[32]",
            "name": "candidate_node_3"
          },
          {
            "type": "byte[32]",
            "name": "candidate_node_4"
          },
          {
            "type": "byte[32]",
            "name": "candidate_node_5"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "get_candidate_endorsement",
        "args": [
          {
            "type": "byte[32]",
            "name": "election_node"
          },
          {
            "type": "byte[32]",
            "name": "candidate_node"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "(byte[32],byte[32],byte[32],uint64,uint256,uint64)"
        }
      },
      {
        "name": "get_endorsement",
        "args": [
          {
            "type": "byte[32]",
            "name": "election_node"
          },
          {
            "type": "address",
            "name": "voter_node"
          }
        ],
        "readonly": true,
        "returns": {
          "type": "bool"
        }
      },
      {
        "name": "transfer",
        "args": [
          {
            "type": "address",
            "name": "new_owner"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "set_version",
        "args": [
          {
            "type": "uint64",
            "name": "contract_version"
          },
          {
            "type": "uint64",
            "name": "deployment_version"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "approve_update",
        "args": [
          {
            "type": "bool",
            "name": "approval"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      },
      {
        "name": "grant_upgrader",
        "args": [
          {
            "type": "address",
            "name": "upgrader"
          }
        ],
        "readonly": false,
        "returns": {
          "type": "void"
        }
      }
    ],
    "networks": {}
  },
  "bare_call_config": {
    "update_application": "CALL",
    "no_op": "CREATE"
  }
}

/**
 * Defines an onCompletionAction of 'no_op'
 */
export type OnCompleteNoOp =  { onCompleteAction?: 'no_op' | OnApplicationComplete.NoOpOC }
/**
 * Defines an onCompletionAction of 'opt_in'
 */
export type OnCompleteOptIn =  { onCompleteAction: 'opt_in' | OnApplicationComplete.OptInOC }
/**
 * Defines an onCompletionAction of 'close_out'
 */
export type OnCompleteCloseOut =  { onCompleteAction: 'close_out' | OnApplicationComplete.CloseOutOC }
/**
 * Defines an onCompletionAction of 'delete_application'
 */
export type OnCompleteDelApp =  { onCompleteAction: 'delete_application' | OnApplicationComplete.DeleteApplicationOC }
/**
 * Defines an onCompletionAction of 'update_application'
 */
export type OnCompleteUpdApp =  { onCompleteAction: 'update_application' | OnApplicationComplete.UpdateApplicationOC }
/**
 * A state record containing a single unsigned integer
 */
export type IntegerState = {
  /**
   * Gets the state value as a BigInt.
   */
  asBigInt(): bigint
  /**
   * Gets the state value as a number.
   */
  asNumber(): number
}
/**
 * A state record containing binary data
 */
export type BinaryState = {
  /**
   * Gets the state value as a Uint8Array
   */
  asByteArray(): Uint8Array
  /**
   * Gets the state value as a string
   */
  asString(): string
}

export type AppCreateCallTransactionResult = AppCallTransactionResult & Partial<AppCompilationResult> & AppReference
export type AppUpdateCallTransactionResult = AppCallTransactionResult & Partial<AppCompilationResult>

export type AppClientComposeCallCoreParams = Omit<AppClientCallCoreParams, 'sendParams'> & {
  sendParams?: Omit<SendTransactionParams, 'skipSending' | 'atc' | 'skipWaiting' | 'maxRoundsToWaitForConfirmation' | 'populateAppCallResources'>
}
export type AppClientComposeExecuteParams = Pick<SendTransactionParams, 'skipWaiting' | 'maxRoundsToWaitForConfirmation' | 'populateAppCallResources' | 'suppressLog'>

/**
 * Defines the types of available calls and state of the PowGovernance smart contract.
 */
export type PowGovernance = {
  /**
   * Maps method signatures / names to their argument and return types.
   */
  methods:
    & Record<'bootstrap()void' | 'bootstrap', {
      argsObj: {
      }
      argsTuple: []
      returns: void
    }>
    & Record<'veto_proposal(byte[32])void' | 'veto_proposal', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: void
    }>
    & Record<'execute_proposal(byte[32])void' | 'execute_proposal', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: void
    }>
    & Record<'queue_proposal(byte[32])void' | 'queue_proposal', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: void
    }>
    & Record<'finalize_proposal(byte[32])void' | 'finalize_proposal', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: void
    }>
    & Record<'cancel_proposal(byte[32])void' | 'cancel_proposal', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: void
    }>
    & Record<'set_quorum_requirement(uint256)void' | 'set_quorum_requirement', {
      argsObj: {
        quorumBps: bigint | number
      }
      argsTuple: [quorumBps: bigint | number]
      returns: void
    }>
    & Record<'update_total_voting_power(uint256)void' | 'update_total_voting_power', {
      argsObj: {
        newTotalPower: bigint | number
      }
      argsTuple: [newTotalPower: bigint | number]
      returns: void
    }>
    & Record<'add_power_source(uint64,uint64)void' | 'add_power_source', {
      argsObj: {
        powerSourceId: bigint | number
        powerMultiplier: bigint | number
      }
      argsTuple: [powerSourceId: bigint | number, powerMultiplier: bigint | number]
      returns: void
    }>
    & Record<'get_power_source(uint64)(uint64,uint64)' | 'get_power_source', {
      argsObj: {
        powerSourceId: bigint | number
      }
      argsTuple: [powerSourceId: bigint | number]
      returns: PowerSource
    }>
    & Record<'update_power_source(uint64,uint64)void' | 'update_power_source', {
      argsObj: {
        powerSourceId: bigint | number
        powerMultiplier: bigint | number
      }
      argsTuple: [powerSourceId: bigint | number, powerMultiplier: bigint | number]
      returns: void
    }>
    & Record<'lock_power(uint64,uint256,uint64)void' | 'lock_power', {
      argsObj: {
        powerSourceId: bigint | number
        powerSourceAmount: bigint | number
        powerUnlockTimestamp: bigint | number
      }
      argsTuple: [powerSourceId: bigint | number, powerSourceAmount: bigint | number, powerUnlockTimestamp: bigint | number]
      returns: void
    }>
    & Record<'get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64)' | 'get_power_lock', {
      argsObj: {
        powerSourceId: bigint | number
        powerUnlockTimestamp: bigint | number
      }
      argsTuple: [powerSourceId: bigint | number, powerUnlockTimestamp: bigint | number]
      returns: PowerLock
    }>
    & Record<'unlock_power(uint64,uint64)void' | 'unlock_power', {
      argsObj: {
        powerSourceId: bigint | number
        powerUnlockTimestamp: bigint | number
      }
      argsTuple: [powerSourceId: bigint | number, powerUnlockTimestamp: bigint | number]
      returns: void
    }>
    & Record<'get_proposal_node(byte[64],byte[512])byte[32]' | 'get_proposal_node', {
      argsObj: {
        proposalTitle: Uint8Array
        proposalDescription: Uint8Array
      }
      argsTuple: [proposalTitle: Uint8Array, proposalDescription: Uint8Array]
      returns: Uint8Array
    }>
    & Record<'get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256)' | 'get_proposal', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: Proposal
    }>
    & Record<'get_vote(byte[32],address)uint64' | 'get_vote', {
      argsObj: {
        proposalNode: Uint8Array
        account: string
      }
      argsTuple: [proposalNode: Uint8Array, account: string]
      returns: bigint
    }>
    & Record<'propose(byte[64],byte[512],uint64,uint64)byte[32]' | 'propose', {
      argsObj: {
        proposalTitle: Uint8Array
        proposalDescription: Uint8Array
        proposalCategoryId: bigint | number
        proposalStartTimestamp: bigint | number
      }
      argsTuple: [proposalTitle: Uint8Array, proposalDescription: Uint8Array, proposalCategoryId: bigint | number, proposalStartTimestamp: bigint | number]
      returns: Uint8Array
    }>
    & Record<'activate_proposal(byte[32])void' | 'activate_proposal', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: void
    }>
    & Record<'cast_vote(byte[32],uint64)void' | 'cast_vote', {
      argsObj: {
        proposalNode: Uint8Array
        support: bigint | number
      }
      argsTuple: [proposalNode: Uint8Array, support: bigint | number]
      returns: void
    }>
    & Record<'reject_proposal(byte[32])void' | 'reject_proposal', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: void
    }>
    & Record<'get_active_proposal_count()uint64' | 'get_active_proposal_count', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_total_voter_count()uint64' | 'get_total_voter_count', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_participation_rate()uint64' | 'get_participation_rate', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_proposal_participation_rate(byte[32])uint64' | 'get_proposal_participation_rate', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: bigint
    }>
    & Record<'get_eligible_voter_count()uint64' | 'get_eligible_voter_count', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_participating_voter_count()uint64' | 'get_participating_voter_count', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_finalized_proposal_count()uint64' | 'get_finalized_proposal_count', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_average_participation_per_proposal()uint64' | 'get_average_participation_per_proposal', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_average_votes_per_proposal()uint64' | 'get_average_votes_per_proposal', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_voter_influence_score(address)uint64' | 'get_voter_influence_score', {
      argsObj: {
        account: string
      }
      argsTuple: [account: string]
      returns: bigint
    }>
    & Record<'get_voter_engagement_score(address)uint64' | 'get_voter_engagement_score', {
      argsObj: {
        account: string
      }
      argsTuple: [account: string]
      returns: bigint
    }>
    & Record<'has_voter_participated_in_proposal(address,byte[32])bool' | 'has_voter_participated_in_proposal', {
      argsObj: {
        account: string
        proposalNode: Uint8Array
      }
      argsTuple: [account: string, proposalNode: Uint8Array]
      returns: boolean
    }>
    & Record<'get_voter_participation_timestamp(address,byte[32])uint64' | 'get_voter_participation_timestamp', {
      argsObj: {
        account: string
        proposalNode: Uint8Array
      }
      argsTuple: [account: string, proposalNode: Uint8Array]
      returns: bigint
    }>
    & Record<'get_voter_proposal_count(address)uint64' | 'get_voter_proposal_count', {
      argsObj: {
        account: string
      }
      argsTuple: [account: string]
      returns: bigint
    }>
    & Record<'get_voter_last_proposal_node(address)byte[32]' | 'get_voter_last_proposal_node', {
      argsObj: {
        account: string
      }
      argsTuple: [account: string]
      returns: Uint8Array
    }>
    & Record<'get_quorum_requirement()uint256' | 'get_quorum_requirement', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'get_quorum_threshold()uint256' | 'get_quorum_threshold', {
      argsObj: {
      }
      argsTuple: []
      returns: bigint
    }>
    & Record<'check_proposal_quorum(byte[32])bool' | 'check_proposal_quorum', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: boolean
    }>
    & Record<'get_proposal_quorum_status(byte[32])uint64' | 'get_proposal_quorum_status', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: bigint
    }>
    & Record<'get_proposal_quorum_progress(byte[32])uint64' | 'get_proposal_quorum_progress', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: bigint
    }>
    & Record<'get_proposal_quorum_threshold(byte[32])uint64' | 'get_proposal_quorum_threshold', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: bigint
    }>
    & Record<'get_lockup_bonus_multiplier(uint64)uint64' | 'get_lockup_bonus_multiplier', {
      argsObj: {
        lockupDurationSeconds: bigint | number
      }
      argsTuple: [lockupDurationSeconds: bigint | number]
      returns: bigint
    }>
    & Record<'get_lockup_tier_info(uint64)uint64' | 'get_lockup_tier_info', {
      argsObj: {
        lockupDurationSeconds: bigint | number
      }
      argsTuple: [lockupDurationSeconds: bigint | number]
      returns: bigint
    }>
    & Record<'calculate_potential_power_granted(uint64,uint256,uint64)uint256' | 'calculate_potential_power_granted', {
      argsObj: {
        powerSourceId: bigint | number
        powerSourceAmount: bigint | number
        lockupDurationSeconds: bigint | number
      }
      argsTuple: [powerSourceId: bigint | number, powerSourceAmount: bigint | number, lockupDurationSeconds: bigint | number]
      returns: bigint
    }>
    & Record<'get_lockup_tier_duration(uint64)uint64' | 'get_lockup_tier_duration', {
      argsObj: {
        tier: bigint | number
      }
      argsTuple: [tier: bigint | number]
      returns: bigint
    }>
    & Record<'get_lockup_tier_bonus(uint64)uint64' | 'get_lockup_tier_bonus', {
      argsObj: {
        tier: bigint | number
      }
      argsTuple: [tier: bigint | number]
      returns: bigint
    }>
    & Record<'get_power_lock_info(uint64,uint64)uint64' | 'get_power_lock_info', {
      argsObj: {
        powerSourceId: bigint | number
        powerUnlockTimestamp: bigint | number
      }
      argsTuple: [powerSourceId: bigint | number, powerUnlockTimestamp: bigint | number]
      returns: bigint
    }>
    & Record<'get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32])' | 'get_voter', {
      argsObj: {
        account: string
      }
      argsTuple: [account: string]
      returns: Voter
    }>
    & Record<'check_proposal_activation(byte[32])void' | 'check_proposal_activation', {
      argsObj: {
        proposalNode: Uint8Array
      }
      argsTuple: [proposalNode: Uint8Array]
      returns: void
    }>
    & Record<'get_election_node(byte[64],byte[512])byte[32]' | 'get_election_node', {
      argsObj: {
        electionTitle: Uint8Array
        electionDescription: Uint8Array
      }
      argsTuple: [electionTitle: Uint8Array, electionDescription: Uint8Array]
      returns: Uint8Array
    }>
    & Record<'get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64)' | 'get_election', {
      argsObj: {
        electionNode: Uint8Array
      }
      argsTuple: [electionNode: Uint8Array]
      returns: ElectionProposal
    }>
    & Record<'propose_election(byte[64],byte[512],uint64,uint64)byte[32]' | 'propose_election', {
      argsObj: {
        electionTitle: Uint8Array
        electionDescription: Uint8Array
        electionStartTimestamp: bigint | number
        electionEndTimestamp: bigint | number
      }
      argsTuple: [electionTitle: Uint8Array, electionDescription: Uint8Array, electionStartTimestamp: bigint | number, electionEndTimestamp: bigint | number]
      returns: Uint8Array
    }>
    & Record<'endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void' | 'endorse_candidates', {
      argsObj: {
        electionNode: Uint8Array
        candidateNode_1: Uint8Array
        candidateNode_2: Uint8Array
        candidateNode_3: Uint8Array
        candidateNode_4: Uint8Array
        candidateNode_5: Uint8Array
      }
      argsTuple: [electionNode: Uint8Array, candidateNode_1: Uint8Array, candidateNode_2: Uint8Array, candidateNode_3: Uint8Array, candidateNode_4: Uint8Array, candidateNode_5: Uint8Array]
      returns: void
    }>
    & Record<'get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64)' | 'get_candidate_endorsement', {
      argsObj: {
        electionNode: Uint8Array
        candidateNode: Uint8Array
      }
      argsTuple: [electionNode: Uint8Array, candidateNode: Uint8Array]
      returns: Endorsement
    }>
    & Record<'get_endorsement(byte[32],address)bool' | 'get_endorsement', {
      argsObj: {
        electionNode: Uint8Array
        voterNode: string
      }
      argsTuple: [electionNode: Uint8Array, voterNode: string]
      returns: boolean
    }>
    & Record<'transfer(address)void' | 'transfer', {
      argsObj: {
        newOwner: string
      }
      argsTuple: [newOwner: string]
      returns: void
    }>
    & Record<'set_version(uint64,uint64)void' | 'set_version', {
      argsObj: {
        contractVersion: bigint | number
        deploymentVersion: bigint | number
      }
      argsTuple: [contractVersion: bigint | number, deploymentVersion: bigint | number]
      returns: void
    }>
    & Record<'approve_update(bool)void' | 'approve_update', {
      argsObj: {
        approval: boolean
      }
      argsTuple: [approval: boolean]
      returns: void
    }>
    & Record<'grant_upgrader(address)void' | 'grant_upgrader', {
      argsObj: {
        upgrader: string
      }
      argsTuple: [upgrader: string]
      returns: void
    }>
  /**
   * Defines the shape of the global and local state of the application.
   */
  state: {
    global: {
      activationThreshold?: BinaryState
      activeProposalCount?: IntegerState
      contractVersion?: IntegerState
      deploymentVersion?: IntegerState
      electionCount?: IntegerState
      endorsementCount?: IntegerState
      finalizedProposalCount?: IntegerState
      owner?: BinaryState
      proposalCount?: IntegerState
      quorumRequirement?: BinaryState
      totalParticipatingVoters?: IntegerState
      totalParticipationPower?: BinaryState
      totalVoterCount?: IntegerState
      totalVotingPower?: BinaryState
      treasuryAppId?: IntegerState
      updatable?: IntegerState
      upgrader?: BinaryState
      voteCount?: IntegerState
    }
  }
}
/**
 * Defines the possible abi call signatures
 */
export type PowGovernanceSig = keyof PowGovernance['methods']
/**
 * Defines an object containing all relevant parameters for a single call to the contract. Where TSignature is undefined, a bare call is made
 */
export type TypedCallParams<TSignature extends PowGovernanceSig | undefined> = {
  method: TSignature
  methodArgs: TSignature extends undefined ? undefined : Array<ABIAppCallArg | undefined>
} & AppClientCallCoreParams & CoreAppCallArgs
/**
 * Defines the arguments required for a bare call
 */
export type BareCallArgs = Omit<RawAppCallArgs, keyof CoreAppCallArgs>
/**
 * Represents a PowerSource result as a struct
 */
export type PowerSource = {
  powerSourceId: bigint
  powerMultiplier: bigint
}
/**
 * Converts the tuple representation of a PowerSource to the struct representation
 */
export function PowerSource([powerSourceId, powerMultiplier]: [bigint, bigint] ) {
  return {
    powerSourceId,
    powerMultiplier,
  }
}
/**
 * Represents a PowerLock result as a struct
 */
export type PowerLock = {
  powerSourceId: bigint
  powerSourceAmount: bigint
  powerSourceUnlockTimestamp: bigint
  powerSourceOwner: string
  powerGranted: bigint
  lockupDuration: bigint
  lockupBonusMultiplier: bigint
}
/**
 * Converts the tuple representation of a PowerLock to the struct representation
 */
export function PowerLock([powerSourceId, powerSourceAmount, powerSourceUnlockTimestamp, powerSourceOwner, powerGranted, lockupDuration, lockupBonusMultiplier]: [bigint, bigint, bigint, string, bigint, bigint, bigint] ) {
  return {
    powerSourceId,
    powerSourceAmount,
    powerSourceUnlockTimestamp,
    powerSourceOwner,
    powerGranted,
    lockupDuration,
    lockupBonusMultiplier,
  }
}
/**
 * Represents a Proposal result as a struct
 */
export type Proposal = {
  proposalIndex: bigint
  proposalStatus: bigint
  proposer: string
  proposalTitle: Uint8Array
  proposalDescription: Uint8Array
  proposalNode: Uint8Array
  proposalCategoryId: bigint
  proposalTotalVotes: bigint
  proposalYesVotes: bigint
  proposalTotalPower: bigint
  proposalActivationPower: bigint
  createdAtTimestamp: bigint
  votingStartTimestamp: bigint
  votingEndTimestamp: bigint
  proposalActionHash: Uint8Array
  executedAtTimestamp: bigint
  executionTxnId: bigint
  proposalActivationTimestamp: bigint
  proposalQuorumThreshold: bigint
  proposalQuorumMet: boolean
  proposalQuorumStatus: bigint
  proposalYesPower: bigint
}
/**
 * Converts the tuple representation of a Proposal to the struct representation
 */
export function Proposal([proposalIndex, proposalStatus, proposer, proposalTitle, proposalDescription, proposalNode, proposalCategoryId, proposalTotalVotes, proposalYesVotes, proposalTotalPower, proposalActivationPower, createdAtTimestamp, votingStartTimestamp, votingEndTimestamp, proposalActionHash, executedAtTimestamp, executionTxnId, proposalActivationTimestamp, proposalQuorumThreshold, proposalQuorumMet, proposalQuorumStatus, proposalYesPower]: [bigint, bigint, string, Uint8Array, Uint8Array, Uint8Array, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint, Uint8Array, bigint, bigint, bigint, bigint, boolean, bigint, bigint] ) {
  return {
    proposalIndex,
    proposalStatus,
    proposer,
    proposalTitle,
    proposalDescription,
    proposalNode,
    proposalCategoryId,
    proposalTotalVotes,
    proposalYesVotes,
    proposalTotalPower,
    proposalActivationPower,
    createdAtTimestamp,
    votingStartTimestamp,
    votingEndTimestamp,
    proposalActionHash,
    executedAtTimestamp,
    executionTxnId,
    proposalActivationTimestamp,
    proposalQuorumThreshold,
    proposalQuorumMet,
    proposalQuorumStatus,
    proposalYesPower,
  }
}
/**
 * Represents a Voter result as a struct
 */
export type Voter = {
  voterAddress: string
  votePower: bigint
  voteTimestamp: bigint
  proposalsParticipated: bigint
  lastParticipationTimestamp: bigint
  lastProposalNode: Uint8Array
}
/**
 * Converts the tuple representation of a Voter to the struct representation
 */
export function Voter([voterAddress, votePower, voteTimestamp, proposalsParticipated, lastParticipationTimestamp, lastProposalNode]: [string, bigint, bigint, bigint, bigint, Uint8Array] ) {
  return {
    voterAddress,
    votePower,
    voteTimestamp,
    proposalsParticipated,
    lastParticipationTimestamp,
    lastProposalNode,
  }
}
/**
 * Represents a ElectionProposal result as a struct
 */
export type ElectionProposal = {
  electionIndex: bigint
  electionStatus: bigint
  proposer: string
  electionTitle: Uint8Array
  electionDescription: Uint8Array
  electionNode: Uint8Array
  createdAtTimestamp: bigint
  electionStartTimestamp: bigint
  electionEndTimestamp: bigint
  endorsementCount: bigint
  endorsementVotes: bigint
  endorsementTimestamp: bigint
}
/**
 * Converts the tuple representation of a ElectionProposal to the struct representation
 */
export function ElectionProposal([electionIndex, electionStatus, proposer, electionTitle, electionDescription, electionNode, createdAtTimestamp, electionStartTimestamp, electionEndTimestamp, endorsementCount, endorsementVotes, endorsementTimestamp]: [bigint, bigint, string, Uint8Array, Uint8Array, Uint8Array, bigint, bigint, bigint, bigint, bigint, bigint] ) {
  return {
    electionIndex,
    electionStatus,
    proposer,
    electionTitle,
    electionDescription,
    electionNode,
    createdAtTimestamp,
    electionStartTimestamp,
    electionEndTimestamp,
    endorsementCount,
    endorsementVotes,
    endorsementTimestamp,
  }
}
/**
 * Represents a Endorsement result as a struct
 */
export type Endorsement = {
  endorsementNode: Uint8Array
  endorsementElectionNode: Uint8Array
  endorsementCandidateNode: Uint8Array
  endorsementCount: bigint
  endorsementVotes: bigint
  endorsementTimestamp: bigint
}
/**
 * Converts the tuple representation of a Endorsement to the struct representation
 */
export function Endorsement([endorsementNode, endorsementElectionNode, endorsementCandidateNode, endorsementCount, endorsementVotes, endorsementTimestamp]: [Uint8Array, Uint8Array, Uint8Array, bigint, bigint, bigint] ) {
  return {
    endorsementNode,
    endorsementElectionNode,
    endorsementCandidateNode,
    endorsementCount,
    endorsementVotes,
    endorsementTimestamp,
  }
}
/**
 * Maps a method signature from the PowGovernance smart contract to the method's arguments in either tuple of struct form
 */
export type MethodArgs<TSignature extends PowGovernanceSig> = PowGovernance['methods'][TSignature]['argsObj' | 'argsTuple']
/**
 * Maps a method signature from the PowGovernance smart contract to the method's return type
 */
export type MethodReturn<TSignature extends PowGovernanceSig> = PowGovernance['methods'][TSignature]['returns']

/**
 * A factory for available 'create' calls
 */
export type PowGovernanceCreateCalls = (typeof PowGovernanceCallFactory)['create']
/**
 * Defines supported create methods for this smart contract
 */
export type PowGovernanceCreateCallParams =
  | (TypedCallParams<undefined> & (OnCompleteNoOp))
/**
 * A factory for available 'update' calls
 */
export type PowGovernanceUpdateCalls = (typeof PowGovernanceCallFactory)['update']
/**
 * Defines supported update methods for this smart contract
 */
export type PowGovernanceUpdateCallParams =
  | TypedCallParams<undefined>
/**
 * Defines arguments required for the deploy method.
 */
export type PowGovernanceDeployArgs = {
  deployTimeParams?: TealTemplateParams
  /**
   * A delegate which takes a create call factory and returns the create call params for this smart contract
   */
  createCall?: (callFactory: PowGovernanceCreateCalls) => PowGovernanceCreateCallParams
  /**
   * A delegate which takes a update call factory and returns the update call params for this smart contract
   */
  updateCall?: (callFactory: PowGovernanceUpdateCalls) => PowGovernanceUpdateCallParams
}


/**
 * Exposes methods for constructing all available smart contract calls
 */
export abstract class PowGovernanceCallFactory {
  /**
   * Gets available create call factories
   */
  static get create() {
    return {
      /**
       * Constructs a create call for the PowGovernance smart contract using a bare call
       *
       * @param params Any parameters for the call
       * @returns A TypedCallParams object for the call
       */
      bare(params: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs & AppClientCompilationParams & (OnCompleteNoOp) = {}) {
        return {
          method: undefined,
          methodArgs: undefined,
          ...params,
        }
      },
    }
  }

  /**
   * Gets available update call factories
   */
  static get update() {
    return {
      /**
       * Constructs an update call for the PowGovernance smart contract using a bare call
       *
       * @param params Any parameters for the call
       * @returns A TypedCallParams object for the call
       */
      bare(params: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs & AppClientCompilationParams = {}) {
        return {
          method: undefined,
          methodArgs: undefined,
          ...params,
        }
      },
    }
  }

  /**
   * Constructs a no op call for the bootstrap()void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static bootstrap(args: MethodArgs<'bootstrap()void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'bootstrap()void' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the veto_proposal(byte[32])void ABI method
   *
   * Veto a queued proposal - only owner can veto
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static vetoProposal(args: MethodArgs<'veto_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'veto_proposal(byte[32])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the execute_proposal(byte[32])void ABI method
   *
   * Execute a queued proposal - only owner can execute
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static executeProposal(args: MethodArgs<'execute_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'execute_proposal(byte[32])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the queue_proposal(byte[32])void ABI method
   *
   * Queue a succeeded proposal for execution - only owner can queue
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static queueProposal(args: MethodArgs<'queue_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'queue_proposal(byte[32])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the finalize_proposal(byte[32])void ABI method
   *
   * Finalize a proposal after voting period ends - only owner can finalize
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static finalizeProposal(args: MethodArgs<'finalize_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'finalize_proposal(byte[32])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the cancel_proposal(byte[32])void ABI method
   *
   * Cancel a pending proposal - only owner can cancel
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static cancelProposal(args: MethodArgs<'cancel_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'cancel_proposal(byte[32])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_quorum_requirement(uint256)void ABI method
   *
   * Set the global quorum requirement - only owner can set
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setQuorumRequirement(args: MethodArgs<'set_quorum_requirement(uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_quorum_requirement(uint256)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.quorumBps],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the update_total_voting_power(uint256)void ABI method
   *
   * Update the total voting power - only owner can update
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static updateTotalVotingPower(args: MethodArgs<'update_total_voting_power(uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'update_total_voting_power(uint256)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.newTotalPower],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the add_power_source(uint64,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static addPowerSource(args: MethodArgs<'add_power_source(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'add_power_source(uint64,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.powerSourceId, args.powerMultiplier],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_power_source(uint64)(uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getPowerSource(args: MethodArgs<'get_power_source(uint64)(uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_power_source(uint64)(uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.powerSourceId],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the update_power_source(uint64,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static updatePowerSource(args: MethodArgs<'update_power_source(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'update_power_source(uint64,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.powerSourceId, args.powerMultiplier],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the lock_power(uint64,uint256,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static lockPower(args: MethodArgs<'lock_power(uint64,uint256,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'lock_power(uint64,uint256,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.powerSourceId, args.powerSourceAmount, args.powerUnlockTimestamp],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getPowerLock(args: MethodArgs<'get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.powerSourceId, args.powerUnlockTimestamp],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the unlock_power(uint64,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static unlockPower(args: MethodArgs<'unlock_power(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'unlock_power(uint64,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.powerSourceId, args.powerUnlockTimestamp],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_proposal_node(byte[64],byte[512])byte[32] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getProposalNode(args: MethodArgs<'get_proposal_node(byte[64],byte[512])byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_proposal_node(byte[64],byte[512])byte[32]' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalTitle, args.proposalDescription],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getProposal(args: MethodArgs<'get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256)' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_vote(byte[32],address)uint64 ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getVote(args: MethodArgs<'get_vote(byte[32],address)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_vote(byte[32],address)uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode, args.account],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the propose(byte[64],byte[512],uint64,uint64)byte[32] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static propose(args: MethodArgs<'propose(byte[64],byte[512],uint64,uint64)byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'propose(byte[64],byte[512],uint64,uint64)byte[32]' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalTitle, args.proposalDescription, args.proposalCategoryId, args.proposalStartTimestamp],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the activate_proposal(byte[32])void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static activateProposal(args: MethodArgs<'activate_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'activate_proposal(byte[32])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the cast_vote(byte[32],uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static castVote(args: MethodArgs<'cast_vote(byte[32],uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'cast_vote(byte[32],uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode, args.support],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the reject_proposal(byte[32])void ABI method
   *
   * Check if a pending proposal should be rejected due to insufficient activation votes
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static rejectProposal(args: MethodArgs<'reject_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'reject_proposal(byte[32])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_active_proposal_count()uint64 ABI method
   *
   * Get the current number of active proposals
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getActiveProposalCount(args: MethodArgs<'get_active_proposal_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_active_proposal_count()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_total_voter_count()uint64 ABI method
   *
   * Get the current number of unique voters
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getTotalVoterCount(args: MethodArgs<'get_total_voter_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_total_voter_count()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_participation_rate()uint64 ABI method
   *
   * Get the current participation rate as a percentage (0-100)
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getParticipationRate(args: MethodArgs<'get_participation_rate()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_participation_rate()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_proposal_participation_rate(byte[32])uint64 ABI method
   *
   * Get participation rate for a specific proposal as a percentage (0-100)
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getProposalParticipationRate(args: MethodArgs<'get_proposal_participation_rate(byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_proposal_participation_rate(byte[32])uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_eligible_voter_count()uint64 ABI method
   *
   * Get the number of voters with voting power > 0
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getEligibleVoterCount(args: MethodArgs<'get_eligible_voter_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_eligible_voter_count()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_participating_voter_count()uint64 ABI method
   *
   * Get the number of voters who have actually participated in voting
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getParticipatingVoterCount(args: MethodArgs<'get_participating_voter_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_participating_voter_count()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_finalized_proposal_count()uint64 ABI method
   *
   * Get the number of proposals that have been finalized
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getFinalizedProposalCount(args: MethodArgs<'get_finalized_proposal_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_finalized_proposal_count()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_average_participation_per_proposal()uint64 ABI method
   *
   * Get average participation power per finalized proposal
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getAverageParticipationPerProposal(args: MethodArgs<'get_average_participation_per_proposal()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_average_participation_per_proposal()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_average_votes_per_proposal()uint64 ABI method
   *
   * Get average number of votes per proposal
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getAverageVotesPerProposal(args: MethodArgs<'get_average_votes_per_proposal()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_average_votes_per_proposal()uint64' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_voter_influence_score(address)uint64 ABI method
   *
   * Get influence score for a specific voter (0-100) based on voting power
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getVoterInfluenceScore(args: MethodArgs<'get_voter_influence_score(address)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_voter_influence_score(address)uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.account],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_voter_engagement_score(address)uint64 ABI method
   *
   * Get engagement score for a specific voter (0-100) based on actual participation
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getVoterEngagementScore(args: MethodArgs<'get_voter_engagement_score(address)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_voter_engagement_score(address)uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.account],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the has_voter_participated_in_proposal(address,byte[32])bool ABI method
   *
   * Check if a voter has participated in a specific proposal
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static hasVoterParticipatedInProposal(args: MethodArgs<'has_voter_participated_in_proposal(address,byte[32])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'has_voter_participated_in_proposal(address,byte[32])bool' as const,
      methodArgs: Array.isArray(args) ? args : [args.account, args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_voter_participation_timestamp(address,byte[32])uint64 ABI method
   *
   * Get the timestamp when a voter participated in a specific proposal
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getVoterParticipationTimestamp(args: MethodArgs<'get_voter_participation_timestamp(address,byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_voter_participation_timestamp(address,byte[32])uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.account, args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_voter_proposal_count(address)uint64 ABI method
   *
   * Get the number of proposals a voter has participated in
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getVoterProposalCount(args: MethodArgs<'get_voter_proposal_count(address)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_voter_proposal_count(address)uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.account],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_voter_last_proposal_node(address)byte[32] ABI method
   *
   * Get the node of the last proposal this voter participated in
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getVoterLastProposalNode(args: MethodArgs<'get_voter_last_proposal_node(address)byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_voter_last_proposal_node(address)byte[32]' as const,
      methodArgs: Array.isArray(args) ? args : [args.account],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_quorum_requirement()uint256 ABI method
   *
   * Get the global quorum requirement in basis points (bps) with base of 10000
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getQuorumRequirement(args: MethodArgs<'get_quorum_requirement()uint256'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_quorum_requirement()uint256' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_quorum_threshold()uint256 ABI method
   *
   * Get the current quorum threshold in voting power units
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getQuorumThreshold(args: MethodArgs<'get_quorum_threshold()uint256'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_quorum_threshold()uint256' as const,
      methodArgs: Array.isArray(args) ? args : [],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the check_proposal_quorum(byte[32])bool ABI method
   *
   * Check if a proposal meets the quorum requirement
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static checkProposalQuorum(args: MethodArgs<'check_proposal_quorum(byte[32])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'check_proposal_quorum(byte[32])bool' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_proposal_quorum_status(byte[32])uint64 ABI method
   *
   * Get quorum status for a proposal: 0 = not met, 1 = met, 2 = exceeded
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getProposalQuorumStatus(args: MethodArgs<'get_proposal_quorum_status(byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_proposal_quorum_status(byte[32])uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_proposal_quorum_progress(byte[32])uint64 ABI method
   *
   * Get quorum progress as percentage (0-10000 bps) for a proposal
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getProposalQuorumProgress(args: MethodArgs<'get_proposal_quorum_progress(byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_proposal_quorum_progress(byte[32])uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_proposal_quorum_threshold(byte[32])uint64 ABI method
   *
   * Get the quorum threshold for a specific proposal
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getProposalQuorumThreshold(args: MethodArgs<'get_proposal_quorum_threshold(byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_proposal_quorum_threshold(byte[32])uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_lockup_bonus_multiplier(uint64)uint64 ABI method
   *
   * Get the bonus multiplier for a given lockup duration in seconds
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getLockupBonusMultiplier(args: MethodArgs<'get_lockup_bonus_multiplier(uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_lockup_bonus_multiplier(uint64)uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.lockupDurationSeconds],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_lockup_tier_info(uint64)uint64 ABI method
   *
   * Get the lockup tier (1-5) for a given duration
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getLockupTierInfo(args: MethodArgs<'get_lockup_tier_info(uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_lockup_tier_info(uint64)uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.lockupDurationSeconds],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the calculate_potential_power_granted(uint64,uint256,uint64)uint256 ABI method
   *
   * Calculate potential voting power granted for a given lockup scenario
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static calculatePotentialPowerGranted(args: MethodArgs<'calculate_potential_power_granted(uint64,uint256,uint64)uint256'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'calculate_potential_power_granted(uint64,uint256,uint64)uint256' as const,
      methodArgs: Array.isArray(args) ? args : [args.powerSourceId, args.powerSourceAmount, args.lockupDurationSeconds],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_lockup_tier_duration(uint64)uint64 ABI method
   *
   * Get the minimum duration required for a specific lockup tier
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getLockupTierDuration(args: MethodArgs<'get_lockup_tier_duration(uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_lockup_tier_duration(uint64)uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.tier],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_lockup_tier_bonus(uint64)uint64 ABI method
   *
   * Get the bonus multiplier for a specific lockup tier
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getLockupTierBonus(args: MethodArgs<'get_lockup_tier_bonus(uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_lockup_tier_bonus(uint64)uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.tier],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_power_lock_info(uint64,uint64)uint64 ABI method
   *
   * Get comprehensive lockup information for a power lock
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getPowerLockInfo(args: MethodArgs<'get_power_lock_info(uint64,uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_power_lock_info(uint64,uint64)uint64' as const,
      methodArgs: Array.isArray(args) ? args : [args.powerSourceId, args.powerUnlockTimestamp],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32]) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getVoter(args: MethodArgs<'get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32])'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32])' as const,
      methodArgs: Array.isArray(args) ? args : [args.account],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the check_proposal_activation(byte[32])void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static checkProposalActivation(args: MethodArgs<'check_proposal_activation(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'check_proposal_activation(byte[32])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.proposalNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_election_node(byte[64],byte[512])byte[32] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getElectionNode(args: MethodArgs<'get_election_node(byte[64],byte[512])byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_election_node(byte[64],byte[512])byte[32]' as const,
      methodArgs: Array.isArray(args) ? args : [args.electionTitle, args.electionDescription],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getElection(args: MethodArgs<'get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.electionNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the propose_election(byte[64],byte[512],uint64,uint64)byte[32] ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static proposeElection(args: MethodArgs<'propose_election(byte[64],byte[512],uint64,uint64)byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'propose_election(byte[64],byte[512],uint64,uint64)byte[32]' as const,
      methodArgs: Array.isArray(args) ? args : [args.electionTitle, args.electionDescription, args.electionStartTimestamp, args.electionEndTimestamp],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static endorseCandidates(args: MethodArgs<'endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void' as const,
      methodArgs: Array.isArray(args) ? args : [args.electionNode, args.candidateNode_1, args.candidateNode_2, args.candidateNode_3, args.candidateNode_4, args.candidateNode_5],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64) ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getCandidateEndorsement(args: MethodArgs<'get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64)' as const,
      methodArgs: Array.isArray(args) ? args : [args.electionNode, args.candidateNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the get_endorsement(byte[32],address)bool ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static getEndorsement(args: MethodArgs<'get_endorsement(byte[32],address)bool'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'get_endorsement(byte[32],address)bool' as const,
      methodArgs: Array.isArray(args) ? args : [args.electionNode, args.voterNode],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the transfer(address)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static transfer(args: MethodArgs<'transfer(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'transfer(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.newOwner],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the set_version(uint64,uint64)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'set_version(uint64,uint64)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.contractVersion, args.deploymentVersion],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the approve_update(bool)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'approve_update(bool)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.approval],
      ...params,
    }
  }
  /**
   * Constructs a no op call for the grant_upgrader(address)void ABI method
   *
   * @param args Any args for the contract call
   * @param params Any additional parameters for the call
   * @returns A TypedCallParams object for the call
   */
  static grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs) {
    return {
      method: 'grant_upgrader(address)void' as const,
      methodArgs: Array.isArray(args) ? args : [args.upgrader],
      ...params,
    }
  }
}

/**
 * A client to make calls to the PowGovernance smart contract
 */
export class PowGovernanceClient {
  /**
   * The underlying `ApplicationClient` for when you want to have more flexibility
   */
  public readonly appClient: ApplicationClient

  private readonly sender: SendTransactionFrom | undefined

  /**
   * Creates a new instance of `PowGovernanceClient`
   *
   * @param appDetails appDetails The details to identify the app to deploy
   * @param algod An algod client instance
   */
  constructor(appDetails: AppDetails, private algod: Algodv2) {
    this.sender = appDetails.sender
    this.appClient = algokit.getAppClient({
      ...appDetails,
      app: APP_SPEC
    }, algod)
  }

  /**
   * Checks for decode errors on the AppCallTransactionResult and maps the return value to the specified generic type
   *
   * @param result The AppCallTransactionResult to be mapped
   * @param returnValueFormatter An optional delegate to format the return value if required
   * @returns The smart contract response with an updated return value
   */
  protected mapReturnValue<TReturn, TResult extends AppCallTransactionResult = AppCallTransactionResult>(result: AppCallTransactionResult, returnValueFormatter?: (value: any) => TReturn): AppCallTransactionResultOfType<TReturn> & TResult {
    if(result.return?.decodeError) {
      throw result.return.decodeError
    }
    const returnValue = result.return?.returnValue !== undefined && returnValueFormatter !== undefined
      ? returnValueFormatter(result.return.returnValue)
      : result.return?.returnValue as TReturn | undefined
      return { ...result, return: returnValue } as AppCallTransactionResultOfType<TReturn> & TResult
  }

  /**
   * Calls the ABI method with the matching signature using an onCompletion code of NO_OP
   *
   * @param typedCallParams An object containing the method signature, args, and any other relevant parameters
   * @param returnValueFormatter An optional delegate which when provided will be used to map non-undefined return values to the target type
   * @returns The result of the smart contract call
   */
  public async call<TSignature extends keyof PowGovernance['methods']>(typedCallParams: TypedCallParams<TSignature>, returnValueFormatter?: (value: any) => MethodReturn<TSignature>) {
    return this.mapReturnValue<MethodReturn<TSignature>>(await this.appClient.call(typedCallParams), returnValueFormatter)
  }

  /**
   * Idempotently deploys the PowGovernance smart contract.
   *
   * @param params The arguments for the contract calls and any additional parameters for the call
   * @returns The deployment result
   */
  public deploy(params: PowGovernanceDeployArgs & AppClientDeployCoreParams = {}): ReturnType<ApplicationClient['deploy']> {
    const createArgs = params.createCall?.(PowGovernanceCallFactory.create)
    const updateArgs = params.updateCall?.(PowGovernanceCallFactory.update)
    return this.appClient.deploy({
      ...params,
      updateArgs,
      createArgs,
      createOnCompleteAction: createArgs?.onCompleteAction,
    })
  }

  /**
   * Gets available create methods
   */
  public get create() {
    const $this = this
    return {
      /**
       * Creates a new instance of the PowGovernance smart contract using a bare call.
       *
       * @param args The arguments for the bare call
       * @returns The create result
       */
      async bare(args: BareCallArgs & AppClientCallCoreParams & AppClientCompilationParams & CoreAppCallArgs & (OnCompleteNoOp) = {}) {
        return $this.mapReturnValue<undefined, AppCreateCallTransactionResult>(await $this.appClient.create(args))
      },
    }
  }

  /**
   * Gets available update methods
   */
  public get update() {
    const $this = this
    return {
      /**
       * Updates an existing instance of the PowGovernance smart contract using a bare call.
       *
       * @param args The arguments for the bare call
       * @returns The update result
       */
      async bare(args: BareCallArgs & AppClientCallCoreParams & AppClientCompilationParams & CoreAppCallArgs = {}) {
        return $this.mapReturnValue<undefined, AppUpdateCallTransactionResult>(await $this.appClient.update(args))
      },
    }
  }

  /**
   * Makes a clear_state call to an existing instance of the PowGovernance smart contract.
   *
   * @param args The arguments for the bare call
   * @returns The clear_state result
   */
  public clearState(args: BareCallArgs & AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.appClient.clearState(args)
  }

  /**
   * Calls the bootstrap()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public bootstrap(args: MethodArgs<'bootstrap()void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.bootstrap(args, params))
  }

  /**
   * Calls the veto_proposal(byte[32])void ABI method.
   *
   * Veto a queued proposal - only owner can veto
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public vetoProposal(args: MethodArgs<'veto_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.vetoProposal(args, params))
  }

  /**
   * Calls the execute_proposal(byte[32])void ABI method.
   *
   * Execute a queued proposal - only owner can execute
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public executeProposal(args: MethodArgs<'execute_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.executeProposal(args, params))
  }

  /**
   * Calls the queue_proposal(byte[32])void ABI method.
   *
   * Queue a succeeded proposal for execution - only owner can queue
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public queueProposal(args: MethodArgs<'queue_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.queueProposal(args, params))
  }

  /**
   * Calls the finalize_proposal(byte[32])void ABI method.
   *
   * Finalize a proposal after voting period ends - only owner can finalize
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public finalizeProposal(args: MethodArgs<'finalize_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.finalizeProposal(args, params))
  }

  /**
   * Calls the cancel_proposal(byte[32])void ABI method.
   *
   * Cancel a pending proposal - only owner can cancel
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public cancelProposal(args: MethodArgs<'cancel_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.cancelProposal(args, params))
  }

  /**
   * Calls the set_quorum_requirement(uint256)void ABI method.
   *
   * Set the global quorum requirement - only owner can set
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setQuorumRequirement(args: MethodArgs<'set_quorum_requirement(uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.setQuorumRequirement(args, params))
  }

  /**
   * Calls the update_total_voting_power(uint256)void ABI method.
   *
   * Update the total voting power - only owner can update
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public updateTotalVotingPower(args: MethodArgs<'update_total_voting_power(uint256)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.updateTotalVotingPower(args, params))
  }

  /**
   * Calls the add_power_source(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public addPowerSource(args: MethodArgs<'add_power_source(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.addPowerSource(args, params))
  }

  /**
   * Calls the get_power_source(uint64)(uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getPowerSource(args: MethodArgs<'get_power_source(uint64)(uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getPowerSource(args, params), PowerSource)
  }

  /**
   * Calls the update_power_source(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public updatePowerSource(args: MethodArgs<'update_power_source(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.updatePowerSource(args, params))
  }

  /**
   * Calls the lock_power(uint64,uint256,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public lockPower(args: MethodArgs<'lock_power(uint64,uint256,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.lockPower(args, params))
  }

  /**
   * Calls the get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getPowerLock(args: MethodArgs<'get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getPowerLock(args, params), PowerLock)
  }

  /**
   * Calls the unlock_power(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public unlockPower(args: MethodArgs<'unlock_power(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.unlockPower(args, params))
  }

  /**
   * Calls the get_proposal_node(byte[64],byte[512])byte[32] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getProposalNode(args: MethodArgs<'get_proposal_node(byte[64],byte[512])byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getProposalNode(args, params))
  }

  /**
   * Calls the get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getProposal(args: MethodArgs<'get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getProposal(args, params), Proposal)
  }

  /**
   * Calls the get_vote(byte[32],address)uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getVote(args: MethodArgs<'get_vote(byte[32],address)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getVote(args, params))
  }

  /**
   * Calls the propose(byte[64],byte[512],uint64,uint64)byte[32] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public propose(args: MethodArgs<'propose(byte[64],byte[512],uint64,uint64)byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.propose(args, params))
  }

  /**
   * Calls the activate_proposal(byte[32])void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public activateProposal(args: MethodArgs<'activate_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.activateProposal(args, params))
  }

  /**
   * Calls the cast_vote(byte[32],uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public castVote(args: MethodArgs<'cast_vote(byte[32],uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.castVote(args, params))
  }

  /**
   * Calls the reject_proposal(byte[32])void ABI method.
   *
   * Check if a pending proposal should be rejected due to insufficient activation votes
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public rejectProposal(args: MethodArgs<'reject_proposal(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.rejectProposal(args, params))
  }

  /**
   * Calls the get_active_proposal_count()uint64 ABI method.
   *
   * Get the current number of active proposals
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getActiveProposalCount(args: MethodArgs<'get_active_proposal_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getActiveProposalCount(args, params))
  }

  /**
   * Calls the get_total_voter_count()uint64 ABI method.
   *
   * Get the current number of unique voters
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getTotalVoterCount(args: MethodArgs<'get_total_voter_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getTotalVoterCount(args, params))
  }

  /**
   * Calls the get_participation_rate()uint64 ABI method.
   *
   * Get the current participation rate as a percentage (0-100)
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getParticipationRate(args: MethodArgs<'get_participation_rate()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getParticipationRate(args, params))
  }

  /**
   * Calls the get_proposal_participation_rate(byte[32])uint64 ABI method.
   *
   * Get participation rate for a specific proposal as a percentage (0-100)
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getProposalParticipationRate(args: MethodArgs<'get_proposal_participation_rate(byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getProposalParticipationRate(args, params))
  }

  /**
   * Calls the get_eligible_voter_count()uint64 ABI method.
   *
   * Get the number of voters with voting power > 0
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getEligibleVoterCount(args: MethodArgs<'get_eligible_voter_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getEligibleVoterCount(args, params))
  }

  /**
   * Calls the get_participating_voter_count()uint64 ABI method.
   *
   * Get the number of voters who have actually participated in voting
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getParticipatingVoterCount(args: MethodArgs<'get_participating_voter_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getParticipatingVoterCount(args, params))
  }

  /**
   * Calls the get_finalized_proposal_count()uint64 ABI method.
   *
   * Get the number of proposals that have been finalized
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getFinalizedProposalCount(args: MethodArgs<'get_finalized_proposal_count()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getFinalizedProposalCount(args, params))
  }

  /**
   * Calls the get_average_participation_per_proposal()uint64 ABI method.
   *
   * Get average participation power per finalized proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getAverageParticipationPerProposal(args: MethodArgs<'get_average_participation_per_proposal()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getAverageParticipationPerProposal(args, params))
  }

  /**
   * Calls the get_average_votes_per_proposal()uint64 ABI method.
   *
   * Get average number of votes per proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getAverageVotesPerProposal(args: MethodArgs<'get_average_votes_per_proposal()uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getAverageVotesPerProposal(args, params))
  }

  /**
   * Calls the get_voter_influence_score(address)uint64 ABI method.
   *
   * Get influence score for a specific voter (0-100) based on voting power
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getVoterInfluenceScore(args: MethodArgs<'get_voter_influence_score(address)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getVoterInfluenceScore(args, params))
  }

  /**
   * Calls the get_voter_engagement_score(address)uint64 ABI method.
   *
   * Get engagement score for a specific voter (0-100) based on actual participation
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getVoterEngagementScore(args: MethodArgs<'get_voter_engagement_score(address)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getVoterEngagementScore(args, params))
  }

  /**
   * Calls the has_voter_participated_in_proposal(address,byte[32])bool ABI method.
   *
   * Check if a voter has participated in a specific proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public hasVoterParticipatedInProposal(args: MethodArgs<'has_voter_participated_in_proposal(address,byte[32])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.hasVoterParticipatedInProposal(args, params))
  }

  /**
   * Calls the get_voter_participation_timestamp(address,byte[32])uint64 ABI method.
   *
   * Get the timestamp when a voter participated in a specific proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getVoterParticipationTimestamp(args: MethodArgs<'get_voter_participation_timestamp(address,byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getVoterParticipationTimestamp(args, params))
  }

  /**
   * Calls the get_voter_proposal_count(address)uint64 ABI method.
   *
   * Get the number of proposals a voter has participated in
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getVoterProposalCount(args: MethodArgs<'get_voter_proposal_count(address)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getVoterProposalCount(args, params))
  }

  /**
   * Calls the get_voter_last_proposal_node(address)byte[32] ABI method.
   *
   * Get the node of the last proposal this voter participated in
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getVoterLastProposalNode(args: MethodArgs<'get_voter_last_proposal_node(address)byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getVoterLastProposalNode(args, params))
  }

  /**
   * Calls the get_quorum_requirement()uint256 ABI method.
   *
   * Get the global quorum requirement in basis points (bps) with base of 10000
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getQuorumRequirement(args: MethodArgs<'get_quorum_requirement()uint256'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getQuorumRequirement(args, params))
  }

  /**
   * Calls the get_quorum_threshold()uint256 ABI method.
   *
   * Get the current quorum threshold in voting power units
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getQuorumThreshold(args: MethodArgs<'get_quorum_threshold()uint256'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getQuorumThreshold(args, params))
  }

  /**
   * Calls the check_proposal_quorum(byte[32])bool ABI method.
   *
   * Check if a proposal meets the quorum requirement
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public checkProposalQuorum(args: MethodArgs<'check_proposal_quorum(byte[32])bool'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.checkProposalQuorum(args, params))
  }

  /**
   * Calls the get_proposal_quorum_status(byte[32])uint64 ABI method.
   *
   * Get quorum status for a proposal: 0 = not met, 1 = met, 2 = exceeded
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getProposalQuorumStatus(args: MethodArgs<'get_proposal_quorum_status(byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getProposalQuorumStatus(args, params))
  }

  /**
   * Calls the get_proposal_quorum_progress(byte[32])uint64 ABI method.
   *
   * Get quorum progress as percentage (0-10000 bps) for a proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getProposalQuorumProgress(args: MethodArgs<'get_proposal_quorum_progress(byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getProposalQuorumProgress(args, params))
  }

  /**
   * Calls the get_proposal_quorum_threshold(byte[32])uint64 ABI method.
   *
   * Get the quorum threshold for a specific proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getProposalQuorumThreshold(args: MethodArgs<'get_proposal_quorum_threshold(byte[32])uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getProposalQuorumThreshold(args, params))
  }

  /**
   * Calls the get_lockup_bonus_multiplier(uint64)uint64 ABI method.
   *
   * Get the bonus multiplier for a given lockup duration in seconds
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getLockupBonusMultiplier(args: MethodArgs<'get_lockup_bonus_multiplier(uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getLockupBonusMultiplier(args, params))
  }

  /**
   * Calls the get_lockup_tier_info(uint64)uint64 ABI method.
   *
   * Get the lockup tier (1-5) for a given duration
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getLockupTierInfo(args: MethodArgs<'get_lockup_tier_info(uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getLockupTierInfo(args, params))
  }

  /**
   * Calls the calculate_potential_power_granted(uint64,uint256,uint64)uint256 ABI method.
   *
   * Calculate potential voting power granted for a given lockup scenario
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public calculatePotentialPowerGranted(args: MethodArgs<'calculate_potential_power_granted(uint64,uint256,uint64)uint256'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.calculatePotentialPowerGranted(args, params))
  }

  /**
   * Calls the get_lockup_tier_duration(uint64)uint64 ABI method.
   *
   * Get the minimum duration required for a specific lockup tier
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getLockupTierDuration(args: MethodArgs<'get_lockup_tier_duration(uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getLockupTierDuration(args, params))
  }

  /**
   * Calls the get_lockup_tier_bonus(uint64)uint64 ABI method.
   *
   * Get the bonus multiplier for a specific lockup tier
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getLockupTierBonus(args: MethodArgs<'get_lockup_tier_bonus(uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getLockupTierBonus(args, params))
  }

  /**
   * Calls the get_power_lock_info(uint64,uint64)uint64 ABI method.
   *
   * Get comprehensive lockup information for a power lock
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getPowerLockInfo(args: MethodArgs<'get_power_lock_info(uint64,uint64)uint64'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getPowerLockInfo(args, params))
  }

  /**
   * Calls the get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32]) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getVoter(args: MethodArgs<'get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32])'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getVoter(args, params), Voter)
  }

  /**
   * Calls the check_proposal_activation(byte[32])void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public checkProposalActivation(args: MethodArgs<'check_proposal_activation(byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.checkProposalActivation(args, params))
  }

  /**
   * Calls the get_election_node(byte[64],byte[512])byte[32] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getElectionNode(args: MethodArgs<'get_election_node(byte[64],byte[512])byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getElectionNode(args, params))
  }

  /**
   * Calls the get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getElection(args: MethodArgs<'get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getElection(args, params), ElectionProposal)
  }

  /**
   * Calls the propose_election(byte[64],byte[512],uint64,uint64)byte[32] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public proposeElection(args: MethodArgs<'propose_election(byte[64],byte[512],uint64,uint64)byte[32]'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.proposeElection(args, params))
  }

  /**
   * Calls the endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public endorseCandidates(args: MethodArgs<'endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.endorseCandidates(args, params))
  }

  /**
   * Calls the get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getCandidateEndorsement(args: MethodArgs<'get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64)'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getCandidateEndorsement(args, params), Endorsement)
  }

  /**
   * Calls the get_endorsement(byte[32],address)bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public getEndorsement(args: MethodArgs<'get_endorsement(byte[32],address)bool'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.getEndorsement(args, params))
  }

  /**
   * Calls the transfer(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public transfer(args: MethodArgs<'transfer(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.transfer(args, params))
  }

  /**
   * Calls the set_version(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.setVersion(args, params))
  }

  /**
   * Calls the approve_update(bool)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.approveUpdate(args, params))
  }

  /**
   * Calls the grant_upgrader(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The result of the call
   */
  public grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params: AppClientCallCoreParams & CoreAppCallArgs = {}) {
    return this.call(PowGovernanceCallFactory.grantUpgrader(args, params))
  }

  /**
   * Extracts a binary state value out of an AppState dictionary
   *
   * @param state The state dictionary containing the state value
   * @param key The key of the state value
   * @returns A BinaryState instance containing the state value, or undefined if the key was not found
   */
  private static getBinaryState(state: AppState, key: string): BinaryState | undefined {
    const value = state[key]
    if (!value) return undefined
    if (!('valueRaw' in value))
      throw new Error(`Failed to parse state value for ${key}; received an int when expected a byte array`)
    return {
      asString(): string {
        return value.value
      },
      asByteArray(): Uint8Array {
        return value.valueRaw
      }
    }
  }

  /**
   * Extracts a integer state value out of an AppState dictionary
   *
   * @param state The state dictionary containing the state value
   * @param key The key of the state value
   * @returns An IntegerState instance containing the state value, or undefined if the key was not found
   */
  private static getIntegerState(state: AppState, key: string): IntegerState | undefined {
    const value = state[key]
    if (!value) return undefined
    if ('valueRaw' in value)
      throw new Error(`Failed to parse state value for ${key}; received a byte array when expected a number`)
    return {
      asBigInt() {
        return typeof value.value === 'bigint' ? value.value : BigInt(value.value)
      },
      asNumber(): number {
        return typeof value.value === 'bigint' ? Number(value.value) : value.value
      },
    }
  }

  /**
   * Returns the smart contract's global state wrapped in a strongly typed accessor with options to format the stored value
   */
  public async getGlobalState(): Promise<PowGovernance['state']['global']> {
    const state = await this.appClient.getGlobalState()
    return {
      get activationThreshold() {
        return PowGovernanceClient.getBinaryState(state, 'activation_threshold')
      },
      get activeProposalCount() {
        return PowGovernanceClient.getIntegerState(state, 'active_proposal_count')
      },
      get contractVersion() {
        return PowGovernanceClient.getIntegerState(state, 'contract_version')
      },
      get deploymentVersion() {
        return PowGovernanceClient.getIntegerState(state, 'deployment_version')
      },
      get electionCount() {
        return PowGovernanceClient.getIntegerState(state, 'election_count')
      },
      get endorsementCount() {
        return PowGovernanceClient.getIntegerState(state, 'endorsement_count')
      },
      get finalizedProposalCount() {
        return PowGovernanceClient.getIntegerState(state, 'finalized_proposal_count')
      },
      get owner() {
        return PowGovernanceClient.getBinaryState(state, 'owner')
      },
      get proposalCount() {
        return PowGovernanceClient.getIntegerState(state, 'proposal_count')
      },
      get quorumRequirement() {
        return PowGovernanceClient.getBinaryState(state, 'quorum_requirement')
      },
      get totalParticipatingVoters() {
        return PowGovernanceClient.getIntegerState(state, 'total_participating_voters')
      },
      get totalParticipationPower() {
        return PowGovernanceClient.getBinaryState(state, 'total_participation_power')
      },
      get totalVoterCount() {
        return PowGovernanceClient.getIntegerState(state, 'total_voter_count')
      },
      get totalVotingPower() {
        return PowGovernanceClient.getBinaryState(state, 'total_voting_power')
      },
      get treasuryAppId() {
        return PowGovernanceClient.getIntegerState(state, 'treasury_app_id')
      },
      get updatable() {
        return PowGovernanceClient.getIntegerState(state, 'updatable')
      },
      get upgrader() {
        return PowGovernanceClient.getBinaryState(state, 'upgrader')
      },
      get voteCount() {
        return PowGovernanceClient.getIntegerState(state, 'vote_count')
      },
    }
  }

  public compose(): PowGovernanceComposer {
    const client = this
    const atc = new AtomicTransactionComposer()
    let promiseChain:Promise<unknown> = Promise.resolve()
    const resultMappers: Array<undefined | ((x: any) => any)> = []
    return {
      bootstrap(args: MethodArgs<'bootstrap()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.bootstrap(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      vetoProposal(args: MethodArgs<'veto_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.vetoProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      executeProposal(args: MethodArgs<'execute_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.executeProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      queueProposal(args: MethodArgs<'queue_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.queueProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      finalizeProposal(args: MethodArgs<'finalize_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.finalizeProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      cancelProposal(args: MethodArgs<'cancel_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.cancelProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setQuorumRequirement(args: MethodArgs<'set_quorum_requirement(uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setQuorumRequirement(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      updateTotalVotingPower(args: MethodArgs<'update_total_voting_power(uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.updateTotalVotingPower(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      addPowerSource(args: MethodArgs<'add_power_source(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.addPowerSource(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getPowerSource(args: MethodArgs<'get_power_source(uint64)(uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getPowerSource(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(PowerSource)
        return this
      },
      updatePowerSource(args: MethodArgs<'update_power_source(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.updatePowerSource(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      lockPower(args: MethodArgs<'lock_power(uint64,uint256,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.lockPower(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getPowerLock(args: MethodArgs<'get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getPowerLock(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(PowerLock)
        return this
      },
      unlockPower(args: MethodArgs<'unlock_power(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.unlockPower(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getProposalNode(args: MethodArgs<'get_proposal_node(byte[64],byte[512])byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getProposalNode(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getProposal(args: MethodArgs<'get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(Proposal)
        return this
      },
      getVote(args: MethodArgs<'get_vote(byte[32],address)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getVote(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      propose(args: MethodArgs<'propose(byte[64],byte[512],uint64,uint64)byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.propose(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      activateProposal(args: MethodArgs<'activate_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.activateProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      castVote(args: MethodArgs<'cast_vote(byte[32],uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.castVote(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      rejectProposal(args: MethodArgs<'reject_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.rejectProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getActiveProposalCount(args: MethodArgs<'get_active_proposal_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getActiveProposalCount(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getTotalVoterCount(args: MethodArgs<'get_total_voter_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getTotalVoterCount(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getParticipationRate(args: MethodArgs<'get_participation_rate()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getParticipationRate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getProposalParticipationRate(args: MethodArgs<'get_proposal_participation_rate(byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getProposalParticipationRate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getEligibleVoterCount(args: MethodArgs<'get_eligible_voter_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getEligibleVoterCount(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getParticipatingVoterCount(args: MethodArgs<'get_participating_voter_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getParticipatingVoterCount(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getFinalizedProposalCount(args: MethodArgs<'get_finalized_proposal_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getFinalizedProposalCount(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getAverageParticipationPerProposal(args: MethodArgs<'get_average_participation_per_proposal()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getAverageParticipationPerProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getAverageVotesPerProposal(args: MethodArgs<'get_average_votes_per_proposal()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getAverageVotesPerProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getVoterInfluenceScore(args: MethodArgs<'get_voter_influence_score(address)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getVoterInfluenceScore(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getVoterEngagementScore(args: MethodArgs<'get_voter_engagement_score(address)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getVoterEngagementScore(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      hasVoterParticipatedInProposal(args: MethodArgs<'has_voter_participated_in_proposal(address,byte[32])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.hasVoterParticipatedInProposal(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getVoterParticipationTimestamp(args: MethodArgs<'get_voter_participation_timestamp(address,byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getVoterParticipationTimestamp(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getVoterProposalCount(args: MethodArgs<'get_voter_proposal_count(address)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getVoterProposalCount(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getVoterLastProposalNode(args: MethodArgs<'get_voter_last_proposal_node(address)byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getVoterLastProposalNode(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getQuorumRequirement(args: MethodArgs<'get_quorum_requirement()uint256'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getQuorumRequirement(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getQuorumThreshold(args: MethodArgs<'get_quorum_threshold()uint256'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getQuorumThreshold(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      checkProposalQuorum(args: MethodArgs<'check_proposal_quorum(byte[32])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.checkProposalQuorum(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getProposalQuorumStatus(args: MethodArgs<'get_proposal_quorum_status(byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getProposalQuorumStatus(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getProposalQuorumProgress(args: MethodArgs<'get_proposal_quorum_progress(byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getProposalQuorumProgress(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getProposalQuorumThreshold(args: MethodArgs<'get_proposal_quorum_threshold(byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getProposalQuorumThreshold(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getLockupBonusMultiplier(args: MethodArgs<'get_lockup_bonus_multiplier(uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getLockupBonusMultiplier(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getLockupTierInfo(args: MethodArgs<'get_lockup_tier_info(uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getLockupTierInfo(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      calculatePotentialPowerGranted(args: MethodArgs<'calculate_potential_power_granted(uint64,uint256,uint64)uint256'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.calculatePotentialPowerGranted(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getLockupTierDuration(args: MethodArgs<'get_lockup_tier_duration(uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getLockupTierDuration(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getLockupTierBonus(args: MethodArgs<'get_lockup_tier_bonus(uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getLockupTierBonus(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getPowerLockInfo(args: MethodArgs<'get_power_lock_info(uint64,uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getPowerLockInfo(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getVoter(args: MethodArgs<'get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32])'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getVoter(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(Voter)
        return this
      },
      checkProposalActivation(args: MethodArgs<'check_proposal_activation(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.checkProposalActivation(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getElectionNode(args: MethodArgs<'get_election_node(byte[64],byte[512])byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getElectionNode(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getElection(args: MethodArgs<'get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getElection(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(ElectionProposal)
        return this
      },
      proposeElection(args: MethodArgs<'propose_election(byte[64],byte[512],uint64,uint64)byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.proposeElection(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      endorseCandidates(args: MethodArgs<'endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.endorseCandidates(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      getCandidateEndorsement(args: MethodArgs<'get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getCandidateEndorsement(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(Endorsement)
        return this
      },
      getEndorsement(args: MethodArgs<'get_endorsement(byte[32],address)bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.getEndorsement(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      transfer(args: MethodArgs<'transfer(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.transfer(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.setVersion(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.approveUpdate(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.grantUpgrader(args, {...params, sendParams: {...params?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      get update() {
        const $this = this
        return {
          bare(args?: BareCallArgs & AppClientComposeCallCoreParams & AppClientCompilationParams & CoreAppCallArgs) {
            promiseChain = promiseChain.then(() => client.update.bare({...args, sendParams: {...args?.sendParams, skipSending: true, atc}}))
            resultMappers.push(undefined)
            return $this
          },
        }
      },
      clearState(args?: BareCallArgs & AppClientComposeCallCoreParams & CoreAppCallArgs) {
        promiseChain = promiseChain.then(() => client.clearState({...args, sendParams: {...args?.sendParams, skipSending: true, atc}}))
        resultMappers.push(undefined)
        return this
      },
      addTransaction(txn: TransactionWithSigner | TransactionToSign | Transaction | Promise<SendTransactionResult>, defaultSender?: SendTransactionFrom) {
        promiseChain = promiseChain.then(async () => atc.addTransaction(await algokit.getTransactionWithSigner(txn, defaultSender ?? client.sender)))
        return this
      },
      async atc() {
        await promiseChain
        return atc
      },
      async simulate(options?: SimulateOptions) {
        await promiseChain
        const result = await atc.simulate(client.algod, new modelsv2.SimulateRequest({ txnGroups: [], ...options }))
        return {
          ...result,
          returns: result.methodResults?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val.returnValue) : val.returnValue)
        }
      },
      async execute(sendParams?: AppClientComposeExecuteParams) {
        await promiseChain
        const result = await algokit.sendAtomicTransactionComposer({ atc, sendParams }, client.algod)
        return {
          ...result,
          returns: result.returns?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i]!(val.returnValue) : val.returnValue)
        }
      }
    } as unknown as PowGovernanceComposer
  }
}
export type PowGovernanceComposer<TReturns extends [...any[]] = []> = {
  /**
   * Calls the bootstrap()void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  bootstrap(args: MethodArgs<'bootstrap()void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'bootstrap()void'>]>

  /**
   * Calls the veto_proposal(byte[32])void ABI method.
   *
   * Veto a queued proposal - only owner can veto
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  vetoProposal(args: MethodArgs<'veto_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'veto_proposal(byte[32])void'>]>

  /**
   * Calls the execute_proposal(byte[32])void ABI method.
   *
   * Execute a queued proposal - only owner can execute
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  executeProposal(args: MethodArgs<'execute_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'execute_proposal(byte[32])void'>]>

  /**
   * Calls the queue_proposal(byte[32])void ABI method.
   *
   * Queue a succeeded proposal for execution - only owner can queue
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  queueProposal(args: MethodArgs<'queue_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'queue_proposal(byte[32])void'>]>

  /**
   * Calls the finalize_proposal(byte[32])void ABI method.
   *
   * Finalize a proposal after voting period ends - only owner can finalize
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  finalizeProposal(args: MethodArgs<'finalize_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'finalize_proposal(byte[32])void'>]>

  /**
   * Calls the cancel_proposal(byte[32])void ABI method.
   *
   * Cancel a pending proposal - only owner can cancel
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  cancelProposal(args: MethodArgs<'cancel_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'cancel_proposal(byte[32])void'>]>

  /**
   * Calls the set_quorum_requirement(uint256)void ABI method.
   *
   * Set the global quorum requirement - only owner can set
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setQuorumRequirement(args: MethodArgs<'set_quorum_requirement(uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'set_quorum_requirement(uint256)void'>]>

  /**
   * Calls the update_total_voting_power(uint256)void ABI method.
   *
   * Update the total voting power - only owner can update
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  updateTotalVotingPower(args: MethodArgs<'update_total_voting_power(uint256)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'update_total_voting_power(uint256)void'>]>

  /**
   * Calls the add_power_source(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  addPowerSource(args: MethodArgs<'add_power_source(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'add_power_source(uint64,uint64)void'>]>

  /**
   * Calls the get_power_source(uint64)(uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getPowerSource(args: MethodArgs<'get_power_source(uint64)(uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_power_source(uint64)(uint64,uint64)'>]>

  /**
   * Calls the update_power_source(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  updatePowerSource(args: MethodArgs<'update_power_source(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'update_power_source(uint64,uint64)void'>]>

  /**
   * Calls the lock_power(uint64,uint256,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  lockPower(args: MethodArgs<'lock_power(uint64,uint256,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'lock_power(uint64,uint256,uint64)void'>]>

  /**
   * Calls the get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getPowerLock(args: MethodArgs<'get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_power_lock(uint64,uint64)(uint64,uint256,uint64,address,uint256,uint64,uint64)'>]>

  /**
   * Calls the unlock_power(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  unlockPower(args: MethodArgs<'unlock_power(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'unlock_power(uint64,uint64)void'>]>

  /**
   * Calls the get_proposal_node(byte[64],byte[512])byte[32] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getProposalNode(args: MethodArgs<'get_proposal_node(byte[64],byte[512])byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_proposal_node(byte[64],byte[512])byte[32]'>]>

  /**
   * Calls the get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getProposal(args: MethodArgs<'get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_proposal(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint256,uint256,uint64,uint64,uint64,byte[32],uint64,uint64,uint64,uint64,bool,uint64,uint256)'>]>

  /**
   * Calls the get_vote(byte[32],address)uint64 ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getVote(args: MethodArgs<'get_vote(byte[32],address)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_vote(byte[32],address)uint64'>]>

  /**
   * Calls the propose(byte[64],byte[512],uint64,uint64)byte[32] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  propose(args: MethodArgs<'propose(byte[64],byte[512],uint64,uint64)byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'propose(byte[64],byte[512],uint64,uint64)byte[32]'>]>

  /**
   * Calls the activate_proposal(byte[32])void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  activateProposal(args: MethodArgs<'activate_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'activate_proposal(byte[32])void'>]>

  /**
   * Calls the cast_vote(byte[32],uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  castVote(args: MethodArgs<'cast_vote(byte[32],uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'cast_vote(byte[32],uint64)void'>]>

  /**
   * Calls the reject_proposal(byte[32])void ABI method.
   *
   * Check if a pending proposal should be rejected due to insufficient activation votes
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  rejectProposal(args: MethodArgs<'reject_proposal(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'reject_proposal(byte[32])void'>]>

  /**
   * Calls the get_active_proposal_count()uint64 ABI method.
   *
   * Get the current number of active proposals
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getActiveProposalCount(args: MethodArgs<'get_active_proposal_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_active_proposal_count()uint64'>]>

  /**
   * Calls the get_total_voter_count()uint64 ABI method.
   *
   * Get the current number of unique voters
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getTotalVoterCount(args: MethodArgs<'get_total_voter_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_total_voter_count()uint64'>]>

  /**
   * Calls the get_participation_rate()uint64 ABI method.
   *
   * Get the current participation rate as a percentage (0-100)
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getParticipationRate(args: MethodArgs<'get_participation_rate()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_participation_rate()uint64'>]>

  /**
   * Calls the get_proposal_participation_rate(byte[32])uint64 ABI method.
   *
   * Get participation rate for a specific proposal as a percentage (0-100)
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getProposalParticipationRate(args: MethodArgs<'get_proposal_participation_rate(byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_proposal_participation_rate(byte[32])uint64'>]>

  /**
   * Calls the get_eligible_voter_count()uint64 ABI method.
   *
   * Get the number of voters with voting power > 0
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getEligibleVoterCount(args: MethodArgs<'get_eligible_voter_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_eligible_voter_count()uint64'>]>

  /**
   * Calls the get_participating_voter_count()uint64 ABI method.
   *
   * Get the number of voters who have actually participated in voting
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getParticipatingVoterCount(args: MethodArgs<'get_participating_voter_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_participating_voter_count()uint64'>]>

  /**
   * Calls the get_finalized_proposal_count()uint64 ABI method.
   *
   * Get the number of proposals that have been finalized
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getFinalizedProposalCount(args: MethodArgs<'get_finalized_proposal_count()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_finalized_proposal_count()uint64'>]>

  /**
   * Calls the get_average_participation_per_proposal()uint64 ABI method.
   *
   * Get average participation power per finalized proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getAverageParticipationPerProposal(args: MethodArgs<'get_average_participation_per_proposal()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_average_participation_per_proposal()uint64'>]>

  /**
   * Calls the get_average_votes_per_proposal()uint64 ABI method.
   *
   * Get average number of votes per proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getAverageVotesPerProposal(args: MethodArgs<'get_average_votes_per_proposal()uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_average_votes_per_proposal()uint64'>]>

  /**
   * Calls the get_voter_influence_score(address)uint64 ABI method.
   *
   * Get influence score for a specific voter (0-100) based on voting power
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getVoterInfluenceScore(args: MethodArgs<'get_voter_influence_score(address)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_voter_influence_score(address)uint64'>]>

  /**
   * Calls the get_voter_engagement_score(address)uint64 ABI method.
   *
   * Get engagement score for a specific voter (0-100) based on actual participation
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getVoterEngagementScore(args: MethodArgs<'get_voter_engagement_score(address)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_voter_engagement_score(address)uint64'>]>

  /**
   * Calls the has_voter_participated_in_proposal(address,byte[32])bool ABI method.
   *
   * Check if a voter has participated in a specific proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  hasVoterParticipatedInProposal(args: MethodArgs<'has_voter_participated_in_proposal(address,byte[32])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'has_voter_participated_in_proposal(address,byte[32])bool'>]>

  /**
   * Calls the get_voter_participation_timestamp(address,byte[32])uint64 ABI method.
   *
   * Get the timestamp when a voter participated in a specific proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getVoterParticipationTimestamp(args: MethodArgs<'get_voter_participation_timestamp(address,byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_voter_participation_timestamp(address,byte[32])uint64'>]>

  /**
   * Calls the get_voter_proposal_count(address)uint64 ABI method.
   *
   * Get the number of proposals a voter has participated in
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getVoterProposalCount(args: MethodArgs<'get_voter_proposal_count(address)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_voter_proposal_count(address)uint64'>]>

  /**
   * Calls the get_voter_last_proposal_node(address)byte[32] ABI method.
   *
   * Get the node of the last proposal this voter participated in
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getVoterLastProposalNode(args: MethodArgs<'get_voter_last_proposal_node(address)byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_voter_last_proposal_node(address)byte[32]'>]>

  /**
   * Calls the get_quorum_requirement()uint256 ABI method.
   *
   * Get the global quorum requirement in basis points (bps) with base of 10000
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getQuorumRequirement(args: MethodArgs<'get_quorum_requirement()uint256'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_quorum_requirement()uint256'>]>

  /**
   * Calls the get_quorum_threshold()uint256 ABI method.
   *
   * Get the current quorum threshold in voting power units
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getQuorumThreshold(args: MethodArgs<'get_quorum_threshold()uint256'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_quorum_threshold()uint256'>]>

  /**
   * Calls the check_proposal_quorum(byte[32])bool ABI method.
   *
   * Check if a proposal meets the quorum requirement
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  checkProposalQuorum(args: MethodArgs<'check_proposal_quorum(byte[32])bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'check_proposal_quorum(byte[32])bool'>]>

  /**
   * Calls the get_proposal_quorum_status(byte[32])uint64 ABI method.
   *
   * Get quorum status for a proposal: 0 = not met, 1 = met, 2 = exceeded
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getProposalQuorumStatus(args: MethodArgs<'get_proposal_quorum_status(byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_proposal_quorum_status(byte[32])uint64'>]>

  /**
   * Calls the get_proposal_quorum_progress(byte[32])uint64 ABI method.
   *
   * Get quorum progress as percentage (0-10000 bps) for a proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getProposalQuorumProgress(args: MethodArgs<'get_proposal_quorum_progress(byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_proposal_quorum_progress(byte[32])uint64'>]>

  /**
   * Calls the get_proposal_quorum_threshold(byte[32])uint64 ABI method.
   *
   * Get the quorum threshold for a specific proposal
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getProposalQuorumThreshold(args: MethodArgs<'get_proposal_quorum_threshold(byte[32])uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_proposal_quorum_threshold(byte[32])uint64'>]>

  /**
   * Calls the get_lockup_bonus_multiplier(uint64)uint64 ABI method.
   *
   * Get the bonus multiplier for a given lockup duration in seconds
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getLockupBonusMultiplier(args: MethodArgs<'get_lockup_bonus_multiplier(uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_lockup_bonus_multiplier(uint64)uint64'>]>

  /**
   * Calls the get_lockup_tier_info(uint64)uint64 ABI method.
   *
   * Get the lockup tier (1-5) for a given duration
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getLockupTierInfo(args: MethodArgs<'get_lockup_tier_info(uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_lockup_tier_info(uint64)uint64'>]>

  /**
   * Calls the calculate_potential_power_granted(uint64,uint256,uint64)uint256 ABI method.
   *
   * Calculate potential voting power granted for a given lockup scenario
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  calculatePotentialPowerGranted(args: MethodArgs<'calculate_potential_power_granted(uint64,uint256,uint64)uint256'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'calculate_potential_power_granted(uint64,uint256,uint64)uint256'>]>

  /**
   * Calls the get_lockup_tier_duration(uint64)uint64 ABI method.
   *
   * Get the minimum duration required for a specific lockup tier
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getLockupTierDuration(args: MethodArgs<'get_lockup_tier_duration(uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_lockup_tier_duration(uint64)uint64'>]>

  /**
   * Calls the get_lockup_tier_bonus(uint64)uint64 ABI method.
   *
   * Get the bonus multiplier for a specific lockup tier
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getLockupTierBonus(args: MethodArgs<'get_lockup_tier_bonus(uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_lockup_tier_bonus(uint64)uint64'>]>

  /**
   * Calls the get_power_lock_info(uint64,uint64)uint64 ABI method.
   *
   * Get comprehensive lockup information for a power lock
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getPowerLockInfo(args: MethodArgs<'get_power_lock_info(uint64,uint64)uint64'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_power_lock_info(uint64,uint64)uint64'>]>

  /**
   * Calls the get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32]) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getVoter(args: MethodArgs<'get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32])'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_voter(address)(address,uint256,uint64,uint64,uint64,byte[32])'>]>

  /**
   * Calls the check_proposal_activation(byte[32])void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  checkProposalActivation(args: MethodArgs<'check_proposal_activation(byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'check_proposal_activation(byte[32])void'>]>

  /**
   * Calls the get_election_node(byte[64],byte[512])byte[32] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getElectionNode(args: MethodArgs<'get_election_node(byte[64],byte[512])byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_election_node(byte[64],byte[512])byte[32]'>]>

  /**
   * Calls the get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getElection(args: MethodArgs<'get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_election(byte[32])(uint64,uint64,address,byte[64],byte[512],byte[32],uint64,uint64,uint64,uint64,uint256,uint64)'>]>

  /**
   * Calls the propose_election(byte[64],byte[512],uint64,uint64)byte[32] ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  proposeElection(args: MethodArgs<'propose_election(byte[64],byte[512],uint64,uint64)byte[32]'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'propose_election(byte[64],byte[512],uint64,uint64)byte[32]'>]>

  /**
   * Calls the endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  endorseCandidates(args: MethodArgs<'endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'endorse_candidates(byte[32],byte[32],byte[32],byte[32],byte[32],byte[32])void'>]>

  /**
   * Calls the get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64) ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getCandidateEndorsement(args: MethodArgs<'get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64)'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_candidate_endorsement(byte[32],byte[32])(byte[32],byte[32],byte[32],uint64,uint256,uint64)'>]>

  /**
   * Calls the get_endorsement(byte[32],address)bool ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  getEndorsement(args: MethodArgs<'get_endorsement(byte[32],address)bool'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'get_endorsement(byte[32],address)bool'>]>

  /**
   * Calls the transfer(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  transfer(args: MethodArgs<'transfer(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'transfer(address)void'>]>

  /**
   * Calls the set_version(uint64,uint64)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  setVersion(args: MethodArgs<'set_version(uint64,uint64)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'set_version(uint64,uint64)void'>]>

  /**
   * Calls the approve_update(bool)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  approveUpdate(args: MethodArgs<'approve_update(bool)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'approve_update(bool)void'>]>

  /**
   * Calls the grant_upgrader(address)void ABI method.
   *
   * @param args The arguments for the contract call
   * @param params Any additional parameters for the call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  grantUpgrader(args: MethodArgs<'grant_upgrader(address)void'>, params?: AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, MethodReturn<'grant_upgrader(address)void'>]>

  /**
   * Gets available update methods
   */
  readonly update: {
    /**
     * Updates an existing instance of the PowGovernance smart contract using a bare call.
     *
     * @param args The arguments for the bare call
     * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
     */
    bare(args?: BareCallArgs & AppClientComposeCallCoreParams & AppClientCompilationParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, undefined]>
  }

  /**
   * Makes a clear_state call to an existing instance of the PowGovernance smart contract.
   *
   * @param args The arguments for the bare call
   * @returns The typed transaction composer so you can fluently chain multiple calls or call execute to execute all queued up transactions
   */
  clearState(args?: BareCallArgs & AppClientComposeCallCoreParams & CoreAppCallArgs): PowGovernanceComposer<[...TReturns, undefined]>

  /**
   * Adds a transaction to the composer
   *
   * @param txn One of: A TransactionWithSigner object (returned as is), a TransactionToSign object (signer is obtained from the signer property), a Transaction object (signer is extracted from the defaultSender parameter), an async SendTransactionResult returned by one of algokit utils helpers (signer is obtained from the defaultSender parameter)
   * @param defaultSender The default sender to be used to obtain a signer where the object provided to the transaction parameter does not include a signer.
   */
  addTransaction(txn: TransactionWithSigner | TransactionToSign | Transaction | Promise<SendTransactionResult>, defaultSender?: SendTransactionFrom): PowGovernanceComposer<TReturns>
  /**
   * Returns the underlying AtomicTransactionComposer instance
   */
  atc(): Promise<AtomicTransactionComposer>
  /**
   * Simulates the transaction group and returns the result
   */
  simulate(options?: SimulateOptions): Promise<PowGovernanceComposerSimulateResult<TReturns>>
  /**
   * Executes the transaction group and returns the results
   */
  execute(sendParams?: AppClientComposeExecuteParams): Promise<PowGovernanceComposerResults<TReturns>>
}
export type SimulateOptions = Omit<ConstructorParameters<typeof modelsv2.SimulateRequest>[0], 'txnGroups'>
export type PowGovernanceComposerSimulateResult<TReturns extends [...any[]]> = {
  returns: TReturns
  methodResults: ABIResult[]
  simulateResponse: modelsv2.SimulateResponse
}
export type PowGovernanceComposerResults<TReturns extends [...any[]]> = {
  returns: TReturns
  groupId: string
  txIds: string[]
  transactions: Transaction[]
}
